<!DOCTYPE html>
<html>
<head>
<link href='i1.wp.com' rel='dns-prefetch'>
<link href='i2.wp.com' rel='dns-prefetch'>
<link href='i3.wp.com' rel='dns-prefetch'>
<meta content='2HgX9mcLHaPOX6sfaaAkhWtblhEB9yUNw4l6l46e1k4' name='google-site-verification'>
<link rel="shortcut icon" type="image/x-icon" href="external/favicon-q-ac1a76f2c200e9026b5b1147519bb4fab6256910588b831e2411bc6c7c1218c3.png" />
<title>
The SPY who loved WVF (or Just another Volatility SPY strategy)
</title>
<meta content='Yes I cannot help myself: we must be able to conquer this beast called Vola Economic thesis, loosely defined: 1) there is information in the synthetic VIX versus the real VIX or VXX, 2) the Volatility of the VXX says something about the underlying and therefore the real market (Kory) 3) by assigning a low amount of capital to a high volatility strategy you prevent being taken to the cleaners but profit from upside (Alvarez) Thanks to Kory and Cezar Alvarez, I present a strategy that one could...' name='description'>
<link rel="stylesheet" media="all" href="external/quanto-base-bundle-e8eb6050172aa0d24124d5c24bac90b2cccd88b5b9c7742026c0e9efab038c6e.css" />
<link rel="stylesheet" media="all" href="external/quanto-posts-bundle-aab01368d3f82d8dafc94ee9eabb82e77dc8c9fbbffa952fdcdc744dfa523cf3.css" />
<script src="external/quanto_global-057218867db29d5768131af5d6fb3476cef098e7d9e655108befb903c7ee985e.js"></script>
<script src="external/posts_bundle-3dfd82fa469c393d752e461d837aec9e4e364ae39f49198e34a6626f2180fdf7.js"></script>
<link href='external/logo-q-180x180-0f5a6a439c99203ed4aea6f656e7604c543d287be43d8b17c7591c1131f09a59.png' rel='apple-touch-icon'>
<meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="4cQrSI25Tt4bQJxWXu4MTI6EeriVANWhHAlFbXtMIqGdol0FL0+cPaJdxWcRAaQ4tgpZ0e/MwLqeBp4H0QlAGg==" />
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<script>
//<![CDATA[
window.quanto_data={};quanto_data.bounce_back_params={"show_modal":null,"feedback_text":null};quanto_data.namespace="public";quanto_data.talib_info={"ADOSC":["Chaikin A/D Oscillator (Volume Indicators)",["fastperiod","3"],["slowperiod","10"]],"ADX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"ADXR":["Average Directional Movement Index Rating (Momentum Indicators)",["timeperiod","14"]],"APO":["Absolute Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"AROON":["Aroon (Momentum Indicators)",["timeperiod","14"]],"AROONOSC":["Aroon Oscillator (Momentum Indicators)",["timeperiod","14"]],"ATR":["Average True Range (Volatility Indicators)",["timeperiod","14"]],"BBANDS":["Bollinger Bands (Overlap Studies)",["timeperiod","5"],["nbdevup","2"],["nbdevdn","2"],["matype","0"]],"BETA":["Beta (Statistic Functions)",["timeperiod","5"]],"CCI":["Commodity Channel Index (Momentum Indicators)",["timeperiod","14"]],"CMO":["Chande Momentum Oscillator (Momentum Indicators)",["timeperiod","14"]],"CORREL":["Pearson's Correlation Coefficient (r) (Statistic Functions)",["timeperiod","30"]],"DEMA":["Double Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"DX":["Average Directional Movement Index (Momentum Indicators)",["timeperiod","14"]],"EMA":["Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"KAMA":["Kaufman Adaptive Moving Average (Overlap Studies)",["timeperiod","30"]],"LINEARREG":["Linear Regression (Statistic Functions)",["timeperiod","14"]],"LINEARREG_ANGLE":["Linear Regression Angle (Statistic Functions)",["timeperiod","14"]],"LINEARREG_INTERCEPT":["Linear Regression Intercept (Statistic Functions)",["timeperiod","14"]],"LINEARREG_SLOPE":["Linear Regression Slope (Statistic Functions)",["timeperiod","14"]],"MA":["Moving average (Overlap Studies)",["timeperiod","30"],["matype","0"]],"MACD":["Moving Average Convergence/Divergence (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["signalperiod","9"]],"MACDEXT":["MACD with controllable MA type (Momentum Indicators)",["fastperiod","12"],["fastmatype","0"],["slowperiod","26"],["slowmatype","0"],["signalperiod","9"],["signalmatype","0"]],"MACDFIX":["Moving Average Convergence/Divergence Fix 12/26 (Momentum Indicators)",["signalperiod","9"]],"MAX":["Highest values over a specified period (Math Operators)",["timeperiod","30"]],"MAXINDEX":["Index of highest value over a specified period (Math Operators)",["timeperiod","30"]],"MFI":["Money Flow Index (Momentum Indicators)",["timeperiod","14"]],"MIDPOINT":["Midpoint over period (Overlap Studies)",["timeperiod","14"]],"MIDPRICE":["Midpoint Price over period (Overlap Studies)",["timeperiod","14"]],"MIN":["Lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MININDEX":["Index of lowest value over a specified period (Math Operators)",["timeperiod","30"]],"MINMAX":["Lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINMAXINDEX":["Indexes of lowest and highest values over a specified period (Math Operators)",["timeperiod","30"]],"MINUS_DI":["Minus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"MINUS_DM":["Minus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"MOM":["Momentum (Momentum Indicators)",["timeperiod","10"]],"NATR":["Normalized Average True Range (Volatility Indicators)",["timeperiod","14"]],"PLUS_DI":["Plus Directional Indicator (Momentum Indicators)",["timeperiod","14"]],"PLUS_DM":["Plus Directional Movement (Momentum Indicators)",["timeperiod","14"]],"PPO":["Percentage Price Oscillator (Momentum Indicators)",["fastperiod","12"],["slowperiod","26"],["matype","0"]],"ROC":["Rate of change: ((price/prevPrice)-1)*100 (Momentum Indicators)",["timeperiod","10"]],"ROCP":["Rate of change Percentage: (price-prevPrice)/prevPrice (Momentum Indicators)",["timeperiod","10"]],"ROCR":["Rate of change ratio: (price/prevPrice) (Momentum Indicators)",["timeperiod","10"]],"ROCR100":["Rate of change ratio 100 scale: (price/prevPrice)*100 (Momentum Indicators)",["timeperiod","10"]],"RSI":["Relative Strength Index (Momentum Indicators)",["timeperiod","14"]],"SMA":["Simple Moving Average (Overlap Studies)",["timeperiod","30"]],"STDDEV":["Standard Deviation (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"STOCH":["Stochastic (Momentum Indicators)",["fastk_period","5"],["slowk_period","3"],["slowk_matype","0"],["slowd_period","3"],["slowd_matype","0"]],"STOCHF":["Stochastic Fast (Momentum Indicators)",["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"STOCHRSI":["Stochastic Relative Strength Index (Momentum Indicators)",["timeperiod","14"],["fastk_period","5"],["fastd_period","3"],["fastd_matype","0"]],"T3":["Triple Exponential Moving Average (T3) (Overlap Studies)",["timeperiod","5"],["vfactor","0.7"]],"TEMA":["Triple Exponential Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIMA":["Triangular Moving Average (Overlap Studies)",["timeperiod","30"]],"TRIX":["1-day Rate-Of-Change (ROC) of a Triple Smooth EMA (Momentum Indicators)",["timeperiod","30"]],"TSF":["Time Series Forecast (Statistic Functions)",["timeperiod","14"]],"ULTOSC":["Ultimate Oscillator (Momentum Indicators)",["timeperiod1","7"],["timeperiod2","14"],["timeperiod3","28"]],"VAR":["Variance (Statistic Functions)",["timeperiod","5"],["nbdev","1"]],"WILLR":["Williams' %R (Momentum Indicators)",["timeperiod","14"]],"WMA":["Weighted Moving Average (Overlap Studies)",["timeperiod","30"]]};quanto_data.nb_preview_url="https://notebooks-preview.prd.pub.quantopian.com";quanto_data.delay_nb_preview_load=true;
//]]>
</script>
<meta content='https://www.quantopian.com/posts/the-spy-who-loved-wvf-or-just-another-volatility-spy-strategy' property='og:url'>
<meta content='The SPY who loved WVF (or Just another Volatility SPY strategy)' property='og:title'>

<input type="hidden" name="env" id="quanto-env" value="production" />
<meta content='550580758292093' property='fb:app_id'>
<meta content='https://www.quantopian.com/posts/the-spy-who-loved-wvf-or-just-another-volatility-spy-strategy' property='og:url'>
<meta content='https://media.quantopian.com/public/og-image-default.png' property='og:image'>
<meta content='The SPY who loved WVF (or Just another Volatility SPY strategy)' property='og:title'>
<meta content='Yes I cannot help myself: we must be able to conquer this beast called Vola Economic thesis, loosely defined: 1) there is information in the synthetic VIX versus the real VIX or VXX, 2) the Volatility of the VXX says something about the underlying and therefore the real market (Kory) 3) by assigning a low amount of capital to a high volatility strategy you prevent being taken to the cleaners but profit from upside (Alvarez) Thanks to Kory and Cezar Alvarez, I present a strategy that one could...' property='og:description'>
</head>
<script type='application/ld+json'>
  {
    "@context": "http://schema.org",
    "@type": "Organization",
    "url": "https://www.quantopian.com",
    "logo": "https://media.quantopian.com/logos/logo-q-press-red.png"
  }
</script>
<body class='' ontouchstart=''>
<div id='fb-root'></div>
<div class='wrapper'>
<div class='alert-v2 error'>
<div class='message'>
Quantopian's community platform is shutting down. Please read <a href="/posts/quantopians-community-services-are-closing">this post</a> for more information and <a href='/account#account'>download your code</a>.
</div>
</div>
<div class='navbar navbar-default navbar-static-top' id='app-navbar'>
<div class='container-fluid'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#app-navbar-collapse' data-toggle='collapse'>
<span class='icon hamburger-menu'></span>
</button>
<a class='navbar-brand' href='/home'>
<img class='logo-image async-image' data-src='external/logo-q-white-b141ea6018546e5a4ecc3d10d8440ec076fc4385764e948b322828cc70950a76.svg'>
</a>
</div>
<div class='collapse navbar-collapse' id='app-navbar-collapse'>
<ul class='nav navbar-nav navbar-right'>
<li class='dropdown quanto-dropdown-new'>
<li>
<a class='header' href='/docs'>
Documentation
</a>
</li>
<li class='dropdown quanto-dropdown-new'>
<a class='header' data-toggle='dropdown' href='#'>
Learn
</a>
<ul class='dropdown-menu'>
<li>
<a class='mixpanel-button' data-event='main nav getting started clicked' href='/tutorials/getting-started'>Getting Started</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav tutorials clicked' href='/tutorials'>Tutorials</a>
</li>
<li>
<a class='mixpanel-button' data-event='main nav lectures clicked' href='/lectures'>Lectures</a>
</li>
</ul>
</li>
<li>
<a class='header' href='/posts' id='forum-link'>
Forum
</a>
</li>
<li>
<a class="header" href="/signin?return_to=/posts/the-spy-who-loved-wvf-or-just-another-volatility-spy-strategy">Log In</a>
</li>
</li>

</ul>
</div>
</div>
</div>
<script>
  $(document).ready(function () {
    quanto.instances.fm = new quanto.FeedbackManager();
    quanto.instances.hm = new quanto.headerManager();
  })
</script>


<div class='content content-area new-style'>
<input type="hidden" name="page-id" id="page-id" value="postatomic" />
<script src="external/MathJax.js?config=TeX-AMS_HTML-full.js,Safe" async="async"></script>
<div class='container page-container post-atomic'>
<input id='parent-post-id-val' type='hidden' value='57fa0bc94406ba1bd400066e'>
<div class='post-container' data-post-id='57fa0bc94406ba1bd400066e' id='57fa0bc94406ba1bd400066e'>
<div class='back-button back-to-community'>Back to Community</div>
<div class='post-title'>The SPY who loved WVF (or Just another Volatility SPY strategy)</div>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<span class='posted-at'>posted </span>
<span UTCms='1476004809000' class='quanto-date posted-at'></span>
<div class='pull-right other-actions'>
<div class='dropup inline-block'>
<div class='dropdown share-control other-action-link'>
<div data-toggle='dropdown'>
<div class='share-image'></div>
Share
</div>
<ul class='dropdown-menu share-options-menu'>
<li>
<a class='share-row' href='https://twitter.com/intent/tweet?text=The SPY who loved WVF (or Just another Volatility SPY strategy)&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fthe-spy-who-loved-wvf-or-just-another-volatility-spy-strategy%3Futm_source%3Dwebsite_share%26utm_campaign%3Dthe-spy-who-loved-wvf-or-just-another-volatility-spy-strategy%26utm_medium%3Dtwitter&amp;via=quantopian'>
<i class='icon icon-twitter'></i>
Share on Twitter
</a>
</li>
<li>
<div class='share-row facebook-button'>
<i class='icon icon-facebook'></i>
Share on Facebook
</div>
</li>
<li>
<div class='share-row linkedin-button' data-share-url='https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.quantopian.com%2Fposts%2Fthe-spy-who-loved-wvf-or-just-another-volatility-spy-strategy%3Futm_source%3Dwebsite_share%26utm_campaign%3Dthe-spy-who-loved-wvf-or-just-another-volatility-spy-strategy%26utm_medium%3Dlinkedin&amp;title=The+SPY+who+loved+WVF+%28or+Just+another+Volatility+SPY+strategy%29+%28Peter+Bakker%29&amp;source=Quantopian'>
<i class='icon icon-linkedin'></i>
Share on LinkedIn
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='tags tag-row'>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Mean Reversion' data-tag-id='55c50e7d8d4710ec6e00000d' href='/posts/tag/Mean-Reversion/newest'>Mean Reversion</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Collaboration Request' data-tag-id='55c50e7d8d4710ec6e000016' href='/posts/tag/Collaboration-Request/newest'>Collaboration Request</a>
<a class='tag mixpanel-button' data-event='tag click' data-mixpanel='Risk Management' data-tag-id='55d33f7b3f6ba10065000002' href='/posts/tag/Risk-Management/newest'>Risk Management</a>
</div>
<input type="hidden" name="social_fb_post_link" id="social_fb_post_link" value="https://www.quantopian.com/posts/the-spy-who-loved-wvf-or-just-another-volatility-spy-strategy?utm_source=website_share&amp;utm_campaign=the-spy-who-loved-wvf-or-just-another-volatility-spy-strategy&amp;utm_medium=facebook" />
<input type="hidden" name="social_post_image" id="social_post_image" value="external/logo-q-red-outline.png" />
<input type="hidden" name="social_post_author" id="social_post_author" value="Peter Bakker" />
<div class='body-text'>
<div class='body-text-container post-body'><p>Yes I cannot help myself: we must be able to conquer this beast called Vola</p>

<p>Economic thesis, loosely defined:<br>
1) there is information in the synthetic VIX versus the real VIX or VXX,<br>
2) the Volatility of the VXX says something about the underlying and therefore the real market (Kory)<br>
3) by assigning a low amount of capital to a high volatility strategy you prevent being taken to the cleaners but profit from upside (Alvarez)</p>

<p>Thanks to Kory and Cezar Alvarez, I present a strategy that one could trade, but looking at the tear sheet and the equity curve I suspect that this strategy is its current form and the current market does not perform.</p>

<p>For equity curve jockeys: none of the parameters are optimised, the use of cash is not optimised<br>
For Contest Jockeys: easy to isolate the Alpha with hedging, I can&#39;t be bothered with the contests</p>

<p>Further dev:<br>
Alvarez has some more &quot;anti-cleaners&quot; strategies that I didn&#39;t implement, one could test them out<br>
Pull in VIX and see whether the VIX and WVF can play nicely</p>

<p>Disclaimer:<br>
I&#39;m not trading this strategy, needs more time and trading guards and I would wait to see whether the strategy is going back to older levels of volatility as the DD in the last 2 years is double from the years before.  </p>
</div>
</div>
</div>

</div>

<div class='container page-container post-atomic'>
<div class='section-header reply-header'>
<div class='reply-title'>266 responses</div>
</div>
<div class='replies'>
<div class='post-container response-container' data-post-id='5801f1404e606e507b00061c' id='5801f1404e606e507b00061c'>
<a href='#5801f1404e606e507b00061c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57d1d3b179b26b8d02000343'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/60bdcefed5c4c69b27c4c494dc7eae81?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57d1d3b179b26b8d02000343'>Naor Porat</a>
</div>
<a UTCms='1476522311000' class='quanto-date posted-at response-posted-at' href='#5801f1404e606e507b00061c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Peter,<br>
Just have to say your previous volatillity algo was so precious for me! I have implemented it in IB and it was great!<br>
Why you think this isn&#39;t compatible for LIVE? The rationale I see here is very similar to JAVOLS..  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580208338d3874aa290002fe' id='580208338d3874aa290002fe'>
<a href='#580208338d3874aa290002fe'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1476528188000' class='quanto-date posted-at response-posted-at' href='#580208338d3874aa290002fe'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>you could trade it, I haven&#39;t put enough time in it to say it&#39;s robust. I thought I release it to the community and see how others can improve it. The things that I see in the tear sheet looks like the behavior as changed from 2014 to 2016. There is a big difference in returns and  beta and that worries me a bit. With a few more guard rails and cash usage it could be traded, but be careful...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580644092584e9c5600000f1' id='580644092584e9c5600000f1'>
<a href='#580644092584e9c5600000f1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1476805650000' class='quanto-date posted-at response-posted-at' href='#580644092584e9c5600000f1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Peter, i borrowed your codes and put this together. I got this. It is looking good. So wanted to give it a run in IB. I so new to Python and Q so hope you dont mind .  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58064530ef735b915e000811' id='58064530ef735b915e000811'>
<a href='#58064530ef735b915e000811'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1476805944000' class='quanto-date posted-at response-posted-at' href='#58064530ef735b915e000811'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here the TearSheat for it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5806ea429380c18f0e0000f2' id='5806ea429380c18f0e0000f2'>
<a href='#5806ea429380c18f0e0000f2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1476848200000' class='quanto-date posted-at response-posted-at' href='#5806ea429380c18f0e0000f2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The equity curve of the modified algo looks really nice. What are the main logic differences between the modified and original algos?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5808c281c1654e431d0001f3' id='5808c281c1654e431d0001f3'>
<a href='#5808c281c1654e431d0001f3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1476969096000' class='quanto-date posted-at response-posted-at' href='#5808c281c1654e431d0001f3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>looks good indeed, I&#39;ll play with it and see how I can break it ;)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5808d12b7623122a5100025f' id='5808d12b7623122a5100025f'>
<a href='#5808d12b7623122a5100025f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/545e7cb65cb7a70ba9002523'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3cb5116df8291dd802e3464d4e380a10?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/545e7cb65cb7a70ba9002523'>NHAT NGUYEN</a>
</div>
<a UTCms='1476972850000' class='quanto-date posted-at response-posted-at' href='#5808d12b7623122a5100025f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Peter, from my observation as the same as the note you put on top of MVP algo. As the algo  MVP, Return is a function of look back period (1-20 ) and eps_factor. i was able to do an optimize these parameters( every 2 month period)  in AmiBroker  and it delivers  good result. Im not sure how can i do it in Python(since im so new as this). Also here is the version that aggressive tilt and  using your Vol ago to control the portion of xiv and increase or decrease portion of spy and edv..  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5809494a637eec9d710001a8' id='5809494a637eec9d710001a8'>
<a href='#5809494a637eec9d710001a8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1477003606000' class='quanto-date posted-at response-posted-at' href='#5809494a637eec9d710001a8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Wow, this is awesome. Thank you Peter for starting this thread.</p>

<p>Cesar and I actually live near each other and I recently presented my volatility trading strategies at a Northwest Traders &amp; Technical Analysts meeting (Cesar attended as well). I&#39;ve shared my volatility strategies with Cesar and we&#39;re both working on improving them. Here&#39;s our Meetup group if anyone in the Seattle area is interested in joining: <a href="http://www.meetup.com/Northwest-Traders-and-Technical-Analysts-NWTTA/">http://www.meetup.com/Northwest-Traders-and-Technical-Analysts-NWTTA/</a></p>

<p>Please message or email me in private if you would like to collaborate with me on coding volatility strategies. I&#39;m a TradeStation user and all my stuff are coded in TradeStation&#39;s EasyLanguage. I would love to have them ported over to Python for Quantopian. </p>

<p>Currently I have 5 different strategies that strictly trade VXX and XIV:<br>
- Three of them are long XIV only (50-80% CAGR and 15-35% Max DD)<br>
- One is short VXX only, similar to the ones presented here but has more variables (60% CAGR and 15% Max DD; <a href="http://imgur.com/a/w4blx">http://imgur.com/a/w4blx</a>)<br>
- One is long VXX only (15% CAGR and 10% Max DD)</p>

<p>I have everything coded in EasyLanguage so it would be pretty easy for a programmer to port everything over. Unfortunately I&#39;m not a programmer.</p>

<p>Email: <a href="/cdn-cgi/l/email-protection#a2cacdc3ccc58cc9cdd0dbe2c5cfc3cbce8cc1cdcf"><span class="__cf_email__" data-cfemail="422a2d232c256c292d303b02252f232b2e6c212d2f">[email&#160;protected]</span></a></p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580a1a2972975d56cd00007a' id='580a1a2972975d56cd00007a'>
<a href='#580a1a2972975d56cd00007a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1477057075000' class='quanto-date posted-at response-posted-at' href='#580a1a2972975d56cd00007a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Only issue is that the last ago does have some leverage.  Any way to ensure there is no negative cash - for Robinhood trading?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580a2594936154ceea000810' id='580a2594936154ceea000810'>
<a href='#580a2594936154ceea000810'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1477059998000' class='quanto-date posted-at response-posted-at' href='#580a2594936154ceea000810'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A small remark , if you want to trade the last ago live, this line should be changed :</p>

<blockquote>
<p>:135: FutureWarning: pd.rolling_max is deprecated for Series<br>
and will be removed in a future version, replace with<br>
  Series.rolling(window=28,center=False).max()  </p>
</blockquote>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580a32a4151a1d4f60000388' id='580a32a4151a1d4f60000388'>
<a href='#580a32a4151a1d4f60000388'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1477063340000' class='quanto-date posted-at response-posted-at' href='#580a32a4151a1d4f60000388'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>not plug and play - you need to define the series.</p>

<p>Is there any way to get help with these changes?  Like examples?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580a47caf21afffa3d000317' id='580a47caf21afffa3d000317'>
<a href='#580a47caf21afffa3d000317'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5674b7bd1869e73f4a000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e411d64f7a123f5c2102614fafa48b58?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5674b7bd1869e73f4a000334'>Luke Izlar</a>
</div>
<a UTCms='1477068757000' class='quanto-date posted-at response-posted-at' href='#580a47caf21afffa3d000317'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For anyone considering live trading NHAT NGUYEN&#39;s algo, keep in mind that it&#39;s highly dependent on day of the week, this is a form of overfitting and there&#39;s no guarantee that it&#39;s performance in the future will be as good.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580b1070151a1d4f60000c29' id='580b1070151a1d4f60000c29'>
<a href='#580b1070151a1d4f60000c29'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/545e7cb65cb7a70ba9002523'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3cb5116df8291dd802e3464d4e380a10?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/545e7cb65cb7a70ba9002523'>NHAT NGUYEN</a>
</div>
<a UTCms='1477120119000' class='quanto-date posted-at response-posted-at' href='#580b1070151a1d4f60000c29'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Luke, you are right &quot;there&#39;s no guarantee that it&#39;s performance in the future will be as good&quot;. Im using the idea from Grant&#39;s algo (which is MVP ) and do a conversion to lite C (Zorro platform ) where i can do optimization and walk forward analysis, Amibroker gave almost the same volatility but about  2% less returns.  These are best parameters which deliver the highest return. i did 10 WFA cycles so i think it is stable parameters for next couple  of years,  algo will perform closely but past is not the future where it is a unknown . For live trading, we may need some nice Python expert in the forum to double iron some bugs in order management, keep track trades, and money management part. Or lower the allocation  and watch it like a hawk for couple of months.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580b5f888a8c0463da000102' id='580b5f888a8c0463da000102'>
<a href='#580b5f888a8c0463da000102'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1477140373000' class='quanto-date posted-at response-posted-at' href='#580b5f888a8c0463da000102'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Just a word of caution: the algos in this thread so far all use a fixed value for the WVF trigger. That might potentially be dangerous in the future. I don&#39;t use a fixed trigger in my VXX/XIV algo but I use a variable trigger that&#39;s an EMA of the WVF.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580b9135a3ae93e971000337' id='580b9135a3ae93e971000337'>
<a href='#580b9135a3ae93e971000337'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5674b7bd1869e73f4a000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e411d64f7a123f5c2102614fafa48b58?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5674b7bd1869e73f4a000334'>Luke Izlar</a>
</div>
<a UTCms='1477153083000' class='quanto-date posted-at response-posted-at' href='#580b9135a3ae93e971000337'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Kory, that&#39;s a great idea. If you don&#39;t mind, could you share a code-snippet showing how you get the EMA of the WVF? If I tried I think could get a value but it wouldn&#39;t be a true historical EMA, only an EMA of the WVF as far as it shows up in my algo using .append(WVF). This wouldn&#39;t work well for live trading until after some time had passed  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='580e1717c154a41cdf000021' id='580e1717c154a41cdf000021'>
<a href='#580e1717c154a41cdf000021'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1477318433000' class='quanto-date posted-at response-posted-at' href='#580e1717c154a41cdf000021'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is the correction of the depretiation warning line #135<br>
:135: FutureWarning: pd.rolling_max is deprecated for Series
and will be removed in a future version, replace with<br>
Series.rolling(window=28,center=False).max()  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58131eb2892f7066a70004f3' id='58131eb2892f7066a70004f3'>
<a href='#58131eb2892f7066a70004f3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1477648057000' class='quanto-date posted-at response-posted-at' href='#58131eb2892f7066a70004f3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I would like to say it seems no body has done a back testing which covers the time period 2008 where there was big crash bcz. Lehmann. If you do a back testing covers this period, you will find the return is quite different.</p>

<p>Some of the ETFs used in this algo have no data before 2011. This could be the reason why no back testing did which covers the year of 2008.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813294e892f70054d00002e' id='5813294e892f70054d00002e'>
<a href='#5813294e892f70054d00002e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1477650775000' class='quanto-date posted-at response-posted-at' href='#5813294e892f70054d00002e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>very insightful Mr Chang  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813580611a804ee43000917' id='5813580611a804ee43000917'>
<a href='#5813580611a804ee43000917'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1477662735000' class='quanto-date posted-at response-posted-at' href='#5813580611a804ee43000917'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Given &quot;Some of the ETFs used in this algo have no data before 2011&quot;,  therefore, &quot;no body was able to do a back testing which covers the time period 2008&quot;.<br>
This is already True statement. What are you saying ? ......  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813964e76a8d0733c000d2b' id='5813964e76a8d0733c000d2b'>
<a href='#5813964e76a8d0733c000d2b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/559fd6a780d3076e93000475'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c6f67cc88a13c1d5a1649c71891c67c9?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/559fd6a780d3076e93000475'>K.C. Budd</a>
</div>
<a UTCms='1477678681000' class='quanto-date posted-at response-posted-at' href='#5813964e76a8d0733c000d2b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Maybe - put another way - the concern is that the specifics of this strategy dictate that the backtesting and subsequent walk-forward analysis have only been done in the relatively known and predictable post-2011 market conditions.  That certainly is a concern I would have prior to launching a long-term based strategy - how would it have performed during a major market turndown when correlations change dramatically between the ETFs it uses?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813970811a80444f1000004' id='5813970811a80444f1000004'>
<a href='#5813970811a80444f1000004'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56bcb197dc0cb00aa50000bb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/32dbf9a030dd6ab80390b585b0ec0819?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56bcb197dc0cb00aa50000bb'>Eric Esquire</a>
</div>
<a UTCms='1477678869000' class='quanto-date posted-at response-posted-at' href='#5813970811a80444f1000004'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My thought? If you need absolute certainty, the stock market isn&#39;t a good place to play.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813ad6a9407cbeeae000086' id='5813ad6a9407cbeeae000086'>
<a href='#5813ad6a9407cbeeae000086'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57ed95361c021cf21e000011'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1fece04f6bc46ef63cbcb28bdfeea3e8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57ed95361c021cf21e000011'>nguy nat</a>
</div>
<a UTCms='1477684594000' class='quanto-date posted-at response-posted-at' href='#5813ad6a9407cbeeae000086'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My first objective was reduce the volatility  of  over all portfollio when i combined  these 2 strategies and it accomplished.<br>
Second objective, was optimized and get the backtest results so i can have a relative reference point of results so i can work with when moving forwad ( that was the stage that i publish the backtest).<br>
Third objective, given objective 1 and 2 met and return slightly above benchmark, can i add another strategy to reduce further beta, increase alpha and reduce volatility ( This is the current state that im in )<br>
Fourth objective, if 1,2,3 met, moving to asset allocation models selection and various optimization techniques (parameters, time reference point etc) for over all portfolio and all the strategies combined. </p>

<p>That is usually, my route  of designing  a new portfolio.</p>

<p>My questions to you is ? Why do you want to put your money at risk when you are clearly not putting enough time to understand how things work.<br>
&quot;This game is long, hard and scary.  Risk  + Uncertainty =  Probability (pulling your hairs off + lack of sleep )= 95%</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813b3797244c6cb450000b5' id='5813b3797244c6cb450000b5'>
<a href='#5813b3797244c6cb450000b5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1477686145000' class='quanto-date posted-at response-posted-at' href='#5813b3797244c6cb450000b5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Eric:</p>

<p>A absolute certainty can&#39;t you never get. Maybe the god could give you . :-)</p>

<p>But what&#39;s the sense you do back testing?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813b581d2311a744f0000f8' id='5813b581d2311a744f0000f8'>
<a href='#5813b581d2311a744f0000f8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1477686669000' class='quanto-date posted-at response-posted-at' href='#5813b581d2311a744f0000f8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Nguyen,</p>

<p>You wrote a lot here. Why not simply back test your algo in bear phase? For example include the year 2008 and 2009?</p>

<p>In 2008 there was a big crash bcz. Lehmann. After that, exactly to say since 2011 the market goes up continuously. It&#39;s a bull market. Why not back test your algo in a bear market?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813b6297244c6cb450000e2' id='5813b6297244c6cb450000e2'>
<a href='#5813b6297244c6cb450000e2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56bcb197dc0cb00aa50000bb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/32dbf9a030dd6ab80390b585b0ec0819?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56bcb197dc0cb00aa50000bb'>Eric Esquire</a>
</div>
<a UTCms='1477686833000' class='quanto-date posted-at response-posted-at' href='#5813b6297244c6cb450000e2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas</p>

<p>Everyone trades differently. Different strategies. Different time frames. I&#39;m a very (very) short term trader, so if it works this year, it&#39;s good enough for me to use. I don&#39;t hold any positions overnight.</p>

<p>I&#39;m aware that because of this my opinion in the matter is moot to most if not all of you guys in the forum because you trade much longer time frames. But since I was hanging around I just threw my hat into the ring.</p>

<p>Also, asking why no one backtests this prior to 2011 almost seems like a rhetorical question, as some of the components didn&#39;t exist before then. This too, is moot.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5813bd593fc0f49c60000146' id='5813bd593fc0f49c60000146'>
<a href='#5813bd593fc0f49c60000146'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57ed95361c021cf21e000011'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1fece04f6bc46ef63cbcb28bdfeea3e8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57ed95361c021cf21e000011'>nguy nat</a>
</div>
<a UTCms='1477688675000' class='quanto-date posted-at response-posted-at' href='#5813bd593fc0f49c60000146'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This is Peter&#39;s  thread so i dont want to post something which doesnt  add any value here. And this is will be my last post here. </p>

<p>For Mr, Chang.<br>
First, These are not mine algos, i saw some great things in Grant and Peter&#39; algo so i try to build a something out of it to see how much volatility it can reduce.<br>
Second.  I think your  logic does have serious problems. Lets me point it out for you.<br>
2 of your posts are have the same question ? and both your questions are  already answered by your self.<br>
You said &quot; Some of the ETFs used in this algo have no data before 2011&quot;.This is True statement  because &quot; XIV and TMF &quot; intercepted date is 2009 and 2011, and this is your Conclusion:  &quot;no body was able to do a back testing which covers the time period 2008&quot;.<br>
So  your declaring statemnt  is TRUE .&lt; =&gt;your conclusion is also TRUE.  ( You see Mr Chang, your opening statement and your conclusion can go both ways (backward and forward).<br>
Is it right Mr Cheng ?  Can you see it. ?<br>
Good luck  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58144e47d2311a310a000674' id='58144e47d2311a310a000674'>
<a href='#58144e47d2311a310a000674'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/580f263d3d01ae9b6d000609'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/31055b9c0774dbbad44ce75c4b3698c6?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/580f263d3d01ae9b6d000609'>Lawrence Yim</a>
</div>
<a UTCms='1477725773000' class='quanto-date posted-at response-posted-at' href='#58144e47d2311a310a000674'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Could someone explain to me the basis of the algo, i am new to quant and would like to understand what the parameters are and the rationale behind this algo.</p>

<p>Sorry for being a NOOB  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581beddff1a5ac2cf000060e' id='581beddff1a5ac2cf000060e'>
<a href='#581beddff1a5ac2cf000060e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1478225382000' class='quanto-date posted-at response-posted-at' href='#581beddff1a5ac2cf000060e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is my understanding of this strategy:<br>
Function Allocate - The strategy allocates between 5 stocks SSO (2x S&amp;P), TMF (3x 20-year treasury), IJR (small caps), IJH (mid cap) and XIV (inverse volatility) based on highest momentum for the last 6,630 minutes. Not sure why this number used?<br>
Function allocVol: Closes XIV position if WVF index (based on VXX) crosses below 14.  But does nothing if the WVF under 14.<br>
Function allocSPY: Opens SSO position if WVF spy uptrending and closes SSO position and opens EDV (long term treasuries) position if SPY in downtrend.</p>

<p>Also, if someone considers trading this strategy , i would consider replacing EDV with some Short S&amp;P ETF (e.g. SDS) and TMF with TLT (due to lower spread and higher liquidity). Because the algo over-allocates to the treasuries, and the reliance on treasuries as safe haven asset that might be wrong during the tightening economic cycle  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581bf068549d67385b00062a' id='581bf068549d67385b00062a'>
<a href='#581bf068549d67385b00062a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1478226030000' class='quanto-date posted-at response-posted-at' href='#581bf068549d67385b00062a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is the version that  uses Short S&amp;P ETF (e.g. SDS) instead of EDV and  TLT instead of TMF. It should be a safer bet in case of the bonds bear market  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581c05034609b6dc580006ed' id='581c05034609b6dc580006ed'>
<a href='#581c05034609b6dc580006ed'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57ed95361c021cf21e000011'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1fece04f6bc46ef63cbcb28bdfeea3e8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57ed95361c021cf21e000011'>nguy nat</a>
</div>
<a UTCms='1478231309000' class='quanto-date posted-at response-posted-at' href='#581c05034609b6dc580006ed'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Maxim,  that is a good idea. I can wait to play with this idea.  im working on my v3 of this algo and trying to put pieces together in C. It is quite interesting and it looks promising by showing  low draw-down with high Sharp. Here the idea for you to play, get 1 more strategy that playing stock market like Value investing or momentum that re-balance monthly, then allocate about 40%,  Keep the MV algo, which is driving the rest of allocation and also driving the whole portfolio when stock market in trouble.<br>
 if market in trouble, put all the allocation of the stock strategy to 1 of safe haven assets and lets the MV algo  allocate it weekly until the stock market is trade able again.<br>
My idea is having a diversify portfolio of strategies (between 2 and 4) with continuous allocation between assets. Safer and better returns.<br>
Have fun and good luck.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581c668c232c028444000013' id='581c668c232c028444000013'>
<a href='#581c668c232c028444000013'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1478256275000' class='quanto-date posted-at response-posted-at' href='#581c668c232c028444000013'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Very good improvement indeed, let me play with it further as well!</p>

<p>PB  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581c8c77d78216ef30000076' id='581c8c77d78216ef30000076'>
<a href='#581c8c77d78216ef30000076'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1478265985000' class='quanto-date posted-at response-posted-at' href='#581c8c77d78216ef30000076'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Maxim,</p>

<p>It&#39;s realy well done!</p>

<p>But a question: After I run the back testing I found in &quot;Transaction Details&quot; that it happens very often that an ETF is bought but several hours later (at the same day) it is sold again. Is this what you want?</p>

<p>Cheers  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581c95cc32ee9ebe9300009d' id='581c95cc32ee9ebe9300009d'>
<a href='#581c95cc32ee9ebe9300009d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1478268370000' class='quanto-date posted-at response-posted-at' href='#581c95cc32ee9ebe9300009d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you guys, I am really glad that I could make a little contribution to this thread.<br>
@Nguyen. Thank you for your suggestion on how to combine the strategies and use the MVP algo to drive the allocations between them. I will be investigating it<br>
@Thomas, you are right that the algo can open and close the positions in the same ETFs during the day.<br>
It happens, because there are 2 different processes (functions) used to place the orders for SPY (SSO and SDS) and XIV :<br>
1.  @ 10.30 AM  - allocate function (based on scipy.optimize.minimize function) allocates capital to SSO and XIV positions<br>
2.  @15.45 - allocVol function closes VIX position if it WVF crosses 14 (based on VXX)<br>
3.  @15.45 - allocSpy function opens/closes SSO or SDS based on WVF (based on SPY)<br>
In my view, this is a weakness because it leads to overtrading and confusing signals. The possible improvements are: combining the 2 signals (WVF and regression/optimization) or using only one of two signals for signal generation.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581cd0298069e8b2d800043f' id='581cd0298069e8b2d800043f'>
<a href='#581cd0298069e8b2d800043f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a791c64c718fba240006e3'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1c2a50c6980be139ef05f6398d706753?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a791c64c718fba240006e3'>Bryan L</a>
</div>
<a UTCms='1478283313000' class='quanto-date posted-at response-posted-at' href='#581cd0298069e8b2d800043f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Would this algo still be valid if i were to set long_only as my trading settings?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581d0562861a8a42bf0000a4' id='581d0562861a8a42bf0000a4'>
<a href='#581d0562861a8a42bf0000a4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55f9ea41c51f6fe282000166'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/09d3ca2aba7e225443d1f3eab69d67ae?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55f9ea41c51f6fe282000166'>Maxim Girbu</a>
</div>
<a UTCms='1478296941000' class='quanto-date posted-at response-posted-at' href='#581d0562861a8a42bf0000a4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Seungmin.    Should work for long only, it doesn&#39;t short anything but using  Short ETF instead.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='581f3fc036c7050015000143' id='581f3fc036c7050015000143'>
<a href='#581f3fc036c7050015000143'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56ae5cbbbbbc731b780000b8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0eccafa1826a9cefa1476f2074ff3300?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56ae5cbbbbbc731b780000b8'>Michele Vianello</a>
</div>
<a UTCms='1478442950000' class='quanto-date posted-at response-posted-at' href='#581f3fc036c7050015000143'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My contribution:<br>
Change the TMF to the TLT only and get even better!!!</p>

<p>Returns<br>
494.2%<br>
Alpha<br>
0.28<br>
Beta<br>
0.31<br>
Sharpe<br>
2.00<br>
Drawdown<br>
-10.8%  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='582038aa919dfd0012000205' id='582038aa919dfd0012000205'>
<a href='#582038aa919dfd0012000205'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1478506674000' class='quanto-date posted-at response-posted-at' href='#582038aa919dfd0012000205'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Michele: Your contribution to Peter&#39;s original code or to Maxim&#39;s? I found both of them haven&#39;t used TMF but TLT. Or maybe you want to write &quot;change the TLT to TMF&quot;? :-)</p>

<p>Cheers  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58207d5a52795c0015000029' id='58207d5a52795c0015000029'>
<a href='#58207d5a52795c0015000029'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56ae5cbbbbbc731b780000b8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/0eccafa1826a9cefa1476f2074ff3300?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56ae5cbbbbbc731b780000b8'>Michele Vianello</a>
</div>
<a UTCms='1478524256000' class='quanto-date posted-at response-posted-at' href='#58207d5a52795c0015000029'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I may apologize for my poor english..<br>
I mean, instead to change both etf EDV and TMF, change TMF with TLT only in the last Maxim&#39;s algo and you get sharpe=2.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5820951bd044ac001200009a' id='5820951bd044ac001200009a'>
<a href='#5820951bd044ac001200009a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1478530348000' class='quanto-date posted-at response-posted-at' href='#5820951bd044ac001200009a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The issue still remains that there is a fixed value for the WVF trigger - using the best # historically from 2011 forward.  Seems like overfitting as this number can change walking forward.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5823e4d6e9ef3e001300056e' id='5823e4d6e9ef3e001300056e'>
<a href='#5823e4d6e9ef3e001300056e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1478747356000' class='quanto-date posted-at response-posted-at' href='#5823e4d6e9ef3e001300056e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I could change, but remember volatility is not a stock price or so, if the volatility structure changes permanently, othe very base assumptions in the amrket must have changed as well. There could be periods where we have elevated or depressed volatility, but a high vix/wvf value to revert  from is pretty safe in my mind. I haven&#39;t found a adaptive measure that improves the algo.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='583109738e69b100120006c8' id='583109738e69b100120006c8'>
<a href='#583109738e69b100120006c8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57d8e59777a302dae50009b4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7f0b038bd2696dbb603b95035c697d9e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57d8e59777a302dae50009b4'>Takis Mercouris</a>
</div>
<a UTCms='1479608698000' class='quanto-date posted-at response-posted-at' href='#583109738e69b100120006c8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>First thanks to Peter &amp; Nguyen and everyone else for sharing your ideas.  I loved the performance &amp; have spent some time experimenting. Here&#39;s my experimentation observations:</p>

<ul>
<li>In a similar to 2008 scenario, the algo will probably lose money, you just have to stay alert. I tried to simulate this by trading a portfolio that didn&#39;t include XIV, and had TLT instead of TMF (poor man&#39;s simulation) and that portfolio was losing big in 2008. Nevertheless, I think omitting XIV for that period would not materially impact the simulation validity.  Next, I built a bullish market filter that only invested when SPY was above of either 100 or 200 day SMA. It protected against the 2008 market but it was impacting the total performance. Even when I was running the full (with XIV &amp; TMF ETFs) version past 2011, the overall performance was being impacted and the 2016 YTD perf was terrible. So, I decided against it &amp; removed the SPY bullish filter.<br></li>
<li>The allocSPY function in some algo versions uses EDV and some versions uses SDS. In my experimentations it appeared that using EDV in momentum markets performs better and using SH in sideways markets performs better. Currently, I am using a linear regression filter to decide when the market is in momentum or is choppy. Momentum means that the R square of a linear regression of 126 days of SPY is above 70%. 70% is a result of instinct and very limited experimentation.<br></li>
<li>I chose SH instead of SDS for the allocSPY because it appears that the algo is in SDS for long periods &amp; SDS has terrible decay.  It appears that it is less offen in SSO, so I didn&#39;t spend any  time with that.<br></li>
<li>I am allocating only 20% to the allocSPY scheme leaving 10% in cash. In backtesting, the code seems to be going into leverage above 1.0 resulting from partial executions. It would perform better with the original 30% allocation, but as a first step I want to make sure I don&#39;t go into margin and this seemed the easiest way programmatically to do it. I also moved the spyAlloc 15 minutes earlier to have more time for execution.<br></li>
<li>I added a filter for the daily allocSPY rebalance to only execute trades when they exceed a threshold. In the included test, it is set to $500. This removes a lot of small 1s and 2 shares rebalance transactions for a small capital test.</li>
</ul>

<p>I would be very interested if anyone has any analysis on how events like Brexit, US elections, FED meetings impact the performance of the algo.</p>

<p>Cheers  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5879437e3cc57b6b08dca93a' id='5879437e3cc57b6b08dca93a'>
<a href='#5879437e3cc57b6b08dca93a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484342142000' class='quanto-date posted-at response-posted-at' href='#5879437e3cc57b6b08dca93a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Anybody trading this live? I added it to Robinhood, and seems something is wrong, yesterday it sent an order for TLT only and not TMF and XIV.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587caa4e6c9a68000ae93ea5' id='587caa4e6c9a68000ae93ea5'>
<a href='#587caa4e6c9a68000ae93ea5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1484565070000' class='quanto-date posted-at response-posted-at' href='#587caa4e6c9a68000ae93ea5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m trading a variant of this live in IB. As there are so many versions here, which version did you put live?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587cac3cfc639d66dda99dd4' id='587cac3cfc639d66dda99dd4'>
<a href='#587cac3cfc639d66dda99dd4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484565564000' class='quanto-date posted-at response-posted-at' href='#587cac3cfc639d66dda99dd4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Using Maxims Version, actually I think it is behaving fine, it matched the order, I just thought it was going to sync the current positions, but it just waits for the orders to add up. Also, for 2008 if there isn&#39;t a bond market collapse/stock collapse at the same exact time, wouldn&#39;t this perform well as it would jump into Bonds?</p>

<p>@Takis<br>
Did you try lowering the MA period say 20, 50?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587d7fd94fc48b000dae2120' id='587d7fd94fc48b000dae2120'>
<a href='#587d7fd94fc48b000dae2120'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5816b099a5472bb50a000507'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d688d28f59f1f0c4f6993863d8c8787b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5816b099a5472bb50a000507'>Mark Varney</a>
</div>
<a UTCms='1484619737000' class='quanto-date posted-at response-posted-at' href='#587d7fd94fc48b000dae2120'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am also using Maxim&#39;s latest version in live trading.Since 7th November, it has made 11.39%, so I am very happy.Most of the profit has come from XIV positions, which I assume was the original intention.Sharpe ratio of 5.27 and Max Drawdown of 2%  is impressive.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587d88efde5629000d893813' id='587d88efde5629000d893813'>
<a href='#587d88efde5629000d893813'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484622063000' class='quanto-date posted-at response-posted-at' href='#587d88efde5629000d893813'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Anybody else try to rework this to test past 2008? I guess even 40% DD wouldn&#39;t be bad with like 50%CAGR and the low DD during normal market conditions.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587dc7fbdfa184000d9e179f' id='587dc7fbdfa184000d9e179f'>
<a href='#587dc7fbdfa184000d9e179f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1484638203000' class='quanto-date posted-at response-posted-at' href='#587dc7fbdfa184000d9e179f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Elsid,</p>

<p>See the post above. I&#39;ve asked the similar question before. But it seems my question was taken as &quot;stupid&quot;. :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587dc849de5629000d893b7f' id='587dc849de5629000d893b7f'>
<a href='#587dc849de5629000d893b7f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1484638281000' class='quanto-date posted-at response-posted-at' href='#587dc849de5629000d893b7f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Elsid,</p>

<p>Is there any argument to support your &quot;guess&quot;? :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587dca77d24bf6000d176a3e' id='587dca77d24bf6000d176a3e'>
<a href='#587dca77d24bf6000d176a3e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484638839000' class='quanto-date posted-at response-posted-at' href='#587dca77d24bf6000d176a3e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hey Thomas, I mean I completely messed around with all the symbols turning them into SPY and TLT as a &quot;short&quot; so probably messed something up, given that TLT isn&#39;t a short anyway but thought would perform well given that bonds rallied, and TLT was the best performing ETF at the time, but with doing that the drawdowns were about 40% or so, just as much as the market. </p>

<p>Given that in good years like recently the DD has not been more than like 15%, I guess you can kind of gauge an 08&#39; type scenario by stopping the Algo at a 20-25% DD, then you know something might be up. Given that it has amazing DD the last 7 years including, all the craziness of Flash Crashes, BREXITs, ect.it seems pretty robust, and might of possibly held up in 08&#39; </p>

<p>But somebody needs to rework the Algo even just as a backtest algo, maybe just use funds like TLT SPY and instead of long XIV go short SPY, just to see how it would of held up in 08&#39;  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e3214e5db7e000d0b5d8e' id='587e3214e5db7e000d0b5d8e'>
<a href='#587e3214e5db7e000d0b5d8e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1484665364000' class='quanto-date posted-at response-posted-at' href='#587e3214e5db7e000d0b5d8e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>&quot;I guess you can kind of gauge an 08&#39; type scenario by stopping the Algo at a 20-25% DD, then you know something might be up.&quot;. Yes, this is 1 way to do it, i would take it offline when it reach 15 % DD, which is my tolerance level.
I have been running my the first version i posted but re-balance every 2 weeks =&gt; performance is outstanding. (since October)<br>
Since Nov i put 2 of variations that included value growth stocks algo in my IRAs =&gt; Never happier with the performance.<br>
In fact all my fund is running this algo with different risk parameters ( different allocations).</p>

<p>Good luck.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e371cd24bf679d6176332' id='587e371cd24bf679d6176332'>
<a href='#587e371cd24bf679d6176332'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1484666652000' class='quanto-date posted-at response-posted-at' href='#587e371cd24bf679d6176332'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Mark Varney, i agreed it is doing quite well, my return is little bit more for that version. Just sit back, enjoy the ride and wait until some not normal event then react.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e49e0e5db7e05ef0b51eb' id='587e49e0e5db7e05ef0b51eb'>
<a href='#587e49e0e5db7e05ef0b51eb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1484671456000' class='quanto-date posted-at response-posted-at' href='#587e49e0e5db7e05ef0b51eb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>For those that are trading this live, watch you leverage.  In running a PvR routine there is unforeseen leverage in the backtest.  IE, where there are sells and buys on the same day you may encounter leverage.</p>

<p>We need to build in a check to see if there is available cash to purchase - otherwise the algo, as of today - will issue a buy as soon as the sell is issued and puts the account in margin.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e4bde4fc48b6327ae20e3' id='587e4bde4fc48b6327ae20e3'>
<a href='#587e4bde4fc48b6327ae20e3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484671966000' class='quanto-date posted-at response-posted-at' href='#587e4bde4fc48b6327ae20e3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Nhat </p>

<p>Where is the code for rebalancing? Also, have you noticed a performance gain from the original with the 2 week rebalancing? Also, about how long does it take for all the positions to catch up and match the Algo, given that it doesn&#39;t sync current positions.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e52676133b96bd45655c9' id='587e52676133b96bd45655c9'>
<a href='#587e52676133b96bd45655c9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1484673639000' class='quanto-date posted-at response-posted-at' href='#587e52676133b96bd45655c9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>1/ &quot;Where is the code for rebalancing? &quot; i do not have in this platform. i use different trading platform and it is in C. but you can add it in yourself with an <strong><em>if statement or someone in the forum will help you</em></strong><br>
2/ &quot; Also, have you noticed a performance gain from the original with the 2 week rebalancing? &quot;. slightly better for this period ( i do not have backtest and stats to conclude that it will perform better in long run).<br>
2 weeks  because XIV  keep up trend so i get in XIV cheaper and hold longer =&gt; slightly better results.<br>
3/ about how long does it take for all the positions to catch up and match the Algo, given that it doesn&#39;t sync current positions. &lt;= do not understand the question.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e8477e5db7e66440b51d7' id='587e8477e5db7e66440b51d7'>
<a href='#587e8477e5db7e66440b51d7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1484686455000' class='quanto-date posted-at response-posted-at' href='#587e8477e5db7e66440b51d7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Any ideas on how to ensure the sells happen before the buys?  I ran a backtest from Nov 7th and so far the cash hasn&#39;t run out for most, but trust me you will encounter negative cash during a rebalance.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e858bab3c446abbb237eb' id='587e858bab3c446abbb237eb'>
<a href='#587e858bab3c446abbb237eb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484686731000' class='quanto-date posted-at response-posted-at' href='#587e858bab3c446abbb237eb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>How long does the negative cash balance last? Permanently, or until everything gets rebalanced?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e88cede562909a7893a1e' id='587e88cede562909a7893a1e'>
<a href='#587e88cede562909a7893a1e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58715175d739e95500ac4fca'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/26d0d584d35e41049fa95cdeb51a6c2b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58715175d739e95500ac4fca'>Stephen Kearney</a>
</div>
<a UTCms='1484687566000' class='quanto-date posted-at response-posted-at' href='#587e88cede562909a7893a1e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In the versions with both Allocate and allocSPY functions I notice that it buys SSO in the morning (Allocate function) and closes the position in the afternoon (allocSPY function).  Is that by design?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587e89ee6133b918bf565819' id='587e89ee6133b918bf565819'>
<a href='#587e89ee6133b918bf565819'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1484687854000' class='quanto-date posted-at response-posted-at' href='#587e89ee6133b918bf565819'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Cash low hits the day of the rebalance and slowly claws back throughout the day while the other positions sell  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587eeda10c5755000dad606b' id='587eeda10c5755000dad606b'>
<a href='#587eeda10c5755000dad606b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484713377000' class='quanto-date posted-at response-posted-at' href='#587eeda10c5755000dad606b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I guess that would be an issue with RobinHood if you aren&#39;t subscribed to Robinhood Gold and have Margin, even then i don&#39;t know how big of an account i would hold with Robinhood given their financial stability, I guess safest bet is trade on IB.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587f92146218db000d24763f' id='587f92146218db000d24763f'>
<a href='#587f92146218db000d24763f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1484755476000' class='quanto-date posted-at response-posted-at' href='#587f92146218db000d24763f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>hopefully you have above $25,000 in margin.  The cash low grows when the algo makes more money as more shares are being rebalanced.</p>

<p>I think a permanent fix would be to ensure the sells happen before the buys, which I also believe will significantly reduce the gains the last 3 algos generate.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='587fc0ce616a0b000a3b0708' id='587fc0ce616a0b000a3b0708'>
<a href='#587fc0ce616a0b000a3b0708'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484767438000' class='quanto-date posted-at response-posted-at' href='#587fc0ce616a0b000a3b0708'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yeah I just had Robinhood reject my XIV order. So how much margin do you need just $25,000? Or pretty much double the account? Which pretty much every broker gives you, so you shouldn&#39;t really run into problems. During the backtests I only see it go above 1 every so often and only like 1.01 1.03 ect.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58801b872a7c27000a4caefa' id='58801b872a7c27000a4caefa'>
<a href='#58801b872a7c27000a4caefa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1484790663000' class='quanto-date posted-at response-posted-at' href='#58801b872a7c27000a4caefa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I found that the record leverage takes the average of the day or the leverage at the close of the day and ultimately week.</p>

<p>The PvR routine captures the cash low/max leverage as of the minute.  It does not specifically double the account I just saw at one point the cash low was -$25,000 and I stopped the backtest.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58802dd3d09887000d22f788' id='58802dd3d09887000d22f788'>
<a href='#58802dd3d09887000d22f788'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484795347000' class='quanto-date posted-at response-posted-at' href='#58802dd3d09887000d22f788'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tyler, yeah that shouldn&#39;t be an issue at least for myself, also what was the account size when you saw that leverage number?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5882fb05fdaa41000dfcf254' id='5882fb05fdaa41000dfcf254'>
<a href='#5882fb05fdaa41000dfcf254'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1484978949000' class='quanto-date posted-at response-posted-at' href='#5882fb05fdaa41000dfcf254'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Actually thinking further about this, the strategy would of probably performed well in 08 also, maybe a bit larger drawdowns, I think Takis&#39;s poor mans backtest for 08 is flawed, because the function allocVOL uses VXX/ZIV to calculate WVF, unless he fed it custom data there is no way to get this data prior to the funds inception dates.</p>

<p>But given the significant events we have had since 08+, with flash crashes, brexit, euro crises, and given it takes a high exposure to bonds i can see it performing well in 08&#39; also, i guess the only time you would have significant losses would be if both VIX Spike and bonds crash also. Also, in 2011 VIX spiked to about 50% and this only had a DD of about 13%, so in 08&#39; when you spiked to around 80-90, if you double DD, which probably wouldn&#39;t happen you would still be looking at 28% or so which is still great for about 50% Annual returns. </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5884642dd652fd000d646284' id='5884642dd652fd000d646284'>
<a href='#5884642dd652fd000d646284'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1485071405000' class='quanto-date posted-at response-posted-at' href='#5884642dd652fd000d646284'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The algo above is some good code, just that the leverage goes to 1.43 so returns are lower than they appear.<br>
Try <a href="https://www.quantopian.com/posts/max-intraday-leverage">https://www.quantopian.com/posts/max-intraday-leverage</a> to keep an eye on that, it will give you a better chance of doing the best possible.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58858b14ed52a7000a73f795' id='58858b14ed52a7000a73f795'>
<a href='#58858b14ed52a7000a73f795'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1485146900000' class='quanto-date posted-at response-posted-at' href='#58858b14ed52a7000a73f795'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I looked into the leverage and the overtrading and in the version of Takis Mercouris  Nov 20, 2016 I still see a lot of overtrading: SSO gets opened and closed on the same day which can be interpreted as sponsoring Interactive Brokers or other trading partners. The p[erformance will increase if one published that version without the double trading: probably the signal or trade generation should be handled in one function so conflicting signals can be weeded out.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5885f29dc2175b2325f8de96' id='5885f29dc2175b2325f8de96'>
<a href='#5885f29dc2175b2325f8de96'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5472f263633e459635000013'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c59ed2eb64dd560ab4d598497bce4a40?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5472f263633e459635000013'>Douglas Goullet</a>
</div>
<a UTCms='1485173405000' class='quanto-date posted-at response-posted-at' href='#5885f29dc2175b2325f8de96'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thank you all for sharing and adding to what looks like  solid system system. Is there any explanation of the system anywhere?<br>
Regards,<br>
Douglas  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58862018f74602602b4f131b' id='58862018f74602602b4f131b'>
<a href='#58862018f74602602b4f131b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485185048000' class='quanto-date posted-at response-posted-at' href='#58862018f74602602b4f131b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is the backtest with PvR Routine: max leverage 1.54 cash low reaches - $37,577</p>

<p>This is the algo from Nov 3rd 2016  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58862c9a661bfc34e7f681fa' id='58862c9a661bfc34e7f681fa'>
<a href='#58862c9a661bfc34e7f681fa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485188250000' class='quanto-date posted-at response-posted-at' href='#58862c9a661bfc34e7f681fa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>After digging in a little further, it looks like it only due to the allocation code - Is there a way to ensure the sales in the allocation are performed before the buys?  Looks like all the purchases happen before XIV is sold.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5888602acb8f690eab51c874' id='5888602acb8f690eab51c874'>
<a href='#5888602acb8f690eab51c874'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485332522000' class='quanto-date posted-at response-posted-at' href='#5888602acb8f690eab51c874'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yeah I think the allocation code needs to be reworked a bit, especially for brokers that charge commissions, for example all the 1 share orders, would also be great to use with Robinhood without running into Margin issues.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5888c64642ed6476ec894626' id='5888c64642ed6476ec894626'>
<a href='#5888c64642ed6476ec894626'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/587fd510cf651d000a1f9009'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ee4ba91afbc4b6fd0481f482c4dc6087?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/587fd510cf651d000a1f9009'>Doug Weinheimer</a>
</div>
<a UTCms='1485358662000' class='quanto-date posted-at response-posted-at' href='#5888c64642ed6476ec894626'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I added an EMA (seeded with original 14 value) for the WFV limit. Source of this one is from Takis Mercouris Nov,19. </p>

<p>Question for those running versions of this in Robinhood: How are you avoiding free-riding on unsettled cash? From what I read in the docs it doesn&#39;t look like Robinhood&#39;s margin (Gold) accounts are fully supported. </p>

<p>Disclaimer: I&#39;ve never written anything in python and this is also my first exposure  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5888fce30564df20e131e4e2' id='5888fce30564df20e131e4e2'>
<a href='#5888fce30564df20e131e4e2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485372643000' class='quanto-date posted-at response-posted-at' href='#5888fce30564df20e131e4e2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Doug</p>

<p>Just messed around with your algo a bit, the past ones perform much better and slightly lower DD, don&#39;t know if it&#39;s the EMA or the slight leverage. Anyway I think the focus for this Algo should be to somehow get synthetic data loaded to backtest it past 08 and even farther if possible, and fix some of the order logic.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58890345b2bb0f59b2245b52' id='58890345b2bb0f59b2245b52'>
<a href='#58890345b2bb0f59b2245b52'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485374277000' class='quanto-date posted-at response-posted-at' href='#58890345b2bb0f59b2245b52'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Quick question, given that I&#39;m new here if i change the code and re-deploy the algo with current open positions I&#39;m assuming the algo will be able to pick them up and rebalance correct?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58891995751a11000d107676' id='58891995751a11000d107676'>
<a href='#58891995751a11000d107676'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57a8c2864859fac3670000ea'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b6a5141a04193929f234f19212b52f6f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57a8c2864859fac3670000ea'>John Galt</a>
</div>
<a UTCms='1485379989000' class='quanto-date posted-at response-posted-at' href='#58891995751a11000d107676'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Elsid -- I&#39;m live trading a version of this algo at IB, and sometimes I&#39;ll stop/start the algo when I add more funds. Otherwise the metrics on the website are off, FWIW.</p>

<p>It seemed to have no problem rebalancing with the new account value. I have only done this once, but it worked as expected.</p>

<p>Did anyone come up with a solution to eliminate those pesky 1 share orders? The algo also sometimes tries to order more than the available cash balance. I&#39;ve been manually handling it for now.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58891ea2a6422a7d5d8754c4' id='58891ea2a6422a7d5d8754c4'>
<a href='#58891ea2a6422a7d5d8754c4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485381282000' class='quanto-date posted-at response-posted-at' href='#58891ea2a6422a7d5d8754c4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@John </p>

<p>Hey John, do you use a 2nd IB login to login into your account and check up on it?</p>

<p>That&#39;s good to know, also when it goes into leverage is it permanent or temporarily while it&#39;s rebalancing? </p>

<p>Yeah those 1 share orders eat up like $2 in commissions, have to check IB commissions and see the options again I remember there was a per share rate too without that $1 minimum in commissions.</p>

<p>Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5889213fd0aa56000d3aa83b' id='5889213fd0aa56000d3aa83b'>
<a href='#5889213fd0aa56000d3aa83b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57a8c2864859fac3670000ea'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b6a5141a04193929f234f19212b52f6f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57a8c2864859fac3670000ea'>John Galt</a>
</div>
<a UTCms='1485381951000' class='quanto-date posted-at response-posted-at' href='#5889213fd0aa56000d3aa83b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Elsid -- yup, I have a login specifically for the algo and another for manual use.</p>

<p>Since my account is an IRA - no real margin - the algo can&#39;t go beyond leverage of 1. IB will reject the order.</p>

<p>I just looked at my account statement, and those 1 share trades ate up about $15 in commissions over the course of a month.</p>

<p>I don&#39;t remember exactly, but I thought there was $1 per trade minimum, regardless of number of shares traded.</p>

<p>In another algo I run, I have it filter trades based on either trade size (in dollars) or as a per cent of the overall account, e.g., don&#39;t execute the trade if the trade size &lt; $X or less than X% of the account size. I haven&#39;t put that code in this algo yet. Probably should.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='588c0d8fc46c37000a2c517a' id='588c0d8fc46c37000a2c517a'>
<a href='#588c0d8fc46c37000a2c517a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485573519000' class='quanto-date posted-at response-posted-at' href='#588c0d8fc46c37000a2c517a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think there were 2 options dollar minimum or per share without dollar minimum but you would end up paying higher commissions per smaller orders, I have to double check.</p>

<p>Also please post the order size code when you get a chance, or I guess If we fix the order logic can trade on Robinhood and not worry about commissions I just don&#39;t trust Robinhood from a financial standpoint they can go bust, assuming you trust SPIC but I remember reading that technically there was some wording that would make pretty much everyone not able to get anything from the SPIC the way it&#39;s worded. </p>

<p>So I&#39;d rather put somewhat more trust in IB given the strict enforcement of margins and risk they take.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='588fb3dbe7b18c000d99ef27' id='588fb3dbe7b18c000d99ef27'>
<a href='#588fb3dbe7b18c000d99ef27'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5841af213c428400120004f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/323c3a3502407038cb460446e9ce7264?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5841af213c428400120004f8'>Caleb Sandfort</a>
</div>
<a UTCms='1485812699000' class='quanto-date posted-at response-posted-at' href='#588fb3dbe7b18c000d99ef27'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;ve been tinkering with this algo for the past week and have tried to fix some of the issues I encountered along the way. I am relatively new to Python and quantitative/algorithmic trading so please be easy on me:)</p>

<p>Here&#39;s the main issues I found:<br>
 1. Two of the allocation methods operate on the same symbol (SSO) and can step on each other. For example &quot;allocate&quot; could give SSO 50% of the portfolio only to have that adjusted to 30% later in the day by &quot;allocSpy&quot; causing leverage issues or resulting in the portfolio not being fully invested.<br>
2. &quot;allocSpy&quot; rebalances every day, often in 1 or 2 share orders, while &quot;allocate&quot; rebalances once a week. This can cause the leverage to get out of wack since &quot;allocSpy&quot; uses a hardcoded value instead of the actual amount of the portfolio it represents. Also generates a lot of extra orders<br>
3. Majority of end of day over leverage issues were caused by using EDV which would consistently not fill orders.</p>

<p>Changes I made:<br>
1. Have &quot;allocate&quot; work with 100% of the portfolio<br>
2. &quot;allocSpy&quot; only triggers orders if bullish/bearish spy positions sized by &quot;allocate&quot; should be swapped. Simply swaps the sizes of the positions.<br>
3. &quot;allocSpy&quot; and &quot;allocVol&quot; don&#39;t execute on weekly rebalance day.<br>
4. Upped to all 3x leveraged etfs except for the small-cap since I couldn&#39;t find one that consistently filled. Going with the higher leveraged ETFs didn&#39;t really change the risk metrics much versus non-leveraged etfs.</p>

<p>The overall result has fairly similar or better sharpe/sortino ratios compared to the previous algorithms.  The volatility is higher, as is the max dd, but not astronomically so.  The one glaring difference is that beta is near one, which is much higher than the previous algos. Also cuts down on total trades by about 700 over the six year backtest period.  There are four partial fills that cause end of day leverage to go above one, but those are corrected for by the next weekly rebalance at the latest.</p>

<p>@John I&#39;m thinking of opening a Roth IRA with IB and running this algo on a portion of it and was hoping you could answer a few questions since it sounds like you&#39;re doing something similar:<br>
1. Are there any restrictions on buying leveraged etfs such as TMF or UPRO?<br>
2. Are wash sales not an issue due to the tax-free nature of an IRA?<br>
3. Is main benefit of a margin account you get the ability to use sales proceeds immediately?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='588fb90558dfcd083e44f164' id='588fb90558dfcd083e44f164'>
<a href='#588fb90558dfcd083e44f164'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57a8c2864859fac3670000ea'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b6a5141a04193929f234f19212b52f6f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57a8c2864859fac3670000ea'>John Galt</a>
</div>
<a UTCms='1485814021000' class='quanto-date posted-at response-posted-at' href='#588fb90558dfcd083e44f164'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Caleb --</p>

<p>To answer your questions --</p>

<ol>
<li>Are there any restrictions on buying leveraged etfs such as TMF or UPRO? </li>
</ol>

<p>None that I know of. I trade UVXY, SSO, SDS, etc without complaint. IB will send you a notice letting you know you are trading a leveraged vehicle. </p>

<ol>
<li>Are wash sales not an issue due to the tax-free nature of an IRA?</li>
</ol>

<p>Not a tax expert, but as I understand it, wash sales only pertain  to your taxable account. IRAs get involved if you trade &quot;substantially the same&quot; security in <em>both</em> taxable and non-taxable accounts. Then, if you buy a security in the IRA that you sold in the taxable account,  the wash sales rule applies to your taxable account. One way to avoid it is to not trade the same security in both accounts.</p>

<ol>
<li>Is main benefit of a margin account you get the ability to use sales proceeds immediately?</li>
</ol>

<p>Yes. With a limited-margin IRA, you avoid the &quot;free-riding&quot; restriction in non-margin IRAs. Otherwise, you have to wait the 3 day settlement period. ou still can&#39;t exceed a leverage of 1 though.</p>

<p>We&#39;ll have to look further into why your modded algo now has a beta of 1. Draw down at 25% is a bit rough for me as well. In roughly the same time period, the version I&#39;m running has a beta of close to 0, draw down of 10%, but far less return than your version. More like 380% vs your 2800%.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='588fc6b3e2d8823e36661d57' id='588fc6b3e2d8823e36661d57'>
<a href='#588fc6b3e2d8823e36661d57'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5841af213c428400120004f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/323c3a3502407038cb460446e9ce7264?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5841af213c428400120004f8'>Caleb Sandfort</a>
</div>
<a UTCms='1485817523000' class='quanto-date posted-at response-posted-at' href='#588fc6b3e2d8823e36661d57'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi John</p>

<p>Thank you very much for the info.</p>

<p>Regarding the beta issue, my thought is some of it has to do with the previous versions stepping on their spy allocations and taking them from high down to .3. Since it spends a lot of time in whatever spy etf you use, this could be significant. Also using the 3x etfs could be a factor:)</p>

<p>Here&#39;s a version that doesn&#39;t use leveraged etfs and only uses 70% of the portfolio.  Returns and draw down more in line with your version and around .5 beta.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890077758dfcd000a44fd50' id='5890077758dfcd000a44fd50'>
<a href='#5890077758dfcd000a44fd50'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485834103000' class='quanto-date posted-at response-posted-at' href='#5890077758dfcd000a44fd50'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Guys just reworking some of the ETF&#39;s such as using TQQQ and removing 3X small cap (biggest contributor to DD) You get this:</p>

<p>4750% and around 15% DD</p>

<p>Someone needs to verify this code because results seem mind blowing with this DD</p>

<p>Enjoy : )  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589009fa69a67d5d6e8d8355' id='589009fa69a67d5d6e8d8355'>
<a href='#589009fa69a67d5d6e8d8355'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485834746000' class='quanto-date posted-at response-posted-at' href='#589009fa69a67d5d6e8d8355'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My only concern with this Algo for future proofing it seems that a tremendous amount of gains come from Treasuries, if we get into a bond bear market DD might sky rocket, and performance suffer tremendously, I have tried playing around with using inverse etfs instead of treasuries but it still doesn&#39;t compare. </p>

<p>It would be nice if someone did some research, or even messed around with the strategy to get it to comparable performance DD levels, with  just going inverse the underlying long securities. Even if it performs a 4th of the above at 1000%, it&#39;s still around 50% Annual returns with low DD.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589031a1e7b18c1d5299ea70' id='589031a1e7b18c1d5299ea70'>
<a href='#589031a1e7b18c1d5299ea70'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1485844897000' class='quanto-date posted-at response-posted-at' href='#589031a1e7b18c1d5299ea70'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi guys,</p>

<p>Returns above 4000%? I would like to say you are getting more and more crazy !!! :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890327649534a781c874683' id='5890327649534a781c874683'>
<a href='#5890327649534a781c874683'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485845110000' class='quanto-date posted-at response-posted-at' href='#5890327649534a781c874683'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas I guess Nasdaq outperformed S&amp;P hard lol, dem FANGS  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589032d3938f4c18cdc20f94' id='589032d3938f4c18cdc20f94'>
<a href='#589032d3938f4c18cdc20f94'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5633186887906b8cbe000239'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/91308193086df9ecd25e195b49e2c6ac?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5633186887906b8cbe000239'>Deleted User</a>
</div>
<a UTCms='1485845203000' class='quanto-date posted-at response-posted-at' href='#589032d3938f4c18cdc20f94'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi all,</p>

<p>I&#39;ve just finished to work on a previous version of this algo. My version is a little bit different from the original one:</p>

<ol>
<li>It trades TLT instead of EDV --&gt; the first one seems more liquid<br></li>
<li>It sells on Monday and it buys on Tuesday --&gt; in this way it avoids a leverage over 1.0<br></li>
<li>alloc_spy function has been split in 2 functions: a sell one and a buy one, which work one at the beginning of the trading day and the other at the end --&gt; in order to avoid a leverage over 1.0</li>
</ol>

<p>Let me know if something in my version is wrong.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58907e03e7b18c5b5899f0fe' id='58907e03e7b18c5b5899f0fe'>
<a href='#58907e03e7b18c5b5899f0fe'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1485864451000' class='quanto-date posted-at response-posted-at' href='#58907e03e7b18c5b5899f0fe'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Elsid, </p>

<p>What does S in FANGS mean? Till now I&#39;ve just heard FANG.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58907e8958dfcd7c1344f157' id='58907e8958dfcd7c1344f157'>
<a href='#58907e8958dfcd7c1344f157'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1485864585000' class='quanto-date posted-at response-posted-at' href='#58907e8958dfcd7c1344f157'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Besides, you said the QQQ outperfomances the S&amp;P. But in Trumps time maybe it could change? Maybe the traditional values will take over the party?</p>

<p>Thomas  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589094e1e2d8827ef1661a85' id='589094e1e2d8827ef1661a85'>
<a href='#589094e1e2d8827ef1661a85'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1485870305000' class='quanto-date posted-at response-posted-at' href='#589094e1e2d8827ef1661a85'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Gregorio,</p>

<p>Your codes look quite clean and well-formed.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58909c0858dfcd157244f20c' id='58909c0858dfcd157244f20c'>
<a href='#58909c0858dfcd157244f20c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5633186887906b8cbe000239'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/91308193086df9ecd25e195b49e2c6ac?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5633186887906b8cbe000239'>Deleted User</a>
</div>
<a UTCms='1485872136000' class='quanto-date posted-at response-posted-at' href='#58909c0858dfcd157244f20c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Thomas.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58909f2569a67d7f2d8d83a0' id='58909f2569a67d7f2d8d83a0'>
<a href='#58909f2569a67d7f2d8d83a0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5633186887906b8cbe000239'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/91308193086df9ecd25e195b49e2c6ac?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5633186887906b8cbe000239'>Deleted User</a>
</div>
<a UTCms='1485872933000' class='quanto-date posted-at response-posted-at' href='#58909f2569a67d7f2d8d83a0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here I have a new version of my previous algo.<br>
The main updates are the following:</p>

<ol>
<li>It uses different ETFs (the ones of the last algo of Elsid).<br></li>
<li>AllocSpy_buy now doesn&#39;t work: if I try to enable it, the leverage goes over 1.0. I still have to work on this.<br></li>
<li>Return is 100% higher than the previous, but the DD is double: from 13% to 26%.<br></li>
</ol>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890a6a1e7b18c33a399e939' id='5890a6a1e7b18c33a399e939'>
<a href='#5890a6a1e7b18c33a399e939'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485874849000' class='quanto-date posted-at response-posted-at' href='#5890a6a1e7b18c33a399e939'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Elsid your algo ends up having a leverage - although only for a day until the sell orders happen - of over 2.  I think if you get the leverage under control your returns will diminish.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890acc558dfcd397f44f1d2' id='5890acc558dfcd397f44f1d2'>
<a href='#5890acc558dfcd397f44f1d2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1485876421000' class='quanto-date posted-at response-posted-at' href='#5890acc558dfcd397f44f1d2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Wow, I&#39;m very impressed at how far this post has come along! The WVF indicator is quite a powerful tool for VIX ETN traders. I&#39;ve been working with Cesar Alvarez on a really cool long-only XIV algo that&#39;s based on the RSI; will post updates soon! Meanwhile, here is one of my other more &quot;conservative&quot; VIX ETN algos that only trades XIV, Junk Bonds and Treasuries. </p>

<p>I combined <a href="https://www.quantopian.com/posts/simple-high-yield-bond-momentum-strategy">this</a> simple junk bond momentum algo (50%) with a newer version of <a href="https://www.quantopian.com/posts/alternative-strategy-for-a-moderate-portfolio">this</a> XIV algo that uses the WVF (50%). However, for the algo below, the WVF uses exponential moving averages of itself as variable triggers to trade instead of just using 14 as a fixed value for the trigger. If you wish to make it more &quot;conservative,&quot; simply allocate less to the XIV portion. 25/75 is a pretty decent mix, too. My buddy Jacob and I actually submitted this algo for Contest 24, but only as a rough draft to feel out the Contest&#39;s requirements. Funnily enough, it&#39;s 2nd place on the un-hedged leaderboard right now. It was 1st place on the un-hedged leaderboard for all of December.</p>

<p>I highly recommend using variable triggers instead of fixed ones for the WVF as well as most indicators.</p>

<p>Author: Kory Hoang<br>
Developer: Jacob Lower</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890aeaec8d27a1d82dfae66' id='5890aeaec8d27a1d82dfae66'>
<a href='#5890aeaec8d27a1d82dfae66'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1485876910000' class='quanto-date posted-at response-posted-at' href='#5890aeaec8d27a1d82dfae66'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here&#39;s a tear sheet for the algo above.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890c7c778024c000d91a1af' id='5890c7c778024c000d91a1af'>
<a href='#5890c7c778024c000d91a1af'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5841af213c428400120004f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/323c3a3502407038cb460446e9ce7264?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5841af213c428400120004f8'>Caleb Sandfort</a>
</div>
<a UTCms='1485883335000' class='quanto-date posted-at response-posted-at' href='#5890c7c778024c000d91a1af'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@elsid, @thomas...Hate to rain on the parade but I think the QQQ results are due to dozens of TMF orders being partially filled.  Starting with a lower initial cash value that only generates 3 partial fills, the results are actually not as high as SPY. The risk ratios are better though, and beta and max dd is lower.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890cbe11711eb000a29ade5' id='5890cbe11711eb000a29ade5'>
<a href='#5890cbe11711eb000a29ade5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485884385000' class='quanto-date posted-at response-posted-at' href='#5890cbe11711eb000a29ade5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Caleb - I agree.  If you backtest each year by itself returns are not as good and drawdowns increase.</p>

<p>This leads me to believe partial fills.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890d3ff78024c000d91a2a4' id='5890d3ff78024c000d91a2a4'>
<a href='#5890d3ff78024c000d91a2a4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485886463000' class='quanto-date posted-at response-posted-at' href='#5890d3ff78024c000d91a2a4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yeah completely forgot about the partial fills, Just turn the slippage on to 0 which is more realistic given that there is hundreds of million and billion of dollars worth of volume, when I turn it to 0. </p>

<p>I get 3297%  -21.2DD<br>
only partial fill is some XIV shares on 12/03/13</p>

<p>Also, an interesting thing to think about, if it&#39;s possible to copy the logic of the partial fills on TMF, maybe lower it&#39;s allocation to get results more in line with the backtest?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890d91778024c24d891a12e' id='5890d91778024c24d891a12e'>
<a href='#5890d91778024c24d891a12e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485887767000' class='quanto-date posted-at response-posted-at' href='#5890d91778024c24d891a12e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Caleb, you could also try this:  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890dac891895e1808dab034' id='5890dac891895e1808dab034'>
<a href='#5890dac891895e1808dab034'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485888200000' class='quanto-date posted-at response-posted-at' href='#5890dac891895e1808dab034'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Guy it&#39;s the same problem partial fills uncomment this line set_slippage(slippage.FixedSlippage(spread=0)) and you will see more realistic results. Now like mentioned before i wish you could code up something to copy the random partial fills, would turn it into an amazing strategy lol, maybe try introducing random partial fills on TMF.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890dbd5ea18cb000df09249' id='5890dbd5ea18cb000df09249'>
<a href='#5890dbd5ea18cb000df09249'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485888469000' class='quanto-date posted-at response-posted-at' href='#5890dbd5ea18cb000df09249'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Caleb, just in case you wondered, there was no code change at all. Not a single character. </p>

<p>Only the capital was increased to $100k. That is a 58% CAGR!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890e00c78024c24d891a1a2' id='5890e00c78024c24d891a1a2'>
<a href='#5890e00c78024c24d891a1a2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485889548000' class='quanto-date posted-at response-posted-at' href='#5890e00c78024c24d891a1a2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>2x leverage happens on rebalance days then normalizes back to ~1 maybe a little over.  So you will need a margin account and pay some margin fees  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890e506ba7ba3000aad4f9b' id='5890e506ba7ba3000aad4f9b'>
<a href='#5890e506ba7ba3000aad4f9b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485890822000' class='quanto-date posted-at response-posted-at' href='#5890e506ba7ba3000aad4f9b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Elsid, the set_slippage is commented out, therefore, the strategy reverts to its default commissions and slippage values, if I understand Q correctly. This makes it already more realistic.</p>

<p>Tyler, the 2x leverage is more than acceptable. You could use the following as a ballpark figure: A(0)(1 + r  l)^t. An estimate gives:  100,000(1 + 0.58   0.05)^t. More than enough left to pay for the margin interests. Note that currently IB charges less than 0.03 for margin.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890e65fea18cb000af092e1' id='5890e65fea18cb000af092e1'>
<a href='#5890e65fea18cb000af092e1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485891167000' class='quanto-date posted-at response-posted-at' href='#5890e65fea18cb000af092e1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think their default is overkill and doesn&#39;t make any logical sense, how can you not fill a few thousand shares by end of day say a $5,000 order, for an instrument that has $1,000,000,000 in trade volume? There is no way you will have filling issues with such highly liquid ETFs unless you are trading into the millions, or a flash crash or something.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5890eaca1711eb25ce29ae65' id='5890eaca1711eb25ce29ae65'>
<a href='#5890eaca1711eb25ce29ae65'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485892298000' class='quanto-date posted-at response-posted-at' href='#5890eaca1711eb25ce29ae65'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Elsid, yes. It is part of what I like about Q. They can at times give you more adverse simulation conditions than in real life. And that is good. It forces you to do better, and be better prepared for adversed trading conditions.</p>

<p>Is the issue how it is traded, or how much does it make?</p>

<p>I have not read the code yet, but now, I will. I want to know what makes it tick.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58913cb3ea18cb5cfcf0948c' id='58913cb3ea18cb5cfcf0948c'>
<a href='#58913cb3ea18cb5cfcf0948c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485913267000' class='quanto-date posted-at response-posted-at' href='#58913cb3ea18cb5cfcf0948c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Adding a smidgen of leverage by raising the RISK_LEVEL to 1.2 would generate $2 million more in profits. It looks like a small price to pay for a 62% CAGR.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58913d2bba7ba303d3ad4fc1' id='58913d2bba7ba303d3ad4fc1'>
<a href='#58913d2bba7ba303d3ad4fc1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485913387000' class='quanto-date posted-at response-posted-at' href='#58913d2bba7ba303d3ad4fc1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Word of caution, as discussed earlier we might be heading for a bond bear market - a huge portion of the returns in this algo is from treasuries.  I would hate to hold a 3x Bull Treasury during a bear market.</p>

<p>Edit: The beta is also above .80 on the last couple algos - way to dependent on the market for me.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5891473278024c299a91a299' id='5891473278024c299a91a299'>
<a href='#5891473278024c299a91a299'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485915954000' class='quanto-date posted-at response-posted-at' href='#5891473278024c299a91a299'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Tyler, your concerns are justifiable. But, even if you have an automated trading strategy, you can always shut it down at a moments notice for whatever reason. Meanwhile, for the past 6 years, the strategy would have been doing fine. During those 6 years, everyday you had news stories that the market was going down, soon, real soon. During all that time, the strategy would have prospered with an impressive CAGR. High enough to put you in the 0.1% of portfolio managers.</p>

<p>You must have noticed that the strategy has some built-in alpha. I still don&#39;t know exactly how it is generated, but I can see it is there. While most strategies show a small spread compared to the SPY benchmark, notice that this one has an increasing spread, not just for small period here and there, but over the entire duration. Using an equation, I would write: </p>

<p>A(t) = A(0)(1+(r+)  l)^t = 100,000(1+ 0.62  0,05)^t , as in the previous post.</p>

<p>Some might not like leverage, but I see it as a matter of taste, a matter of choice.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58914e4c871c2329991cbd73' id='58914e4c871c2329991cbd73'>
<a href='#58914e4c871c2329991cbd73'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485917772000' class='quanto-date posted-at response-posted-at' href='#58914e4c871c2329991cbd73'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Tyler, I would like to add concerning your last statement that in a rising market, you also want your portfolio to rise in value. It will therefore be highly correlated to the market.</p>

<p>One could push for more, increase the spread compared to the SPY benchmark. Doing so might increase the beta, drawdowns, and volatility. </p>

<p>Is pushing for a  RISK_LEVEL of 1.4 worth it?</p>

<p>Again, it is a matter of choice. Here, the equation would give: </p>

<p>A(t) = A(0)(1+(r+)  l)^t = 100,000(1+ 0.69  0,05)^t. A 69% CAGR!</p>

<p>And the backtest:  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58915278ba7ba351cead4d3c' id='58915278ba7ba351cead4d3c'>
<a href='#58915278ba7ba351cead4d3c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485918840000' class='quanto-date posted-at response-posted-at' href='#58915278ba7ba351cead4d3c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Again Guy, you are painting a false picture with Quantopians default fill, you are getting much more performance and a much lower drawdown than you would experience in real trading, contrary to Quantopian being more realistic in backtesting, it&#39;s the complete opposite with small assets and very liquid ETFs. </p>

<p>You even mentioned yourself you want the worst results possible to improve from there, the worst/realistic results are getting filled completely which will most likely be the case in real life trading with such low amounts.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589152b778024c38b291a279' id='589152b778024c38b291a279'>
<a href='#589152b778024c38b291a279'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485918903000' class='quanto-date posted-at response-posted-at' href='#589152b778024c38b291a279'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Raising the RISK_LEVEL of 1.6 might also be worth it? It will raise the beta, volatility and drawdown. But, will generate:</p>

<p>A(t) = A(0)(1+(r+)  l)^t = 100,000(1+ 0.76  0,05)^t.  A  76% CAGR!</p>

<p>Most of the time, the leverage stayed below 2.</p>

<p>We should note that no one could offer a 76% CAGR without taking some added risk.</p>

<p>Here is the backtest:  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58915639ba7ba356c8ad4d67' id='58915639ba7ba356c8ad4d67'>
<a href='#58915639ba7ba356c8ad4d67'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485919801000' class='quanto-date posted-at response-posted-at' href='#58915639ba7ba356c8ad4d67'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Elsid, I do not agree. The worst scenario in a rising market is not to be filled, because then you are missing on profitable opportunities. And one thing you want in a rising market, is to have your orders filled. Therefore, the partial fills, or canceled orders become adverse conditions, worse that what the market has to offer. But, like I said: I like that.</p>

<p>I want adverse trading conditions (partial fills, delisted stocks, outliers, black swans), whatever they have. Make it as real as possible. </p>

<p>However, I did not say that I wanted the worse result and go from there. I only mentioned trading conditions. But whatever the results, I will go from there. Just as the last few backtests that have been presented.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58915e7b3091db270e7e8474' id='58915e7b3091db270e7e8474'>
<a href='#58915e7b3091db270e7e8474'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1485921915000' class='quanto-date posted-at response-posted-at' href='#58915e7b3091db270e7e8474'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Wouldn&#39;t this be easier? Aren&#39;t the returns obviously 4000% higher?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58915ed091895e5fd8dab602' id='58915ed091895e5fd8dab602'>
<a href='#58915ed091895e5fd8dab602'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485922000000' class='quanto-date posted-at response-posted-at' href='#58915ed091895e5fd8dab602'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Also CAGR is closer to 100-120% according to investopedia, unless their calculation is wrong.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589160681711eb765329b2e5' id='589160681711eb765329b2e5'>
<a href='#589160681711eb765329b2e5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485922408000' class='quanto-date posted-at response-posted-at' href='#589160681711eb765329b2e5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Pushing the RISK_LEVEL to 1.8 will raise the average leverage to about 1.8. Evidently, it will raise volatility, beta, and drawdown. </p>

<p>This series of tests was to find some of the limits of the trading strategy. At what drawdown level would I say: enough. At 0.10, 0.15, 0.20, 0.25, 0.30 or 0.50. It is a matter of choice. One could select his acceptable drawdown level, and go from there.</p>

<p>Some are more risk adverse than others. But, if you do not do the test, to see how it would have done in the past, how the trading strategy would have behaved, how could one have an idea of how it might do in the future.</p>

<p>The game is a CAGR game, and as such one should seek the shortest doubling time. At a 10% CAGR, it will take 7.3 years to double one&#39;s trading capital. At that rate, in about 22 years, one should have reached 8 times the initial capital. While at a 60% CAGR, after 22 years, one might have reached 30,000 times the initial capital. That is what is at stake. What is your drawdown tolerance?</p>

<p>One thing is sure, there will be drawdowns no matter how you look at it.</p>

<p>The 1.8  RISK_LEVEL backtest:  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589161c01711eb4d4929aeb1' id='589161c01711eb4d4929aeb1'>
<a href='#589161c01711eb4d4929aeb1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1485922752000' class='quanto-date posted-at response-posted-at' href='#589161c01711eb4d4929aeb1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My point on the previous message and backtest is to try to get through to you guys.<br>
In the GF code a little while ago showing 12000% returns, it spent almost $12 million. You could think of that as just pure leverage except Quantopian&#39;s returns calculation is done on the original $100k, ignoring the millions. Let me know if you find a broker who will loan you millions without any accounting. Keep track also of cash_low as one way to catch that, apparently watching max intraday leverage is not enough. <a href="https://www.quantopian.com/posts/pvr">PvR</a> is the other route, the one I prefer.</p>

<p>In the GF code, the returns show that it made 12,054,048 using the 100,000 that it started with.<br>
No, it made 12,054,048 using 11,756,331. Maybe I&#39;m just old-fashioned, my math teacher would have said that&#39;s 103%, not 12054%.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5891643cfd740873c2210bda' id='5891643cfd740873c2210bda'>
<a href='#5891643cfd740873c2210bda'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485923388000' class='quanto-date posted-at response-posted-at' href='#5891643cfd740873c2210bda'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Blue please rephrase in more layman terms. Only Issue I see with the past leveraged backtests, including the higher drawdown from things probably filling in real life which is still only about 4-5% higher. </p>

<p>Is that leverage goes above 2, which broker gives you more than 2x leverage?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589165c4ea18cb345cf09364' id='589165c4ea18cb345cf09364'>
<a href='#589165c4ea18cb345cf09364'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485923780000' class='quanto-date posted-at response-posted-at' href='#589165c4ea18cb345cf09364'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Also, we can all each play with backtests all day long for each risk/performance scenario, I&#39;m more interested if someone can figure out how this would of performed during 08? Would it have dropped XIV during the largest drops of 08?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589180f4fd74085dbf210e50' id='589180f4fd74085dbf210e50'>
<a href='#589180f4fd74085dbf210e50'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1485930740000' class='quanto-date posted-at response-posted-at' href='#589180f4fd74085dbf210e50'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In laymans terms, in the real world you can&#39;t borrow millions and then just declare that to be profit. There&#39;s a <a href="https://www.quantopian.com/posts/returns">discussion on it</a>. If anyone is able to comprehend my point, please explain it in your own words different from mine.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58918558ea18cb3730f09521' id='58918558ea18cb3730f09521'>
<a href='#58918558ea18cb3730f09521'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485931864000' class='quanto-date posted-at response-posted-at' href='#58918558ea18cb3730f09521'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Blue,</p>

<p>Whatever I ignore the cumulative values anyway, and just add up starting amount to finishing amount and figure out CAGR, and go based off of that, I&#39;m assuming DD values are off too, so add another 5% to them to be safe. I&#39;m going to be switching to the old version before the latest updates with some leverage, don&#39;t mind the 1-2 share days per month, what&#39;s that like an extra $20 in commissions? I guess I can pay that as insurance for a lower DD. </p>

<p>Until then I&#39;ll wait for a reworked version that fixes those 1-2 share problems, leverage but doesn&#39;t effect performance. Unless the numbers are completely wrong according to Blue, then can&#39;t really compare different Algo versions apples to apples. </p>

<p>Take a look at this Backtest posted Blue, does the true performance seem accurate? Just taking ending value/starting value it should be around 26X, so the total performance is pretty close.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589195923091db270e7e8827' id='589195923091db270e7e8827'>
<a href='#589195923091db270e7e8827'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1485936018000' class='quanto-date posted-at response-posted-at' href='#589195923091db270e7e8827'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>Take a look at this Backtest posted Blue, does the true performance seem accurate?</p>
</blockquote>

<p>Profited 260,356 spending 173,247 for real returns of only 150.3%  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58919a903091db48647e86ee' id='58919a903091db48647e86ee'>
<a href='#58919a903091db48647e86ee'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1485937296000' class='quanto-date posted-at response-posted-at' href='#58919a903091db48647e86ee'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A normal person would look at returns of 2591% and conclude that returns were 2591%. That&#39;s only true to the degree that 100% of the initial capital was utilized/risked/activated and no more. For those who don&#39;t believe it, the returns calculation used by Quantopian currently can be seen at <a href="https://github.com/quantopian/zipline/blob/master/zipline/finance/performance/period.py">https://github.com/quantopian/zipline/blob/master/zipline/finance/performance/period.py</a>. So the returns on amount invested (which is what every investor wants to know unless I&#39;m mistaken) can only be obtained by keeping track of how much was invested. Thus to succeed don&#39;t be a normal person. My real money algo is up 80% after 62 days by the Quantopian calculation however since it has not yet spent all of the initial capital, return on the amount invested/risked is 104%. Use <a href="https://www.quantopian.com/posts/pvr">PvR</a> and see clearly. To your wealth!  :)</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58919e7fba7ba333f7ad4dfc' id='58919e7fba7ba333f7ad4dfc'>
<a href='#58919e7fba7ba333f7ad4dfc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485938303000' class='quanto-date posted-at response-posted-at' href='#58919e7fba7ba333f7ad4dfc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ok I see what you mean, and quite don&#39;t understand why you would want to calculate returns that way lol. And no people don&#39;t want to know the returns on the amount invested, they want to know that their investment of 10K grew into 200K. It&#39;s not like you started off with 173K, you started off with 10K. The 173,000 already has an exponential return in there as it&#39;s not your money, but grew from the initial 10K.</p>

<p>No offense but I think we have officially entered into bizarro world here, people talking about total spent money as far as returns are considered, and thinking &quot;proper&quot; back-tests are the ones that have half filled data(even though quantopian specifically mentioned they made it so aggressive for the purpose of low volume stocks, not Billion dollar securities), wrong CAGR calculations.</p>

<p>But it&#39;s still good makes you think about backtesting, and calculations more deeply.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5891a7ffea18cb3730f09777' id='5891a7ffea18cb3730f09777'>
<a href='#5891a7ffea18cb3730f09777'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1485940735000' class='quanto-date posted-at response-posted-at' href='#5891a7ffea18cb3730f09777'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi guys,</p>

<p>I would like to say, the total returns is not the annually return. The total returns is really calculated from (End / Beginn) *100. But the annually return is calculated somewaht like (End of this year / Beginn of this year) * 100, right?</p>

<p>This means, the total returns seem  very high, said more than 6000% or even higher. But the annually return could be only 150%, 100% oeven lower?</p>

<p>Cheers  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5891a8411711eb37b729ae2b' id='5891a8411711eb37b729ae2b'>
<a href='#5891a8411711eb37b729ae2b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1485940801000' class='quanto-date posted-at response-posted-at' href='#5891a8411711eb37b729ae2b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>To myself, I am more interessted in annually return.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5891df60fd7408046f210bff' id='5891df60fd7408046f210bff'>
<a href='#5891df60fd7408046f210bff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485954912000' class='quanto-date posted-at response-posted-at' href='#5891df60fd7408046f210bff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Blue, I think the issue is that the leverage is not held the entire time.  it only happens during rebalance and drops back down to ~1  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5891fed6ea18cb7855f0928a' id='5891fed6ea18cb7855f0928a'>
<a href='#5891fed6ea18cb7855f0928a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1485962966000' class='quanto-date posted-at response-posted-at' href='#5891fed6ea18cb7855f0928a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Blue, going for leverage is a matter of choice. </p>

<p>The equation for the leverage was given, it is:<br>
A(t) = A(0)(1+(r+)  L)^t. As long as:  &gt; 2L, you will be ahead. As long as your drawdown does not reach -100% as the example you provided! Since then, leverage or not, you are out of the game.</p>

<p>The leverage fees are pulling you down, but the (r+) are pulling you up. And this is compounded over time. </p>

<p>To calculate the difference, one could say: A(t) = A(0)(1+r+)^t without the leverage as Q reports it. And use: A(t) = A(0)(1+(r+)  L)^t  to have an estimate of the total margin cost.</p>

<p>IB charges less than 3% margin. So make the margin 5%100,000 = 5,000. On the other side, r+ could be higher than 20%: 20%100,000 = 20,000....</p>

<p>Taking the 1.4 RISK_LEVEL backtest, you get:<br>
A(t) = A(0)(1+(r+))^t = 100,000(1+ 0.69 )^t, as reported by Q, and<br>
A(t) = A(0)(1+(r+)  L)^t = 100,000(1+ 0.69  0,05)^t, when deducting leverage fees.<br>
The difference between these two is: 384,166. Those were the added expenses associated with the higher return. </p>

<p>The added leverage resulted in a total return of: 8.677 millions  384,166 = 8.292 million.<br>
Probably worth the expense for some.</p>

<p>In payoff matrix notation, any stock trading strategy can be represented as:<br>
A(t) = A(0) + (H.<em>P). When you add a 1.4 leverage, all it does is: A(t) = A(0) + 1.4(H.</em>P). It is not used by the price, but by the inventory holding. Meaning that the bet size increases by 1.4. There will be margin charges as illustrated above.</p>

<p>Some like it, some don&#39;t. I see it as a matter of choice.</p>

<p>However, a caveat, not all trading strategies can support leverage, some are really bad at it. On the other hand, some strategies can, and I think this one can.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589215c01711eb452e29ae3e' id='589215c01711eb452e29ae3e'>
<a href='#589215c01711eb452e29ae3e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485968832000' class='quanto-date posted-at response-posted-at' href='#589215c01711eb452e29ae3e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas </p>

<p>Yes, and you also can&#39;t take the total cumulative amount and divide by 6 years for example still gives you a wrong number. You can take the starting amount and ending amount to figure out CAGR, just use a calculator online.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58926990fd4ca63082c9fe51' id='58926990fd4ca63082c9fe51'>
<a href='#58926990fd4ca63082c9fe51'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1485990288000' class='quanto-date posted-at response-posted-at' href='#58926990fd4ca63082c9fe51'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The other thing I can&#39;t get over is the dismal performance in 2013 compared to the market - with the high beta you would think it would have correlated more.  I mean it made money, but did not outperform a simple buy/hold strategy.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58927f294f310a2f807e8ffd' id='58927f294f310a2f807e8ffd'>
<a href='#58927f294f310a2f807e8ffd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5841af213c428400120004f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/323c3a3502407038cb460446e9ce7264?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5841af213c428400120004f8'>Caleb Sandfort</a>
</div>
<a UTCms='1485995817000' class='quanto-date posted-at response-posted-at' href='#58927f294f310a2f807e8ffd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>With all the talk of leverage and margin I just wanted to share my latest code that attempts to not go into margin at all.  Basically just breaking up buys and sells.</p>

<p>Max leverage never goes above 1 and cash low is -$53 and that isn&#39;t until well into the backtest.</p>

<p>Also added PvR, which I don&#39;t 100% understand yet, but the results seemed good.</p>

<p>Note: the cash return is basically the same as when running buys/sells concurrently. % return is just somewhat lower because I upped the initial cash a bit to have a little cushion.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589281094f310a65617e8dba' id='589281094f310a65617e8dba'>
<a href='#589281094f310a65617e8dba'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1485996297000' class='quanto-date posted-at response-posted-at' href='#589281094f310a65617e8dba'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Caleb</p>

<p>How come you removed TLT? Maybe it would lower drawdowns having some sort of allocation between TMF &amp; TLT like the past algos.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589285c2a40624000d538b3d' id='589285c2a40624000d538b3d'>
<a href='#589285c2a40624000d538b3d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/562a1289674f851bcb0004e2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d5bd698ff611c488050f57c663ac725a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/562a1289674f851bcb0004e2'>Lake Austin</a>
</div>
<a UTCms='1485997506000' class='quanto-date posted-at response-posted-at' href='#589285c2a40624000d538b3d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Great results and discussions folks. thanks for sharing .</p>

<p>If I am not wrong, it&#39;s essentially a min-var strategy. it&#39;s little bit tricky (and interesting) when thinking adding volatility based ETF into the porfililo since volatility (variance) is what the core algo mean to minimize.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5892cb9b4f310a53217e8cf6' id='5892cb9b4f310a53217e8cf6'>
<a href='#5892cb9b4f310a53217e8cf6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1486015387000' class='quanto-date posted-at response-posted-at' href='#5892cb9b4f310a53217e8cf6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Now those without margin accounts can make use of this code too, really great, Caleb Sandfort, that&#39;s some magic in your code above.</p>

<p>This was a start toward adding TLT in <a href="http://quantopian.com/posts/beta-zero-targeting-automatic-never-worry-about-beta-again">zero-beta targeting</a>, in case anyone wants to work with it. It does reduce Beta however then creeps upward with only a few shares being traded and cash drifts downward. Also in the example code/link most of the profit came from TLT so it should not be necessary to lose this much in returns IMHO. Note that ideally one would dynamically adjust stock picks coming in from pipeline based on their Beta values instead I think. Pardon all the vertical alignment going on, I just have trouble reading code without it.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58936885fd4ca66e77c9fede' id='58936885fd4ca66e77c9fede'>
<a href='#58936885fd4ca66e77c9fede'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486055557000' class='quanto-date posted-at response-posted-at' href='#58936885fd4ca66e77c9fede'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ran Blue&#39;s latest version with $100k. Impressive CAGR: 45.5%.</p>

<p>Here is the backtest. No other change than the initial trading capital.</p>

<p>For those that don&#39;t like being on margin, this is great. It can put anyone in the top 0.1% of portfolio managers where all you will live by is your CAGR on the total initial capital that was put in your care.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589382f142fa2c10b6b7dbe0' id='589382f142fa2c10b6b7dbe0'>
<a href='#589382f142fa2c10b6b7dbe0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/584c2fb90ec9ac00150008cd'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ed6dbee925e18919b19b4a98c567e6c1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/584c2fb90ec9ac00150008cd'>Blue Albatross</a>
</div>
<a UTCms='1486062321000' class='quanto-date posted-at response-posted-at' href='#589382f142fa2c10b6b7dbe0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I haven&#39;t yet had the time to study this algorithm, but I only see backtests going back to 2011. Has anyone found any appropriate substitutions to backtest this algo against data prior to 2011? The returns everyone is posting seem too good to stand the test of time. Looking forward to digging into it and understanding it better...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893b14d8fcb72000d1b7693' id='5893b14d8fcb72000d1b7693'>
<a href='#5893b14d8fcb72000d1b7693'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58409658d41dae55d9000205'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c6daf5b52c6364791e1206db729735c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58409658d41dae55d9000205'>qqt</a>
</div>
<a UTCms='1486074189000' class='quanto-date posted-at response-posted-at' href='#5893b14d8fcb72000d1b7693'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Jake this was discussed earlier just search the thread for &#39;2008&#39;. Part of the issue is that some of the ETFs used here didn&#39;t exist long enough. Some people did try to create simulations which were interesting. Search for Takis Mercouris for his insightful post.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893b2e6eb95dc1fdf3ebe13' id='5893b2e6eb95dc1fdf3ebe13'>
<a href='#5893b2e6eb95dc1fdf3ebe13'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486074598000' class='quanto-date posted-at response-posted-at' href='#5893b2e6eb95dc1fdf3ebe13'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@blue @elsid do you think it would be more conservative to set slippage to .02 for these etfs?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893b4ccacdeab1a694afab0' id='5893b4ccacdeab1a694afab0'>
<a href='#5893b4ccacdeab1a694afab0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486075084000' class='quanto-date posted-at response-posted-at' href='#5893b4ccacdeab1a694afab0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Jake @qqt</p>

<p>I think to get a proper pre 2008 backtest we need to get synthetic VXX/XIV data, you can then play around with the ETF&#39;s such as using none leveraged ones like just plain ol SPY and TLT then just apply Margin to see how a 2x 3x fund might of performed.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893b51baf028a000a64ae27' id='5893b51baf028a000a64ae27'>
<a href='#5893b51baf028a000a64ae27'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56aa51f03764b3cb990000ff'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/80fdb4de2c7bbb62d815fbd27582e5d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56aa51f03764b3cb990000ff'>Mohammad Forouzani</a>
</div>
<a UTCms='1486075163000' class='quanto-date posted-at response-posted-at' href='#5893b51baf028a000a64ae27'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Everyone should read through and thoroughly understand any algo before trading it.</p>

<p>Reading through the lastest one, I see lines of code like this with no comments:</p>

<pre><code>    if is_date(2013, 12, 3) or get_open_orders():  
        return

    for i,stock in enumerate(context.stocks):  
        if stock in [context.spyish, context.tltish]: continue  
        if is_date(2011, 3, 1) and stock is context.mid_cap_stock:  
            ...  
</code></pre>

<p>When you are altering algo logic based on <strong>dates</strong>, it means that it has look-ahead bias.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893b83feb95dc000c3ebf9b' id='5893b83feb95dc000c3ebf9b'>
<a href='#5893b83feb95dc000c3ebf9b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5841af213c428400120004f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/323c3a3502407038cb460446e9ce7264?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5841af213c428400120004f8'>Caleb Sandfort</a>
</div>
<a UTCms='1486075967000' class='quanto-date posted-at response-posted-at' href='#5893b83feb95dc000c3ebf9b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Mohammed</p>

<p>The first date check is just skipping a weekly rebalance because XIV order wouldn&#39;t fill at all no matter what on that day.</p>

<p>Second date check is just switching what mid-cap stock is used because the first one wasn&#39;t available before that date.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893bc71af028a343164ac6b' id='5893bc71af028a343164ac6b'>
<a href='#5893bc71af028a343164ac6b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56aa51f03764b3cb990000ff'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/80fdb4de2c7bbb62d815fbd27582e5d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56aa51f03764b3cb990000ff'>Mohammad Forouzani</a>
</div>
<a UTCms='1486077041000' class='quanto-date posted-at response-posted-at' href='#5893bc71af028a343164ac6b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks for clarifying Caleb. I have two issues with this:</p>

<ol>
<li>Why isn&#39;t the code commented for this? This is programming 101.<br></li>
<li>This is still look ahead bias. &quot;I can&#39;t order XIV so I&#39;m going to exclude other orders too&quot; - that is not real world trading. There may be times that your orders wont fill - that is something you have to live with.<br>
Also, switching mid-cap stocks part way through a backtest is basically using hindsight - i.e. look-ahead bias. Wouldn&#39;t you agree?<br></li>
</ol>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893bd838b2f091e4b4f5104' id='5893bd838b2f091e4b4f5104'>
<a href='#5893bd838b2f091e4b4f5104'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486077315000' class='quanto-date posted-at response-posted-at' href='#5893bd838b2f091e4b4f5104'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>After running Blue&#39;s latest version of this program, I notice that slippage was set to zero. Therefore, had to redo the test. Put it on Q defaults by commenting out the slippage line of code.</p>

<p>Here are the results. They are more modest having a 25.0% CAGR. The difference in these two simulation has to be due to the commissions and slippage charges, since I did not change any other line of code.</p>

<p>The impact is considerable. </p>

<p>I do have a question. Why did it take hours to run this test?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893c28baf028a36ee64aca9' id='5893c28baf028a36ee64aca9'>
<a href='#5893c28baf028a36ee64aca9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486078603000' class='quanto-date posted-at response-posted-at' href='#5893c28baf028a36ee64aca9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Why did you comment out the slippage?</p>

<p>The default slippage does not account for these highly liquid ETFs.  There is no way it would take all day to fill 1,000 shares of TMF.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893c4d6a064d6000ad1e59f' id='5893c4d6a064d6000ad1e59f'>
<a href='#5893c4d6a064d6000ad1e59f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486079190000' class='quanto-date posted-at response-posted-at' href='#5893c4d6a064d6000ad1e59f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tyler</p>

<p>Just Ignore him, tried explaining this to him like 10 times, he also calculates CAGR wrong. Let him be.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893c67409daaa000cccca07' id='5893c67409daaa000cccca07'>
<a href='#5893c67409daaa000cccca07'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5841af213c428400120004f8'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/323c3a3502407038cb460446e9ce7264?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5841af213c428400120004f8'>Caleb Sandfort</a>
</div>
<a UTCms='1486079604000' class='quanto-date posted-at response-posted-at' href='#5893c67409daaa000cccca07'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Mohammed </p>

<ol>
<li><p>I&#39;m used to working on code that only I work on and am intimately familiar with, so sometimes my comments are lacking since I know what is going on and don&#39;t have to worry about other people trying to figure it out. But you&#39;re right, if I&#39;m going to share it, comments should be added.</p></li>
<li><p>I agree in general. With this particular trade though, XIV traded nearly 8M shares that day and it couldn&#39;t fill a 800 share order, didn&#39;t do a partial fill or anything. Seemed like a bug with Quantopian and it was messing up my overall max leverage tracking which is something I was spending a lot of time trying to keep under 1. The change in returns is miniscule when commenting the check out. </p></li>
</ol>

<p>With the mid-cap stock switch, it happens only 2 months into a 6 year backtest.  SCHM, the etf it switches to, was from my mid-cap etf research the mid-cap etf I wanted to use, wasn&#39;t available until mid Jan, so I just gave it a month to build up it&#39;s history so it would function properly in the allocation code. If the switch had occurred at a specific time in the backtest when I had determined they should be switched on based on past/future performance then I agree that would definitely be an issue.</p>

<p>And as covered earlier, all of this could have been explained with comments:)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893c6b4acdeab1a694afba5' id='5893c6b4acdeab1a694afba5'>
<a href='#5893c6b4acdeab1a694afba5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486079668000' class='quanto-date posted-at response-posted-at' href='#5893c6b4acdeab1a694afba5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Mohammed, </p>

<p>I don&#39;t think the date plays an important role it was just excluding that one date, and allocation to midcap exist anyway in the code, not like the date matters since, 2011 is basically when most of the ETFs started trading anyway.</p>

<p>Lastly, these are the newest versions of the algo that might have these potential issues the nguyen &amp; subsequently Maxim&#39;s versions don&#39;t, and if you see my last backtest I am using Maxim&#39;s version, even though it&#39;s less effective in order management with the 1-2 share rebalancing, but has better performance per DD levels.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893cbd18b2f09000d4f52f7' id='5893cbd18b2f09000d4f52f7'>
<a href='#5893cbd18b2f09000d4f52f7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486080977000' class='quanto-date posted-at response-posted-at' href='#5893cbd18b2f09000d4f52f7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Elsid,</p>

<p>The equation for CAGR is simple. </p>

<p>CAGR = (A(t)/A(0))^(1/t)  1</p>

<p>Nobody can get this wrong. Nobody. If some would like to analyze it using other numbers, well, they better put their definition, and equation on the table. </p>

<p>Just in case, they can look up: <a href="https://en.wikipedia.org/wiki/Compound_annual_growth_rate">https://en.wikipedia.org/wiki/Compound_annual_growth_rate</a></p>

<p>Whatever you trade, there will be commissions. You can set aside slippage only if you use limit orders only. Otherwise, you are bound to have slippage. You are bound to have partial fills, especially if you can have only 2.5% of the available volume on a minute bar.  So, these expenses need to be included in any backtest. Otherwise, again, the simulation done will not reflect reality. </p>

<p>And if a trading strategy does not reflex reality, it is not worth so much. Because when you will put that trading strategy live, it will certainly hit you in the face.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893cec5af028a36ee64ad62' id='5893cec5af028a36ee64ad62'>
<a href='#5893cec5af028a36ee64ad62'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56aa51f03764b3cb990000ff'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/80fdb4de2c7bbb62d815fbd27582e5d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56aa51f03764b3cb990000ff'>Mohammad Forouzani</a>
</div>
<a UTCms='1486081733000' class='quanto-date posted-at response-posted-at' href='#5893cec5af028a36ee64ad62'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I generally agree with you Guy. Commissions should always be included. Setting it to the IB commission structure probably makes most sense:</p>

<pre><code>    set_commission(commission.PerShare(cost=0.005, min_trade_cost=1))  
</code></pre>

<p>I also agree regarding slippage. Slippage obviously varies depending on the trade size. Placing 7 figure market orders will often lead to slippage, no matter how liquid the asset. Placing 4 figure market orders on a liquid asset will probably not experience much slippage, if at all.</p>

<p>I think many of these algos are catering for people trading on Robin Hood with small accounts - so they assume no commission and no slippage.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893cf6eacdeab45724afa55' id='5893cf6eacdeab45724afa55'>
<a href='#5893cf6eacdeab45724afa55'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486081902000' class='quanto-date posted-at response-posted-at' href='#5893cf6eacdeab45724afa55'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy</p>

<p>Unless you are using wrong inputs, or unless Investopedia is using the wrong formula in their calculator, which they probably haven&#39;t since they have a whole section with the same formula, then I have no Idea how you get the CAGR number you do, probably from the number you are taking? In the Daily Positions Gains, you have the starting and Ending Value, that&#39;s the values I use and get a different CAGR from you.</p>

<p>Feel free to add commissions, but to add partial fill data is again pretty useless unless you are trading <strong>MULTI MILLION DOLLARS</strong>, I&#39;m trading this <strong>live</strong> and have no issues with partial fills on my low amounts of 100-300 shares, because again these instruments trade millions of shares a day. </p>

<p>And nobody is talking about partial fills for the minute, and then it fills next minute, we are talking about partial fills for the whole day that don&#39;t fill the whole day, such as couldn&#39;t fill 300 TMF shares all day. <strong>WHAT???</strong> which again is impossible unless trading 50MM+ if even that, some of these ETFs have over a Billion dollars traded each day.</p>

<p>You can argue about large size orders moving your fill price, that&#39;s where there will be slippage, but the current partial fill order canceled for the whole day is utterly meaningless and downright misleading.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893d48a09daaa5293ccc788' id='5893d48a09daaa5293ccc788'>
<a href='#5893d48a09daaa5293ccc788'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486083210000' class='quanto-date posted-at response-posted-at' href='#5893d48a09daaa5293ccc788'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Elsid what version are you trading live?  There are now many versions of this algo.  Thanks!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893d496a064d64b76d1e344' id='5893d496a064d64b76d1e344'>
<a href='#5893d496a064d64b76d1e344'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486083222000' class='quanto-date posted-at response-posted-at' href='#5893d496a064d64b76d1e344'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>You can mess around with this to simulate somewhat of realistic slippage model, even with this given that the Algo is trading at the most volume intense time periods of 5-15m at opening and 15m at closing, you will probably never have 25% of the bars total volume, again Unless trading million dollar orders, if that. And what will your price impact be for a highly liquid ETF 1-2 cents?<br>
With a 2 cent impact on price, results are so small not even worth talking about, even 5 it still performs well, again assuming you ever hit the 25% minute volume limit.  </p>

<pre><code>set_slippage(slippage.VolumeShareSlippage(volume_limit=.25, price_impact=.02))  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893d5a9af028a36ee64adcf' id='5893d5a9af028a36ee64adcf'>
<a href='#5893d5a9af028a36ee64adcf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486083497000' class='quanto-date posted-at response-posted-at' href='#5893d5a9af028a36ee64adcf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Tyler </p>

<p>Maxim&#39;s version with some changes to take extra leverage, and my ETF changes, the last backtest I posted is what I&#39;m trading live. Clone it and trade it if you like.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893d650af028a36ee64addb' id='5893d650af028a36ee64addb'>
<a href='#5893d650af028a36ee64addb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486083664000' class='quanto-date posted-at response-posted-at' href='#5893d650af028a36ee64addb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Tyler, true. However, that is the trading environment provided. </p>

<p>Take your example of TMF for instance. On the last test, on November 8, 2016, there were 189 TMF trades spattered all over the trading day. 70 trades for over 20 shares at a time, the rest (119 trades) were for 20 shares or less. </p>

<p>Some might not want to consider slippage, or commissions, but they do have an impact. And it is higher than they think. Trades were occurring about every two minutes, at whatever price there was. Sure, you will get a day&#39;s average price of some kind at the end of day. It could be close to the first taken trade of the day, but then again, it might not. From what the trade report gives for that day, trades were taken from 23.33 to 24.00 per share. This is more than a penny per share of slippage. This is more than a penny per share of commissions.</p>

<p>Some might not like to look at this, but that is fine with me. I will continue putting commissions  and slippage in my tests. It gives a more realistic output.</p>

<p>From the two test made, one could get an estimate on commissions and slippage charges simply by comparing the two tests.</p>

<p>Formula: CAGR = (A(t)/A(0))^(1/t)  1</p>

<p>Test 1: CAGR = (2381204/100000)^(1/6)  1 = 0.455 = 45.52%</p>

<p>Test 2:  CAGR = (659900/100000)^(1/6)  1 = 0.2502 = 25.02%</p>

<p>Cost of slippage and commissions: Test 1  Test 2 = 1,721,304</p>

<p>Those are the numbers, some might like it, others not. But, those are the numbers.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893da9a8b2f094e644f50bc' id='5893da9a8b2f094e644f50bc'>
<a href='#5893da9a8b2f094e644f50bc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486084762000' class='quanto-date posted-at response-posted-at' href='#5893da9a8b2f094e644f50bc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Guy</p>

<p>You seem like a pretty smart guy, get your head out of the numbers for a second, take a breath and really think about this statement from a common sense standpoint.</p>

<p>&quot;Take your example of TMF for instance. On the last test, on November 8, 2016, there were 189 TMF trades spattered all over the trading day. 70 trades for over 20 shares at a time, the rest (119 trades) were for 20 shares or less.&quot;</p>

<p>Do you really think it will take all day to fill 189 TMF shares? Which has a volume of 500,000? Clearly this should tell you that there is something wrong with Q backtest especially when filling criteria is applied. </p>

<p>Yesterday in my live account it filled 132 shares of TQQQ instantly, not all day, yes it sold TQQQ which a different version of this algo bought, before i replaced it. All Instant fills. </p>

<p><a href="http://i65.tinypic.com/29n6tz4.png">http://i65.tinypic.com/29n6tz4.png</a></p>

<p>Please use your common sense  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893e50f3116f05375a06679' id='5893e50f3116f05375a06679'>
<a href='#5893e50f3116f05375a06679'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486087439000' class='quanto-date posted-at response-posted-at' href='#5893e50f3116f05375a06679'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Elsid, I do not design trading strategies for small accounts such as yours.</p>

<p>As part of my tests, if I wanted to see something like you said, I would increase the 2.5% allocation of available volume to something like 75%. It would take at most a few minutes to get a fill. </p>

<p>But, you are not alone trading. And that is the point Q is making. The volume you want might not be available on the very minute you issue your order, there might be slippage. And that is common sense too.</p>

<p>Anybody on Q should be looking at a future, and test outcomes to be as realistic as possible. Even if it is under adverse conditions as the last test provided, the better. That is what you want to know. What are the limits of this trading strategy? Can it do well under adverse conditions. Can it last? Does it scale well or not? Will it flop on year 15?</p>

<p>It is a pity that we can not test for longer than 6 years on this one. I usually take 20-year testing intervals. I want to see if a trading strategy can survive over a 20-year period. It will also reveal strengths and weaknesses. It will give a better image. </p>

<p>For instance, if a trading strategy can not scale up, where do you want to go with it? Play peanuts for peanuts for 20 years? That too can be a matter of choice. But, it is not mine.</p>

<p>I see a diamond in the rough in this trading strategy. I&#39;m still not familiar enough with all the code to isolate it.  But, I know it is there just by looking at the net liquidating value chart generated by Q. So, I will be making more tests in order to isolate what makes it tick. Call it forensic strategy investigating.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893eca4eb95dc4bec3ebfa6' id='5893eca4eb95dc4bec3ebfa6'>
<a href='#5893eca4eb95dc4bec3ebfa6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486089380000' class='quanto-date posted-at response-posted-at' href='#5893eca4eb95dc4bec3ebfa6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ok Guy,</p>

<p>Again do you what you like Quantopian admits themselves that there filling model sucks, and they are working to improve it. You honestly think you can&#39;t fill 1000-10000 shares in 390 minutes? Yes I understand you trade large accounts, whats large to you? The largest backtest I&#39;ve seen you run is $100,000, and in real life you will have no problem getting filled. </p>

<p>The issue is I ran a backtest and got insane results because orders weren&#39;t filling by end of day and it gave over optimistic results, not filling works both ways, it can make results more optimistic and seem worst.</p>

<p><a href="https://blog.quantopian.com/accurate-slippage-model-comparing-real-simulated-transaction-costs/">https://blog.quantopian.com/accurate-slippage-model-comparing-real-simulated-transaction-costs/</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893fd628fcb7252781b77c2' id='5893fd628fcb7252781b77c2'>
<a href='#5893fd628fcb7252781b77c2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486093666000' class='quanto-date posted-at response-posted-at' href='#5893fd628fcb7252781b77c2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is a comparison of default slippage showing better results than, slippage turned off: Both of them have commissions on.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893fd88acdeab61094afc59' id='5893fd88acdeab61094afc59'>
<a href='#5893fd88acdeab61094afc59'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486093704000' class='quanto-date posted-at response-posted-at' href='#5893fd88acdeab61094afc59'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Now with slippage off worst results:  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5893fdd83116f058a6a067e6' id='5893fdd83116f058a6a067e6'>
<a href='#5893fdd83116f058a6a067e6'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486093784000' class='quanto-date posted-at response-posted-at' href='#5893fdd83116f058a6a067e6'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Also, updating my live IB account to trade the above.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894aaea3116f03e66a0672d' id='5894aaea3116f03e66a0672d'>
<a href='#5894aaea3116f03e66a0672d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1486138090000' class='quanto-date posted-at response-posted-at' href='#5894aaea3116f03e66a0672d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Aliaj,</p>

<p>One can see the leverage is about 1.38 (almost all the time). This means you borrow 38% of your own capital and you have to pay the interest. Right?</p>

<p>If you realize this point and don&#39;t worry about that, why not increase the leverage to 1.5 or even more? :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894abeea064d65350d1e403' id='5894abeea064d65350d1e403'>
<a href='#5894abeea064d65350d1e403'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486138350000' class='quanto-date posted-at response-posted-at' href='#5894abeea064d65350d1e403'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Because the rebalance was never changed.  So Elsid&#39;s latest algo hits a total leverage of just under 2, which is the max from IB.</p>

<p>And yes you would pay interest but it is normally 2% or less - so if you can return ~$2K per year you cover your interest - risky  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894c0da09daaa1d1bccc763' id='5894c0da09daaa1d1bccc763'>
<a href='#5894c0da09daaa1d1bccc763'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486143706000' class='quanto-date posted-at response-posted-at' href='#5894c0da09daaa1d1bccc763'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes Thomas you pay interest but it&#39;s worth it for example over that 6 year period you get about 500% more, and you pay only 2%/y , even better sign up with Robinhood Gold and get Margin without %. Hey Tyler also where can you see total leverage? Isn&#39;t it 1.4 Max?</p>

<p>Lastly, Thomas I didn&#39;t increase it more because I didn&#39;t want to increase my DD more, but feel free to do it, if you don&#39;t mind a higher DD.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894c474a064d67d63d1e403' id='5894c474a064d67d63d1e403'>
<a href='#5894c474a064d67d63d1e403'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486144628000' class='quanto-date posted-at response-posted-at' href='#5894c474a064d67d63d1e403'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Elsid this is your latest algo with only the PvR routine added.  The issue is that your record.leverage only takes the leverage at the day close.  The PvR routine takes it by the minute.  As you can see max leverage = 1.97 while day close leverage hovers around 1.3-1.4  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894c95609daaa1d1bccc830' id='5894c95609daaa1d1bccc830'>
<a href='#5894c95609daaa1d1bccc830'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486145878000' class='quanto-date posted-at response-posted-at' href='#5894c95609daaa1d1bccc830'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Tyler </p>

<p>Got it thanks, also what is cash low? The amount of leverage being used?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894ce7daf028a572264b02f' id='5894ce7daf028a572264b02f'>
<a href='#5894ce7daf028a572264b02f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486147197000' class='quanto-date posted-at response-posted-at' href='#5894ce7daf028a572264b02f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Welcome. Yes, cash low is the most cash you would have borrowed.  But it does not mean you continued to borrow that entire amount.  It normalizes back to ~1.37-1.40 after rebalancing is completed.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894d6d1af028a422164ace7' id='5894d6d1af028a422164ace7'>
<a href='#5894d6d1af028a422164ace7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486149329000' class='quanto-date posted-at response-posted-at' href='#5894d6d1af028a422164ace7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Got it Thanks. I was hoping Robinhood provided enough margin but they don&#39;t they haven&#39;t even updated their description of gold, which really makes me lose all credibility trusting these morons with my money.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894e283acdeab40304afb24' id='5894e283acdeab40304afb24'>
<a href='#5894e283acdeab40304afb24'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486152323000' class='quanto-date posted-at response-posted-at' href='#5894e283acdeab40304afb24'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think Caleb&#39;s algo will work best with Robinhood as long as you stay under 100K and your latest algo would work best in IB since they provide margin (and update it) automatically as your account grows.</p>

<p>Might deploy them that way, but would hate to put all my eggs in 1 basket so to say  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5894e422af028a422164adf2' id='5894e422af028a422164adf2'>
<a href='#5894e422af028a422164adf2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486152738000' class='quanto-date posted-at response-posted-at' href='#5894e422af028a422164adf2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yeah same but I haven&#39;t found anything comparable to this performance risk level. The way I&#39;m running it, at least with my version is, if it hits above 20% DD I will stop it, given that the last 6 years the most it&#39;s ever been is like 16%.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58955cc1bd37cc194c546abd' id='58955cc1bd37cc194c546abd'>
<a href='#58955cc1bd37cc194c546abd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486183617000' class='quanto-date posted-at response-posted-at' href='#58955cc1bd37cc194c546abd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The following notebook makes a case for this trading strategy. </p>

<p>It is not mine, meaning I am not the author. All I did was make some changes in the parameter values, added a couple of stocks, and that&#39;s it. </p>

<p>Hope it is helpful.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5895b2b417842d74b621ae25' id='5895b2b417842d74b621ae25'>
<a href='#5895b2b417842d74b621ae25'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1486205620000' class='quanto-date posted-at response-posted-at' href='#5895b2b417842d74b621ae25'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Elsid,</p>

<p>How about if you take out the IJR, SSO and IJH from the context.stocks and just keep the TMF and XIV? </p>

<pre><code>context.stocks = [sid(32270),  #SSO  
                  sid(38294),  #TMF  
                  sid(21519),  #IJR  
                  sid(21507),  #IJH  
                  sid(40516)]  #XIV  ]
</code></pre>

<p>The SSO, IJH and IJR are more or less similar, right?</p>

<p>Cheers  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58961b4932bfe641af615160' id='58961b4932bfe641af615160'>
<a href='#58961b4932bfe641af615160'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56aa51f03764b3cb990000ff'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/80fdb4de2c7bbb62d815fbd27582e5d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56aa51f03764b3cb990000ff'>Mohammad Forouzani</a>
</div>
<a UTCms='1486232393000' class='quanto-date posted-at response-posted-at' href='#58961b4932bfe641af615160'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I felt like this algo had been overoptimized to the extreme, baking in a lot of hindsight. So I decided to try to get some out-of-sample data to try to test this theory.</p>

<p>I change the leveraged ETFs to trade 3 times the standard ETFs, e.g.<br>
TMF becomes 3 x TLT<br>
TQQQ becomes 3 x QQQ<br>
also, XIV becomes -1 * VXX</p>

<p>This allowed me to run this algo from 2009 to 2011 - i.e. out of sample data.<br>
The result is below. Notice how it is not like the curve of 2011 onwards.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58961bde7eeae11e058d56b1' id='58961bde7eeae11e058d56b1'>
<a href='#58961bde7eeae11e058d56b1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56aa51f03764b3cb990000ff'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/80fdb4de2c7bbb62d815fbd27582e5d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56aa51f03764b3cb990000ff'>Mohammad Forouzani</a>
</div>
<a UTCms='1486232542000' class='quanto-date posted-at response-posted-at' href='#58961bde7eeae11e058d56b1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is the exact same algo as above but from 2011 onwards.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58961ed5fabe8c07feac914e' id='58961ed5fabe8c07feac914e'>
<a href='#58961ed5fabe8c07feac914e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56aa51f03764b3cb990000ff'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/80fdb4de2c7bbb62d815fbd27582e5d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56aa51f03764b3cb990000ff'>Mohammad Forouzani</a>
</div>
<a UTCms='1486233301000' class='quanto-date posted-at response-posted-at' href='#58961ed5fabe8c07feac914e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My opinion is that there has been some curve fitting, but it is not as bad as I expected. I wish we could backtest it for 2007 to 2009, I think that would be a lot more revealing.<br>
I would say that there is a huge amount of market exposure (note max leverage), which has been masked by the use of leveraged ETFs, but a recession or a black swan event could cause a huge draw down on this algo.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58962015fabe8c69f0ac9b46' id='58962015fabe8c69f0ac9b46'>
<a href='#58962015fabe8c69f0ac9b46'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57d8e59777a302dae50009b4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7f0b038bd2696dbb603b95035c697d9e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57d8e59777a302dae50009b4'>Takis Mercouris</a>
</div>
<a UTCms='1486233621000' class='quanto-date posted-at response-posted-at' href='#58962015fabe8c69f0ac9b46'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>&quot;I felt like this algo had been overoptimized to the extreme, baking in a lot of hindsight. So I decided to try to get some out-of-sample data to try to test this theory.&quot;</p>

<p>Totally agree, and the choice of portfolio stocks works extremely well in an environment of QE, basically inflating stock prices, declining rates, and low volatility from the comfort that the FED will be around to inject more money if the markets had a sneeze.  Having said that, I think there&#39;s a lot of value in the portfolio optimization code and the synthetic volatility with the signal. Most variants of it would not outperform the market in the most recent period of volatility 8/15-1/16. </p>

<p>I trade a variant of it for a small portion of my portfolio &amp; really keep my eyes open for signals of trouble.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589630072e6bda2badee8d6f' id='589630072e6bda2badee8d6f'>
<a href='#589630072e6bda2badee8d6f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/54ea8659ffbdace6b1000046'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f6473f61059455485d908ab4fafd607a?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/54ea8659ffbdace6b1000046'>Jeff Liu</a>
</div>
<a UTCms='1486237703000' class='quanto-date posted-at response-posted-at' href='#589630072e6bda2badee8d6f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ Mohammad Forouzani<br>
you make a good point of test OOT sample. However, your method below may not work. In your code, you still use TMF,TQQQ,XIV for optimize their allocation while there is no historical data available for it.  </p>

<p>I change the leveraged ETFs to trade 3 times the standard ETFs, e.g.<br>
TMF becomes 3 x TLT<br>
TQQQ becomes 3 x QQQ<br>
also, XIV becomes -1 * VXX  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5896336a32bfe60569614e99' id='5896336a32bfe60569614e99'>
<a href='#5896336a32bfe60569614e99'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486238570000' class='quanto-date posted-at response-posted-at' href='#5896336a32bfe60569614e99'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Thomas</p>

<p>Try it, but it doesn&#39;t help performance and increases drawdown a lot.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5896501a908afe000d55edc9' id='5896501a908afe000d55edc9'>
<a href='#5896501a908afe000d55edc9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1486245914000' class='quanto-date posted-at response-posted-at' href='#5896501a908afe000d55edc9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Elsid,</p>

<p>I will take out the SSO, IJR, IJH and at the same time I keep the leverage under 1.  :-)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58965b69908afe000d55ee5f' id='58965b69908afe000d55ee5f'>
<a href='#58965b69908afe000d55ee5f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486248809000' class='quanto-date posted-at response-posted-at' href='#58965b69908afe000d55ee5f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Mohammad, if you cripple a trading strategy like you did in your code, it won&#39;t do much, as you have illustrated. </p>

<p>I can do that too. </p>

<p>But, the purpose of designing trading strategy is not to force them to do less. It is to extract as much as you can in profits under the constraints of limited capital and uncertainty.</p>

<p>One should not confuse over-fitting and outperformance. Here, in this trading strategy, I only modified some of its parameter values. I did not change its procedures or trading logic.</p>

<p>When you use 3x leveraged ETFs that are highly correlated to the market, it better show. Not because you over-fit, but because there are 3x leveraged ETFs.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58965be8bb3548000d8e602b' id='58965be8bb3548000d8e602b'>
<a href='#58965be8bb3548000d8e602b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1486248936000' class='quanto-date posted-at response-posted-at' href='#58965be8bb3548000d8e602b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The OOS backtest doesn&#39;t look terrible - still does not hit 20% drawdown.</p>

<p>I found that this algo actually underperforms in a &quot;raging bull&quot; scenario like 2009/2013.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589788b80028e4000d69e579' id='589788b80028e4000d69e579'>
<a href='#589788b80028e4000d69e579'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486325944000' class='quanto-date posted-at response-posted-at' href='#589788b80028e4000d69e579'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>My last notebook showed impressive test results. </p>

<p>Yet, my book says that one could do even better. One can start with a trading strategy having some built-in alpha, a positive long term edge, as was presented in part one. And build from there. The portfolio equation to be used is:</p>

<p>A(t) = A(0) + (1+g)^t nuPT. </p>

<p>Raising g will increase the total output. You don&#39;t need to push by much since there is a compounding effect in place. </p>

<p>As a demonstration of the phenomenon, I used the same trading strategy as presented in the previous notebook. Raised its g by 1.5%. A minor modification really, yet, the impact is noteworthy.</p>

<p>The change of a single variable, a single number, and it raises the performance level. It is understandable since (1+g)^t  is a compounding factor.</p>

<p>This is not an optimization factor, it is not over-fitting either. None of the trading logic was changed. The trading strategy was just taken as is. It was a request, an administrative one at that, to just let it do more of what it does.</p>

<p>There was no change to the trading strategy itself. It kept its signature. It is only that you demanded more.</p>

<p>Hope it helps. At least, it can give ideas as to how far one can go.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589886ceb77503000dd6187d' id='589886ceb77503000dd6187d'>
<a href='#589886ceb77503000dd6187d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/546f50de877aa37afd00040c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5561c4f944ed2ea658f2d820c6f59426?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/546f50de877aa37afd00040c'>Ethan</a>
</div>
<a UTCms='1486390990000' class='quanto-date posted-at response-posted-at' href='#589886ceb77503000dd6187d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy Fleury<br>
Is it possible you share your modified algorithm mentioned in the notebook, please? I also tried to run the algorithm in your notebook, but it said no such algorithm ... Thank you very much.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58990b962c57be000a35308e' id='58990b962c57be000a35308e'>
<a href='#58990b962c57be000a35308e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486424982000' class='quanto-date posted-at response-posted-at' href='#58990b962c57be000a35308e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Ethan, my intentions are to provide the needed tools to help you design your own. That is what my book is all about. This way, it will be your program operating on your terms, and for your benefit. You would know exactly what it did. You would know its strengths and weaknesses.</p>

<p>And then, I would not be responsible for whatever screw-up you might design. I would not be responsible for you not doing your homework. Or operating a strategy as if a black box.</p>

<p>I have cloned and modified 4 trading strategies as seen on Q over the past few months. Pushing them all to higher performance levels using the same principles as elaborated in this thread. </p>

<p>I still have not finished reading the code of this particular trading strategy. This means that I do not know what really makes it tick. I was able to locate its pressure points and apply my formulas to it. Resulting in the simulations you see. But,</p>

<p>I too have to do my homework. What I provided up to now is just part of my preliminary forensic investigation. What was presented say: there is something there. Now my question is: what is it?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589935bfe449da48916c1306' id='589935bfe449da48916c1306'>
<a href='#589935bfe449da48916c1306'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1486435775000' class='quanto-date posted-at response-posted-at' href='#589935bfe449da48916c1306'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy Fleury.<br>
i understand what you wrote  about pushing the strategy to limit to get some more juice out of it. which im going to do to this strategy.<br>
So i see your equations : A(t): accumulated value a time time<br>
A(0) at time t=0, g = growth rate factor ( leverage)<br>
Could you fill me in for the rest of variables.oh how you come up the equantion in first place ?. Thanks  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58994d429aeb28000ad9b7c3' id='58994d429aeb28000ad9b7c3'>
<a href='#58994d429aeb28000ad9b7c3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486441794000' class='quanto-date posted-at response-posted-at' href='#58994d429aeb28000ad9b7c3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Nhat, the equation: A(t) = A(0) + (1+g)^t nuPT. Is an expression equivalent to the outcome of a payoff matrix: A(t) = A(0) + (1+g)^t (H.*P) which would give the same answer.</p>

<p>You will find a lot of that explained in the payoff matrix thread: <a href="https://www.quantopian.com/posts/the-payoff-matrix">https://www.quantopian.com/posts/the-payoff-matrix</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589957023350927fba73bfa2' id='589957023350927fba73bfa2'>
<a href='#589957023350927fba73bfa2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/564a108debefcfc2ae000622'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c8e1ea89a590c57c6d7b9d7295dc46a0?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/564a108debefcfc2ae000622'>Nhat Nguyen</a>
</div>
<a UTCms='1486444290000' class='quanto-date posted-at response-posted-at' href='#589957023350927fba73bfa2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks, will have a good read.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5899e92a1c2bf06c23fd4df9' id='5899e92a1c2bf06c23fd4df9'>
<a href='#5899e92a1c2bf06c23fd4df9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486481706000' class='quanto-date posted-at response-posted-at' href='#5899e92a1c2bf06c23fd4df9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>A Trading Strategy&#39;s Search For Profits - Part 3</p>

<p>The previous post made the point that you could increase a stock portfolio&#39;s performance by slightly increasing a single variable. The given portfolio equation was:</p>

<p>A(t) = A(0) + (1+g)^t nuPT. </p>

<p>Based on this, in the previous test, g was raised by 1.5%. This time, it will be raised by 2.0%. And since g is part of a compounding factor, it should show its impact all over the strategy&#39;s timeline.</p>

<p>Once you have your trading strategy, meaning you have a long term positive edge. There will remain one question. How can I do more of that?</p>

<p>Only actions that will affect the above equation can have an impact. The rest might just as well be cosmetics. A stock trading strategy designer has for mission to maximize the above equation under the constraints of his initial capital and uncertainty.</p>

<p>The following notebook will show how a small incremental change in a single variable can increase one&#39;s portfolio performance, just as it did in the previous test. Which was saying: here is the new normal. Now, what can you do with that?</p>

<p>Once a trading strategy designer is done with his/her program, that is it. That is what it does. It has a unique signature: A(t) = A(0) + nuPT. But here, what is proposed is not to necessarily change the trading strategy, it can stay as it was. But nonetheless, you can request more. As if super-gaming the strategy itself.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589a879703ae71000d88353f' id='589a879703ae71000d88353f'>
<a href='#589a879703ae71000d88353f'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1486522263000' class='quanto-date posted-at response-posted-at' href='#589a879703ae71000d88353f'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Adding <a href="https://www.quantopian.com/posts/record-pnl-per-stock">https://www.quantopian.com/posts/record-pnl-per-stock</a>. Hover over custom chart.<br>
When stocks spike, can that be detected and close them to capture that profit.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589b8165ce80493aafd006b2' id='589b8165ce80493aafd006b2'>
<a href='#589b8165ce80493aafd006b2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486586213000' class='quanto-date posted-at response-posted-at' href='#589b8165ce80493aafd006b2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The equation presented: A(t) = A(0) + nuPT, is derived from a portfolio&#39;s payoff matrix. In payoff matrix notation, the given equation is: A(t) = A(0) + (H.P). Where the expression: (H.P) is a simple element by element multiplication. It could also be viewed as the sum of a vector of n trades:  qp. It is the summation, the end result of all trades taken (profits &amp; losses) over the duration of a portfolio, be it simulated or live.</p>

<p>The payoff matrix has for origin a simple integral:  q(t)dp, and must be centuries old. It is in reading Schachermayer&#39;s 2000 course notes: Portfolio Optimization in Incomplete Financial Markets, that you will find in his equation (1.1) the above payoff matrix. That too is not new, it has been derived by other researchers before him.</p>

<p>When you decompose the payoff matrix equation above, which in passing I would like to state that it has an equation sign, you will find as a linear expression:  qp. It is only that as a payoff matrix, it represents a complete historical record of a portfolio&#39;s trading activity. All its trades, over the entire portfolio duration in a single block of data. Therefore, without even the notion of a doubt, I can categorically state: A(t) = A(0) + (H.P), just as those before me. </p>

<p>It would therefore be up to you to prove that the equal sign is wrong. Demonstrate that it is a not equal sign that should be there. On this, I look forward to your presentation.</p>

<p>The expression: A(t) = A(0) + nuPT, has the same meaning. It gives the exact same answer. And is reduced to just three known portfolio metrics. </p>

<p>Any time you do a portfolio simulation, you start with A(0), your initial capital. You end up with A(t), whatever the applied trading strategy produced. As for nuPT, it is derived from the payoff matrix itself. [A(t)  A(0)]/n = uPT, which will translate to the average profit per trade since the trading strategy will have taken n trades. That it be one trade or a million. </p>

<p>Your average profit per trade is simply derived from the percent profit made on your bet size u. I use fixed trading units which would make u a constant. And PT stands for the average percent profit on a trade unit.  (H.P)/( nu) = PT.</p>

<p>All three of these numbers are given by any portfolio simulation you do. And this gives you an added tool to help you control your portfolio&#39;s outcome.</p>

<p>For whatever you want to do to improve on your trading strategy. You can count on only four numbers: A(0), n, u, and PT. There is nothing mysterious, or secret, or in need to buy a book to understand this. Although my book does explain all this in detail (307 pages).</p>

<p>You are the one to supply A(0), and my advice on that one is: make it as big as you can. You are playing a CAGR game and the outcome A(t) is proportional to: A(0)(1+r)^t. Make A(0) small, and I think you will be wasting your time and energy playing for peanuts. Note that A(0) is independent of what the market is. It is just an expression for the size of your initial trading account.</p>

<p>The trade unit is something you fix. It is not a mystery number either. Do you want to trade $100 dollars at a time or $10,000 or more. It is up to you, and it is also totally independent of the market, or the market outcome. It is just part of your method of play. The denomination of the chips you put on the table.</p>

<p>PT is your edge, your average percent profit per trade. If PT is less than zero, you lost the game. Since overall, you will lose: nu(- PT). You have to design a trading strategy with a positive edge: PT &gt; 0. If you can&#39;t, then quit while you are still ahead.</p>

<p>We are left with n, the number of trades over the life of a portfolio. There is the mystery, if you want one. I have no means, just as anybody else, to know in advance how many trades a particular trading strategy might do over it lifetime. But, that is why I do simulations, to get an approximation for this number. </p>

<p>Most people are looking for how to make PT bigger (forecast it, increase their edge), while I am looking to make A(0), n, u, and PT larger, all at the same time. As long as they will think in terms of PT (trying to predict the price from period to period), they will not see what I am trying to do. </p>

<p>If my trading strategy does 100,000 trades over 20 years, I know the average profit per trade: (H.P)/n = uPT. And from this, I can deduce another approximation due to the large number of trades, an average number of trades per time unit: n/t. From which I can extrapolate an estimate of what a strategy might do going forward.</p>

<p>For instance, the initially posted trading strategy in this thread is scalable. If it is, then it has to respond to: 10A(t) = 10[A(0) + nuPT]. As simple as that. If it does not, then the strategy is not 100% scalable. A demonstration of this is easy, you simply do the tests:</p>

<p>The original trading strategy&#39;s scalability test:<br>
<a href="http://alphapowertrading.com/quantopian/SPY_WVF_Orig_Init_Cap.png">http://alphapowertrading.com/quantopian/SPY_WVF_Orig_Init_Cap.png</a></p>

<p>As a conclusion, whatever trading strategy we want to design, if we want to improve upon it, we are left with very simple questions. </p>

<p>How can I make A(0) bigger? How can I increase the number of trades? How can I increase the trade unit? And, how can I increase my profit margin, my long term edge? That is it! That is what will make A(t) bigger, nothing else. One does not need a two week course to figure this out.</p>

<p>No mystery, no hocus pocus, no secret sauce, no the trick is. Just plain math. </p>

<p>What you see in the simulations I&#39;ve provided is me answering those questions to my satisfaction. </p>

<p>Somebody else might prefer other routes. Like you stated before, you don&#39;t like leveraging. Then, don&#39;t use any. However, note that I went for 2x leverage on a 3x leveraged ETF portfolio which can easily explain part of the outperformance. This is equivalent to going 6x leverage. But then again, if it would not have worked, the strategy would have crashed and burned. Nonetheless, one could have stopped at anytime, closed the account and walk away with whatever the net liquidation value equity line was giving at the time.</p>

<p>This does not change the mission. You still have to maximize the equation: A(t) = A(0) + nuPT, that is the objective of any portfolio manager and strategy designer. </p>

<p>Personally, I opted to scale profits higher as in: A(t) = A(0) + knuPT. All I need is k&gt;0, and PT&gt;0. I will let the trading profits finances the added trading which should generate further profits to finance further trades. It is that simple. Somebody else might prefer another solution.</p>

<p>What I say is: anybody, and I do mean anybody, can have their own unique solution to A(t) = A(0) + nuPT. And even from there, they can continue to improve on their strategy designs by pushing on those three portfolio metric levers as was demonstrated in the three successive tests I presented. What those test results showed is that it can be done. At least, over the testing interval, under those trading conditions, it did.</p>

<p>It really is only a matter of choice. After all, there are only there numbers of interest!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589ba9d2597c296ddaf9e446' id='589ba9d2597c296ddaf9e446'>
<a href='#589ba9d2597c296ddaf9e446'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486596562000' class='quanto-date posted-at response-posted-at' href='#589ba9d2597c296ddaf9e446'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Or...stay with me here...increasing leverage increases performance and drawdown. Why does a scientific paper with formulas, equations, and lots of maths need to be written about this?</p>

<p>Do you do this for every simple minute point? Before I turn on my car let me write some equations about energy, and a research paper.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589c636b4a94f872f8d954af' id='589c636b4a94f872f8d954af'>
<a href='#589c636b4a94f872f8d954af'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1486644075000' class='quanto-date posted-at response-posted-at' href='#589c636b4a94f872f8d954af'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I&#39;m showing up late to the party here.  Perhaps someone can explain the excitement?  Has the Q crowd finally found a money-printing machine?  In other words, is there any basis for the results above, or are we in the land of over-fitting/speculation/gambling?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589c7fa5f4e58c580eeb1a59' id='589c7fa5f4e58c580eeb1a59'>
<a href='#589c7fa5f4e58c580eeb1a59'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55ed0ebaf7eced2820000138'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/192fde5a5de866362a9e34c096cb8a9b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55ed0ebaf7eced2820000138'>Minh</a>
</div>
<a UTCms='1486651301000' class='quanto-date posted-at response-posted-at' href='#589c7fa5f4e58c580eeb1a59'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>There&#39;s no money printing here. Just the seductive illusion of backtesting.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589cb319c8f48c0322c45ac8' id='589cb319c8f48c0322c45ac8'>
<a href='#589cb319c8f48c0322c45ac8'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57a8c2864859fac3670000ea'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b6a5141a04193929f234f19212b52f6f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57a8c2864859fac3670000ea'>John Galt</a>
</div>
<a UTCms='1486664473000' class='quanto-date posted-at response-posted-at' href='#589cb319c8f48c0322c45ac8'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I don&#39;t know about printing money, but so far my real money account, trading an earlier variant of this algo  is up 11% since the beginning of the year and a few additional  percent on top of that since the election. It was doing well enough, I gave it more money to &quot;print&quot;. Sure, it&#39;s a small sample during a favorable time, so time will tell.</p>

<p>My only mod was to set the trading $$ volume at 70% of the target - to reduce leverage to 1. It&#39;s an IRA so leverage is verboten in any case.</p>

<p>The other interesting thing is, actual real money results are  better than a backtest over the same period. Not sure what to make of that. Luck? Issues in the Q backtester? IB really, really likes me?</p>

<p>I&#39;ll have to go run another backtest over the recent period, but I think there was a several percentage point difference, in &quot;real world&quot; favor.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589cbea386c5594e8890068a' id='589cbea386c5594e8890068a'>
<a href='#589cbea386c5594e8890068a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1486667427000' class='quanto-date posted-at response-posted-at' href='#589cbea386c5594e8890068a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ John Galt -</p>

<p>So what is the basic formula you are applying?  What is the principle?  Perhaps you could provide an outline in pseudo-code?  I&#39;m just curious why all of the interest here.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589cc6f76471b95642f99308' id='589cc6f76471b95642f99308'>
<a href='#589cc6f76471b95642f99308'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57ed95361c021cf21e000011'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1fece04f6bc46ef63cbcb28bdfeea3e8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57ed95361c021cf21e000011'>nguy nat</a>
</div>
<a UTCms='1486669559000' class='quanto-date posted-at response-posted-at' href='#589cc6f76471b95642f99308'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant. There no printing money here. Thanks for the public your MVP ideas and algo.<br>
As you can see the basic driving force is still your orignal idea of MVP ( Peter&#39;s mod). i spent few months research ideas, run and rerun your algo. i saw the algo was doing good and i was quite happy about it. But controlling XIV portion was the pain in the a... and i have no solution for it at that time. Until Peter publish his Spy code that have a portion that he used to control the XIV, and voila i found the idea, so i try to glue his part of algo to MVP and it work.<br>
In the end, thank you all the guys put in some work and make it to the version today. Its no printing money but for the guy like me i will definitely run it in IRA with .8 risk instead of 1 and keep investing ( standard error with .8 leverage is about 9-13%).<br>
im currently have my mod version running in smallest IRA account and it doing quite well.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589cc710fe398416c6a42efe' id='589cc710fe398416c6a42efe'>
<a href='#589cc710fe398416c6a42efe'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58409658d41dae55d9000205'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c6daf5b52c6364791e1206db729735c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58409658d41dae55d9000205'>qqt</a>
</div>
<a UTCms='1486669584000' class='quanto-date posted-at response-posted-at' href='#589cc710fe398416c6a42efe'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi all, I&#39;ve been following this thread for a while now and slowly trying to work through the code to really figure out what&#39;s going on. I&#39;ve made fairly good headway but due to my limited financial and mathematical knowledge I&#39;d like to run this by the people following this thread.</p>

<p>From what I understand, there are three trading functions: allocate, allocVol, and allocSpy.</p>

<p>For allocate, we are applying a minimization optimization function based on the normals of the average pct change of a set of securities over a given time period (in this case over the past 17 days). The result of the minimization is used to purchase or sell positions.</p>

<p>The allocVol function is seeking to determine if the WVF is indicating a downward trend for the XIV, and if it cross a threshold then we sell our positions in XIV.</p>

<p>Lastly, the allocSpy function is balancing the portfolio and seeking to find a downward or upward trend in SPY and purchase the bear or bull positions respectively.</p>

<p>Let me know if my assumptions above are correct.</p>

<p>As for my questions, I&#39;m having a hard time figuring out what exactly is going on in these lines of code:</p>

<pre><code>    bnds = []  
    limits = [0,1]  
    for stock in context.stocks:  
        bnds.append(limits)  
    bnds = tuple(tuple(x) for x in bnds)


    cons = ({&#39;type&#39;: &#39;eq&#39;, &#39;fun&#39;: lambda x:  np.sum(x)-1.0},  
            {&#39;type&#39;: &#39;ineq&#39;, &#39;fun&#39;: lambda x:  np.dot(x,ret_norm)-context.eps})  
    res= scipy.optimize.minimize(variance, context.x1, args=ret,jac=jac_variance, method=&#39;SLSQP&#39;,constraints=cons,bounds=bnds)  
</code></pre>

<p>Questions: What are the constraints and what exactly are they doing for the minimization optimization? What is the result of the minimization function and   how is it applied to find the proper allocations? What exactly is bnds = tuple(tuple(x) for x in bnds) doing?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589cc84ffe39847b06a43072' id='589cc84ffe39847b06a43072'>
<a href='#589cc84ffe39847b06a43072'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486669903000' class='quanto-date posted-at response-posted-at' href='#589cc84ffe39847b06a43072'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>In all my years of strategy development I have never used 3x leveraged ETFs. The initial trading strategy presented (which by the way did not do much) was an opportunity to see if my methods would apply there too. No development time needed. I could simply clone the strategy and go from there. </p>

<p>Even before starting to modify any part of the code, I knew volatility, drawdowns, and beta would be accentuated since 3x leverage ETFs is equivalent to having leveraged your portfolio by 3 times using borrowed money, except that you did not borrow any to do the same job.</p>

<p>My intention was to leverage on top of that by 2 times. Which would make it a 6 times leveraged portfolio. Something that Q mentioned it might do using low beta portfolio strategies. </p>

<p>The initial strategy design had for volatility: 0.16, and   16.2% for max drawdown. I had also recognized it had a scalable design. Leveraging by 2x should double these numbers, or close to it.</p>

<p>I viewed it as stable grounds enough to push the machine. Even in that state, the original program had to answer to the equation: A(t) = A(0) + nuPT. That was its signature.</p>

<p>Here is the original trading strategy&#39;s signature with its $10,000 Initial Capital:<br>
<a href="http://alphapowertrading.com/quantopian/SPY_WVF_Returns_Orig_10k.png">http://alphapowertrading.com/quantopian/SPY_WVF_Returns_Orig_10k.png</a></p>

<p>You want to improve on an existing trading strategy, you do not have many choices. There are only 4 numbers that matter. They are all part of the above equation. </p>

<p>The first thing you can do is increase the initial stake A(0). </p>

<p>This requires absolutely no change in code. From outside the program you simply increase the initial trading capital. It will give you if the trading strategy is scalable or not. In this case, it is by design. Therefore, for me, it passed its first test even before doing them. Those results where presented in my previous post. </p>

<p>Since the original trading strategy could support higher stakes with ease, I intended to use its last test as basis for going forward. This had transformed the strategy&#39;s equation into 10 times the original. Giving: 10A(t) = 10[A(0) + nuPT], where 10 times more capital would be used to generate 10 times more in net portfolio value.</p>

<p>I could start doing modifications to the program, knowing that it was scalable, and make the last test its new normal, giving it for equation: A(t) = A(0) + nuPT, and go from there. My program modifications were tested using $1 million as initial capital.</p>

<p>You design trading strategies using $10k as initial capital, and do not test if it is scalable, or do the test and find out that it is not scalable, then your strategy is not worth much. A stock portfolio is more, much more than having a penny stock trading account.</p>

<p>I know that if I want to increase performance, all I have is: A(t) = A(0) + nuPT. Whatever I do will have to impact on those variables. Otherwise, I am missing the boat. Cosmetic changes to a program will have no impact on that equation, and therefore no impact on the outcome.</p>

<p>The first step which was to ante up 10 times the initial stake was easily passed. There is no mystery there, unless someone (not to give names) comes out with 42 as an answer! But, that post was deleted. I can understand why.</p>

<p>What was presented in the three level test is executable. The numbers might appear high, but those were the numbers generated by the program modifications. I still have not read all the original program code. But now, I have some motivation to do so. I too want to understand better what is at play, there might be code snippets in there that I could transfer to my code library.</p>

<p>I will be back with some explanation on why it worked. I did not see any surprises in the outcome. Saying that what you see in those 3 tests is what I got. It is what came out of the simulations as done on the Quantopian servers using their data, the same data that was used by the original program. All I did was find pressure points and then apply my methodology to the problem. It transformed the above equation into: A(t) = A(0) + (1 + g)^t nuPT. And that is what boosted the outcome, as it should.</p>

<p>But this, anybody can do. You can use your own trading strategies, as basis, and apply the same principles. Using the above formula, it will boost your own performance.</p>

<p>I would point out that my simulations are operating at the equivalent of 6 times leverage.</p>

<p>Somehow, it had to show!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589ccca8c8f48c2760c45b6a' id='589ccca8c8f48c2760c45b6a'>
<a href='#589ccca8c8f48c2760c45b6a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56aa51f03764b3cb990000ff'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/80fdb4de2c7bbb62d815fbd27582e5d4?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56aa51f03764b3cb990000ff'>Mohammad Forouzani</a>
</div>
<a UTCms='1486671016000' class='quanto-date posted-at response-posted-at' href='#589ccca8c8f48c2760c45b6a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is the issues I had with the algo (I skimmed the transaction logs of the backtest to try to identify any issues).</p>

<ol>
<li>The code seems to be composed of cut and paste from various other pieces. This doesn&#39;t automatically mean it is <strong>bad</strong>, but it does make me question its reliability.<br></li>
<li>There are periods where the algo will hold over 60% XIV. I consider this super risky - if I wanted to take this level of risk, I could achieve even higher returns. I consider this unacceptable risk.<br></li>
<li>There are periods where the algo will hold only TLT + TMF. Why both? Because of the ducktape programming highlighted in #1.<br></li>
<li>Since we dont have backtest data for a recession, I wonder if this would blow up during a recession?<br></li>
</ol>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589ccd6c86c559147e9004d2' id='589ccd6c86c559147e9004d2'>
<a href='#589ccd6c86c559147e9004d2'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57ed95361c021cf21e000011'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1fece04f6bc46ef63cbcb28bdfeea3e8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57ed95361c021cf21e000011'>nguy nat</a>
</div>
<a UTCms='1486671212000' class='quanto-date posted-at response-posted-at' href='#589ccd6c86c559147e9004d2'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@qqt, i think you have to start from this  <a href="https://www.quantopian.com/posts/minimum-variance-w-slash-constraint">Minimum Variance w/constraint</a> and works your way up. </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589cd49b6471b94b3ef994aa' id='589cd49b6471b94b3ef994aa'>
<a href='#589cd49b6471b94b3ef994aa'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57ed95361c021cf21e000011'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/1fece04f6bc46ef63cbcb28bdfeea3e8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57ed95361c021cf21e000011'>nguy nat</a>
</div>
<a UTCms='1486673051000' class='quanto-date posted-at response-posted-at' href='#589cd49b6471b94b3ef994aa'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Mohammad, valid points made,<br>
i totally agreed with point #1 , For me personally, for a non-programmer like me. This is what i did,i spent time quite decent amount time to understand the math behind it and i like the idea, So first think i need a prototype and none of other platform that lets me prototype this is the cause of reason 1. But if it works with minimum error then no issue at all. And i think it need a test run for 2 years of real live account to verify the trustworthy and if it delivers a decent returns (not bazooka return like some of latest algo) Then the users have to decide that if want to use long term, if yes, then it needs to have  a professional grade code restructure or brand new.<br>
For me, since  I love the idea and have spent enough time with it and i see it works the way i want it to. therefore, my confident level is high so i paid a Amibroker programmer to  code a new program based on this idea for me. (Trust but verify is the key here).<br>
All the rest of the points, for point #3, latest algo use TLT and TMF, i like to use SPY allocation to control TMF portion from MVP allocation funtion, but yeah TLT+TMF combo works ( cheaper than TLT and lev more return ) But have to be careful here.<br>
Point #2 and #4, if you stand as long term investor then its maybe scary but if short term trader or even swing trader, then i dont see a problem at all.<br>
(also allocation is every week + a protective Vol allocation will kick in if any thing change =&gt; still worry ?). 
In the end, algo trading is not plug in and forgot (Sometime people forgot this point) it should be monitoring and adjusting the parameters when see fit.<br>
Im a trader, im looking at 5 years range not 20-30.  if it works then good, if market changees and the strategy no longer relevant than more on to the next 1.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589ce8a386c55932be9005ac' id='589ce8a386c55932be9005ac'>
<a href='#589ce8a386c55932be9005ac'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1486678179000' class='quanto-date posted-at response-posted-at' href='#589ce8a386c55932be9005ac'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@ qqt -</p>

<p>The code minimizes the variance, subject to constraints.  Getting 
<code>scipy.optimize.minimize</code> to work is a bit of a beast.  It is looking for a solution vector within the bounds 0 to 1 for each element.  The first constraint is just the normalization of the vector; it must sum to 1.0.  The second constraint is setting a lower limit on the trailing mean return, volatility normalized.  The optimizer then attempts to minimize the variance in the returns subject to the two constraints and staying within the bounds.</p>

<p>One note here is that CVXPY is now available.  It might be better, if the problem conforms to the CVXPY rules.</p>

<p>I&#39;d also note that depending on its flexibility, once it is released fully, the new <a href="https://www.quantopian.com/posts/optimize-api-now-available-in-algorithms">Q optimization API</a> might work here (although under the hood, it is just CVXPY, as I understand).</p>

<p>Also, note that limits can be set, on a per ETF basis, when using an optimizer.  So, if XIV is getting too much weight, for example, it can be limited.</p>

<p>Overall, I&#39;m still befuddled as to the basic idea of this thread, if there is one.  For one thing, is there a set of ETFs we are dealing with?  And why?  I see a lot of different symbols floating around.  Long only?  Long-short?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589cec7e33097c13eb87b75a' id='589cec7e33097c13eb87b75a'>
<a href='#589cec7e33097c13eb87b75a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1486679166000' class='quanto-date posted-at response-posted-at' href='#589cec7e33097c13eb87b75a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I think I achieve my goal which was to get greater or equal returns with the same or lower drawdown, everything else going on here is mental gymnastic with 25%-50% DD  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589d0574c8f48c223ac45a2c' id='589d0574c8f48c223ac45a2c'>
<a href='#589d0574c8f48c223ac45a2c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58715175d739e95500ac4fca'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/26d0d584d35e41049fa95cdeb51a6c2b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58715175d739e95500ac4fca'>Stephen Kearney</a>
</div>
<a UTCms='1486685556000' class='quanto-date posted-at response-posted-at' href='#589d0574c8f48c223ac45a2c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It&#39;s interesting to compare the original algo in the first message with the later versions.  Although the later versions appear to perform better they aren&#39;t as coherent to me.</p>

<p>The original has two functions: allocVOL() and allocateSPY().</p>

<ul>
<li>allocVOL() is scheduled everyday after market open and trades between XIV (inverse VIX ETF) and VXX (VIX ETF).<br></li>
<li>allocSPY() is scheduled everyday before market close and trades in and out of SPY.</li>
</ul>

<p>There are a number of later versions. Most of them seem to have 4 functions: allocate(), trade(), allocVOL(), and allocateSPY().  </p>

<ul>
<li>allocate() is scheduled everyday 60 minutes after market open. However, the values calculated in allocate() are only used by trade() which is scheduled once a week.<br></li>
<li>trade() trades the securities in context.stocks, which, depending on the version of the algo, includes XIV, TLT (long term treasuries), and stock indexes.<br></li>
<li>allocateVOL() is scheduled everyday before market close and now only closes XIV when WVF crosses below a threshold.<br></li>
<li>allocateSPY() is scheduled everyday after market open and trades between SPY and TLT.</li>
</ul>

<p>I find it confusing the later versions have multiple functions trading the same securities with different rules and on different timeframes. But unless the backtesting isn&#39;t valid it all seems to work quite well with good returns and low DD.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589ddd188e11af6f2ab6b223' id='589ddd188e11af6f2ab6b223'>
<a href='#589ddd188e11af6f2ab6b223'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1486740760000' class='quanto-date posted-at response-posted-at' href='#589ddd188e11af6f2ab6b223'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Grant, you developed an interesting and remarkable strategy using CVXPY. I looked at the notebook your referenced on the optimization API. Found it very interesting. Since I value your opinion, would you say it is now the way to go? Even preferable to SLSQP?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='589e3265971fb46580a71e55' id='589e3265971fb46580a71e55'>
<a href='#589e3265971fb46580a71e55'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/4f005d1b5e32ee000b000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/03ce2b05f15809a7239dc5910a54abf5?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/4f005d1b5e32ee000b000001'>Grant Kiehne</a>
</div>
<a UTCms='1486762597000' class='quanto-date posted-at response-posted-at' href='#589e3265971fb46580a71e55'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi Guy,</p>

<p>I can&#39;t say for sure.  My understanding is that CVXPY is the way to go (or the Q optimization API), if the problem can be formulated properly.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a1d762c8c17e28b53568b5' id='58a1d762c8c17e28b53568b5'>
<a href='#58a1d762c8c17e28b53568b5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5758fcada90449628600005b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d4870583b2bc7766b8661951addeda26?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5758fcada90449628600005b'>Pherroz Ansari</a>
</div>
<a UTCms='1487001442000' class='quanto-date posted-at response-posted-at' href='#58a1d762c8c17e28b53568b5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Tried to deploy a couple of the algorithms above for live trading as a test, but I get a error telling me that there was a problem loading my live algorithm. Any ideas?</p>

<p>Thanks in advance.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a1dcc120596b17b6324383' id='58a1dcc120596b17b6324383'>
<a href='#58a1dcc120596b17b6324383'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58409658d41dae55d9000205'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c6daf5b52c6364791e1206db729735c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58409658d41dae55d9000205'>qqt</a>
</div>
<a UTCms='1487002817000' class='quanto-date posted-at response-posted-at' href='#58a1dcc120596b17b6324383'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Pherroz you should post the backtest here  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a1e683559d8108669b3228' id='58a1e683559d8108669b3228'>
<a href='#58a1e683559d8108669b3228'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5758fcada90449628600005b'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d4870583b2bc7766b8661951addeda26?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5758fcada90449628600005b'>Pherroz Ansari</a>
</div>
<a UTCms='1487005315000' class='quanto-date posted-at response-posted-at' href='#58a1e683559d8108669b3228'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I didn&#39;t realize this but the base currency in the account needs to be USD, which was why I was receiving an error.</p>

<p>Thanks guys.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a1e8e0f72e522686a1cde1' id='58a1e8e0f72e522686a1cde1'>
<a href='#58a1e8e0f72e522686a1cde1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1487005920000' class='quanto-date posted-at response-posted-at' href='#58a1e8e0f72e522686a1cde1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The following is my post-analysis of this trading strategy. It might interest some.</p>

<p><a href="http://alphapowertrading.com/index.php/papers/247-the-leveraged-leveraged-portfolio">http://alphapowertrading.com/index.php/papers/247-the-leveraged-leveraged-portfolio</a>  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a22b20f6c9bf761846f4c0' id='58a22b20f6c9bf761846f4c0'>
<a href='#58a22b20f6c9bf761846f4c0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58409658d41dae55d9000205'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4c6daf5b52c6364791e1206db729735c?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58409658d41dae55d9000205'>qqt</a>
</div>
<a UTCms='1487022880000' class='quanto-date posted-at response-posted-at' href='#58a22b20f6c9bf761846f4c0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>One thing I&#39;m very skeptical about (for the recent algorithms with astronomical returns) is that it depends heavily on the XIV, a financial instrument that&#39;s only been around for about 5-6 years. I&#39;m not trying to yell conspiracy or anything, but is the VIX a good indicator of what it&#39;s really trying to measure? And is the XIV a reliable tracker of its inverse? Is there any possibilities of failure with either the VIX or XIV? Or any of the volatility indicators for that matter? This is more coming out of a lack of understanding of how the prices of these securities are set than skepticism of the actual code.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a230a35d196136f4280ebf' id='58a230a35d196136f4280ebf'>
<a href='#58a230a35d196136f4280ebf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1487024291000' class='quanto-date posted-at response-posted-at' href='#58a230a35d196136f4280ebf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@qqt dude if XIV fails you will have to worry about more serious problems than your money.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58a2465595710e000a44bdfb' id='58a2465595710e000a44bdfb'>
<a href='#58a2465595710e000a44bdfb'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1487029845000' class='quanto-date posted-at response-posted-at' href='#58a2465595710e000a44bdfb'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>You do simulations to find out: what if? It is a simple question. But, it is also the sole purpose of having portfolio simulators. </p>

<p>If in the 90&#39;s you did a simulation on Apple, you might have concluded then that it was going down the drain. If you do it today, you might go: what a great company. This to say that even if you did a simulation, it was over past data, history.</p>

<p>What my simulations showed is that one could push on his/her machine for some 2,222 days without seeing it break down, and this at 6 times leverage. </p>

<p>Now, I could not have known the strategy could do it, if I had not done the simulation. And the simulation said: it is feasible. At least, it could have been done, in the past.</p>

<p>What should one retain from this? Everyone will have a different view. Some will not be bothered considering the results since they do not leverage, whatever the scenario. Others will wonder if the added risk was worth the effort. Others will just express doubts and continue on their way.  It is not up to me to decide those things. It is up to each one of us. What we like and don&#39;t. How far do we want to go, and how fast? </p>

<p>But, whatever, it remains a CAGR game. And that is how you keep the score.</p>

<p>For the added risk which was shown to be about of the same order of a none leveraged portfolio, you had this trading strategy that could literally fly. It is understandable, it flew at 6 times leverage for the price of a 2 times scenario.</p>

<p>My view is as said before. At least, it showed that it was possible over past data.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ab2421867f26650349be1c' id='58ab2421867f26650349be1c'>
<a href='#58ab2421867f26650349be1c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55424671ec76e332e40003ed'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/d39ce197694d4c3485ffc3a38bf9ec09?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55424671ec76e332e40003ed'>Johnny Wu</a>
</div>
<a UTCms='1487610913000' class='quanto-date posted-at response-posted-at' href='#58ab2421867f26650349be1c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Correct me if I&#39;m wrong, but it seems that the portfolio will go long xiv when vxx wvf goes over a threshold and makes no attempt to guess a peak. How do you know the wvf won&#39;t keep climbing like it would in 2008? Are we banking on the fact that xiv only makes up 30% of the portfolio and doesn&#39;t rebalance so you&#39;d only lose 30% at most (not accounting spy allocation losses)?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ae12b4106199000dd5c6ca' id='58ae12b4106199000dd5c6ca'>
<a href='#58ae12b4106199000dd5c6ca'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52bf46f0a1ca491cdb000053'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7b018ff8285e8b588c87f8d4f9533b4b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52bf46f0a1ca491cdb000053'>John O&#39;Dwyer</a>
</div>
<a UTCms='1487803060000' class='quanto-date posted-at response-posted-at' href='#58ae12b4106199000dd5c6ca'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Kory, Could you describe the EMA? I&#39;ve tried a couple variations all with horrible results. If you describe it, I will try to code it up!</p>

<p>Thanks!</p>

<p>John  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ae359883daed2ec936ab2d' id='58ae359883daed2ec936ab2d'>
<a href='#58ae359883daed2ec936ab2d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1487811992000' class='quanto-date posted-at response-posted-at' href='#58ae359883daed2ec936ab2d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@John, My buddy Jacob and I have already coded it. Please see the algo attached for the 100-day WVF indicator with 2 of its EMAs (Smoothed WVF). One is a 10-day EMA of the WVF and the other is a 30-day EMA. Using the EMA as a variable trigger is much better than assigning a fixed value trigger.</p>

<p>I originally coded this algo in MultiCharts with PowerLanguage. This is the strategy I originally presented to Cesar Alvarez at our NWTTA Seattle Meetup and it is also the one that inspired this whole thread along with Cesar&#39;s. Unlike a lot of the recent permutations here in this thread, this one uses absolutely no leverage or leveraged funds and trades only XIV and TLT. Here&#39;s what it looks like in MultiCharts (please note that for the Quantopian version, I made the algo hide in TLT instead of cash when not allocated to XIV): </p>

<ul>
<li>Codes and backtest: <a href="http://imgur.com/a/iYxB6">http://imgur.com/a/iYxB6</a><br></li>
<li>Chart: <a href="http://imgur.com/a/fCkfS">http://imgur.com/a/fCkfS</a></li>
</ul>

<p>One way to hedge with these strategies is buy some OTM VIX or VXX calls. With the amount of profit these strategies generate from mostly shorting volatility, one could certainly spare 20% of the profits to buy some long VIX calls to hedge. You&#39;d sleep much better at night.</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ae43d3b571776cf06956e9' id='58ae43d3b571776cf06956e9'>
<a href='#58ae43d3b571776cf06956e9'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1487815635000' class='quanto-date posted-at response-posted-at' href='#58ae43d3b571776cf06956e9'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>That does better with default slippage and commissions, donno why.<br>
Meanwhile $34k unaccounted-for negative cash. Return is 280.</p>

<p>2017-02-21 13:00 <em>pvr</em>:206 INFO PvR 0.1815 %/day   cagr 0.5   Portfolio value 134686<br>
2017-02-21 13:00 <em>pvr</em>:207 INFO   Profited 124686 on 44513 activated/transacted for PvR of 280.1%<br>
2017-02-21 13:00 <em>pvr</em>:208 INFO   QRet 1246.86 PvR 280.11 CshLw -34513 MxLv 1.78 RskHi 44513 MxShrt 0<br>
2017-02-21 13:00 pvr:293 INFO 2011-01-04 to 2017-02-21  $10000  2017-02-22 20:47 US/Eastern<br>
Runtime 0 hr 7.2 min  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ae55ae1ce4230aa36ea5ae' id='58ae55ae1ce4230aa36ea5ae'>
<a href='#58ae55ae1ce4230aa36ea5ae'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1487820206000' class='quanto-date posted-at response-posted-at' href='#58ae55ae1ce4230aa36ea5ae'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Kory, your strategy can scale up pretty good too. Impressive.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ae5d9e806d2a000aee79d0' id='58ae5d9e806d2a000aee79d0'>
<a href='#58ae5d9e806d2a000aee79d0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52bf46f0a1ca491cdb000053'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7b018ff8285e8b588c87f8d4f9533b4b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52bf46f0a1ca491cdb000053'>John O&#39;Dwyer</a>
</div>
<a UTCms='1487822238000' class='quanto-date posted-at response-posted-at' href='#58ae5d9e806d2a000aee79d0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Kory, Thanks so much! I was thinking of trying to also go long vxx when something like the  opposite conditions exist. I was thinking this would drive the beta towards 0 and help in bad times when volatility is going crazy. Have you tried something like that already?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ae613781aa94000a9d03cc' id='58ae613781aa94000a9d03cc'>
<a href='#58ae613781aa94000a9d03cc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1487823159000' class='quanto-date posted-at response-posted-at' href='#58ae613781aa94000a9d03cc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Is ok, real returns 1160%, the 100x starting capital makes for lower percentage of negative cash.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58aefda07a7670000a23832c' id='58aefda07a7670000a23832c'>
<a href='#58aefda07a7670000a23832c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1487863200000' class='quanto-date posted-at response-posted-at' href='#58aefda07a7670000a23832c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy, Thank you. It trades very infrequently so that&#39;s why it scales up well.</p>

<p>@John, Yes, I have 2 algos that can go long VXX when not in XIV. The problem is if I chase VXX upside, it doesn&#39;t work as well as the algos that go long XIV only during a bull market (obviously). Yes, it can be very profitable and has zero or negative beta during the 20% of those times the VIX spikes but you would end up losing most of that gains during the other 80% of the times when the VIX declines.</p>

<p>In my experience, playing long VXX using mean-reversion techniques on the daily time interval yields the best risk-adjusted results. To play long VXX on smaller time intervals, you need to use momentum techniques.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58af46131061993384d5c569' id='58af46131061993384d5c569'>
<a href='#58af46131061993384d5c569'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1487881747000' class='quanto-date posted-at response-posted-at' href='#58af46131061993384d5c569'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Kory, your trading strategy has for equation: nuPT. And your methodology has fixed n and PT in time. Doing so, you made your trading strategy scalable. </p>

<p>The trading unit being fixed at 100% of equity, it becomes the scaling factor. Your trading strategy is therefore scalable by design, responding to its bet size.</p>

<p>My test was a verification that you did in fact do the equivalent of fixing n and PT. But that does not diminish your trading strategy, in the past it would have done what you have shown under those conditions. </p>

<p>Not that many trading strategies operate at 50% CAGRs and above. And scaling up might be one way of taking full advantage of such a strategy. I find it worth investigating.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58afcada7ade4d5672a27246' id='58afcada7ade4d5672a27246'>
<a href='#58afcada7ade4d5672a27246'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1487915738000' class='quanto-date posted-at response-posted-at' href='#58afcada7ade4d5672a27246'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Guy,</p>

<p>Thanks for your analysis. I personally find the best method to trade volatility is to have a portfolio of 5-10 momentum/trend-following algos that trade XIV only. I&#39;ve found strategies that attempt to play long VXX will sooner or later suffer 50% or more Max DD. Additionally, you need to allocate 2-5% of your portfolio to hedges against Black Swans like buying OTM SVXY puts or VIX calls or long VIX futures or even VXX calls. </p>

<p>I think that traders of these strategies need to embrace the fact that they will have to endure a 20-50% Max DD at some point even during a bull market, regardless of how well they optimize their strategies. But eventually the strategies will recover and make new highs as VIX peaks out and mean-reverts downward. Plus if you hedge against Black Swan, you likely won&#39;t lose in the long run and sleep better at night. UNTIL the bear market arrives. Arguably, at that point, traders only simply have to switch their XIV-only momentum algos to trade VXX-only or both XIV/VXX. </p>

<p>Just my 2 cents  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b2198cc9a5da000dfe8ca0' id='58b2198cc9a5da000dfe8ca0'>
<a href='#58b2198cc9a5da000dfe8ca0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1488066956000' class='quanto-date posted-at response-posted-at' href='#58b2198cc9a5da000dfe8ca0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Kory, I agree. And as you said, one can always buy protection against outliers. Even override manually if needed or desired.</p>

<p>Nonetheless, your strategy has a welcomed property which I appreciate: scalability. </p>

<p>I will go on the assumption that what I see is not curve fitted. I have to say I did not look that closely at all the details of this trading strategy. Only performed some tests on how it behaved to see if I could be interested.</p>

<p>Assuming that one is ready to buy protection for the just in case, there are a few things one can do with that strategy. I do not think a portfolio manager would be interested in a trading system made to operate with $10k. I too would consider it a total waste of time and resources. However, a scalable trading strategy merits investigation to determine its limits.</p>

<p>The governing equation of a scalable strategy is: (1+L)kA(0)(1+r)^t. To illustrate the point, I did the following simulations:</p>

<p><a href="http://alphapowertrading.com/quantopian//Kory_SPY_WVF.png">http://alphapowertrading.com/quantopian//Kory_SPY_WVF.png</a></p>

<p>The first panel shows the strategy being scalable 100%. Portfolio metrics are maintained for k ranging from 10 to 1,000. </p>

<p>Panel two shows the use of leverage on the $1 million scenario where we can see volatility, beta, and drawdowns increased. Just as we can see the CAGR and total return increase as well.</p>

<p>The strategy being scalable, it would also support panel three with its $10 million scenario. Portfolio metrics were about the same as in panel two with the same CAGRs.</p>

<p>Note that I have not changed any of the code, except for k and L which are factors set even before undergoing a simulation. </p>

<p>My question would be: which scenario would a portfolio manager prefer knowing that protection can be bought and leverage easily paid for?</p>

<p>With this, I will certainly study your strategy further and see how it works. And attempt to reduce its volatility and drawdowns. My fear is that it might be somewhat curve fitted.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b44c40599b481be81b7f24' id='58b44c40599b481be81b7f24'>
<a href='#58b44c40599b481be81b7f24'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1488211008000' class='quanto-date posted-at response-posted-at' href='#58b44c40599b481be81b7f24'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Quantopian is looking for strategies with low beta, low volatility and low drawdowns. It is a reasonable quest. </p>

<p>But, and it is a major one, there are no high returns available with this kind of strategy unless you are ready to apply leverage, up to six times as in Q&#39;s case. </p>

<p>The math of the proposition do not seem to comply with the objective which should be the highest possible CAGR. </p>

<p>By leveraging, one increases volatility, beta, and drawdown, even if you start with low figures. MPT will emphasize that higher returns imply higher risk.</p>

<p>There is a cost for leveraging. It is only if the added return is higher than the leveraging costs that it might be worth the effort. </p>

<p>If you increase the CAGR by 3% and pay 3% for leverage, you are not ahead. You are just working for your broker! And if you want a leverage factor of 6, you will need to pay interests on 5 times your ongoing equity. This could be a major strain on a low profitability scenario even if the output would tend to 6 times.</p>

<p>Your CAGR rate has to compensate for these charges. Otherwise, over time, you will be paying to underperform.</p>

<p>I can easily imagine that the $250 million put at Q&#39;s disposal by Point72 could be distributed to several low drawdown strategies. Maintaining low drawdowns has a cost. You might have a smoother equity curve, but it translates into lower average returns, as if underplaying one&#39;s hand.</p>

<p>Consider this scenario. Take 10% of the $250 million allocation and put it on Kory&#39;s strategy. It would result into something similar to what was presented in the third panel of the table from my previous post.</p>

<p>One could even estimate the outcome with the formula provided. Make leverage = 1.5, initial stake = $ 25 million. The output: 1.52.510,000,000(1+74.23%)^t = $ 754,675,000.</p>

<p>The simulation came in at: $ 754,650,000. Close enough! The impact of the margin cost is easy to estimate as well: 1.52.510,000,000(1+74.23%  3.00%)^t = $ 678,350,975. Total margin cost: $76,299,025. Not a trivial sum after all.</p>

<p>The following table illustrates this:</p>

<p><a href="http://alphapowertrading.com/quantopian/Kory_SPY_WVF_Extended.png">http://alphapowertrading.com/quantopian/Kory_SPY_WVF_Extended.png</a></p>

<p>I do not have portfolio metrics for a Quantopian acceptable scenario, so I used expected CAGRs instead. But, Q should be able to fill in the blanks. </p>

<p>My preliminary analysis is given in the above table. The columns of interest are: the effective rate of return (CAGR after leveraging costs), total cost of leverage, and total net return.</p>

<p>Whatever game one wants to play, one should study the impact of the trading rules being put in motion before even applying them in real life. Otherwise, you might have some surprises going forward, and some of them not beneficial to your portfolio.</p>

<p>I remain with the same caveat as expressed in my last post. I have not completed my homework on this trading strategy.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b50f5731d96e03ec693bfc' id='58b50f5731d96e03ec693bfc'>
<a href='#58b50f5731d96e03ec693bfc'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/52b0e0e0271a27fc88000049'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5451406e743420c700eb2b054b2fc57?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/52b0e0e0271a27fc88000049'>Blue Seahawk</a>
</div>
<a UTCms='1488260951000' class='quanto-date posted-at response-posted-at' href='#58b50f5731d96e03ec693bfc'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><blockquote>
<p>1.52.510,000,000(1+74.23%  3.00%)^t = $ 678,350,975. Total margin cost: $76,299,025. Not a trivial sum after all.</p>
</blockquote>

<p>Can total margin costs be added to the custom chart? I&#39;d like to see how that can be done in code.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b61c214f96ba6fd983e448' id='58b61c214f96ba6fd983e448'>
<a href='#58b61c214f96ba6fd983e448'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/589248da40e6be47f8d45c3c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8a6a483c1ae668b18b06460ef71f5404?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/589248da40e6be47f8d45c3c'>Alexander Souvall</a>
</div>
<a UTCms='1488329761000' class='quanto-date posted-at response-posted-at' href='#58b61c214f96ba6fd983e448'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Kory,</p>

<p>Could your algo be live traded on Robinhood as is?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b660aa94811243a43f2b61' id='58b660aa94811243a43f2b61'>
<a href='#58b660aa94811243a43f2b61'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/589248da40e6be47f8d45c3c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/8a6a483c1ae668b18b06460ef71f5404?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/589248da40e6be47f8d45c3c'>Alexander Souvall</a>
</div>
<a UTCms='1488347306000' class='quanto-date posted-at response-posted-at' href='#58b660aa94811243a43f2b61'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Or IB, or both....  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b670335de5291c7b35c851' id='58b670335de5291c7b35c851'>
<a href='#58b670335de5291c7b35c851'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5473bdcad4c31dcf7b004801'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/13f584631208f9cc276caf95393c23be?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5473bdcad4c31dcf7b004801'>Kory Hoang</a>
</div>
<a UTCms='1488351283000' class='quanto-date posted-at response-posted-at' href='#58b670335de5291c7b35c851'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Alex,</p>

<p>Should be. Although <strong>officially</strong> I do not recommend that you do it.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58b9873893153844ab863770' id='58b9873893153844ab863770'>
<a href='#58b9873893153844ab863770'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1488553784000' class='quanto-date posted-at response-posted-at' href='#58b9873893153844ab863770'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is a small sample of a stop loss level test with this trading strategy:</p>

<p><a href="http://alphapowertrading.com/quantopian/SPY_WVF_Orig_Stops_Lev.png">http://alphapowertrading.com/quantopian/SPY_WVF_Orig_Stops_Lev.png</a></p>

<p>I used the $1 million initial capital scenario as base of comparison with its 3% stop loss and no leverage. This is Kory&#39;s program version with $1M, to which is applied 1.5 leverage and increasing stop loss percentages.</p>

<p>As the stop loss increases, the total net return increases up to a level, tappers off and then declines. In the process the strategy&#39;s beta, volatility and drawdown increase as they should. Also, the alpha, Sharpe and Sortino ratios gradually fall as the stop loss increases. The explanation for this behavior is understandable and expected. You increase the stop loss, you simply increase portfolio volatility.</p>

<p>By increasing the stop loss, we accept more price variations since the stop loss is serving as a limiting factor to acceptable price variability. It will result in less whipsaws but higher drawdowns as if by definition. The stop loss serves as protection by limiting drawdowns.</p>

<p>This set of tests demonstrate the trading strategy needs a stop loss. Not too small as it will eat on potential profits, yet, not too large as not to go overboard, and not matter. A kind of goldilocks setting in the range of 3% to 6%.</p>

<p>I started digging into the code and I don&#39;t like some of the stuff I see. Without changing the strategy&#39;s trading logic you can force it to do more, even much more. The strategy&#39;s behavior changes as you increase the pressure.</p>

<p>And this does raise a question or two. If you don&#39;t like a strategy&#39;s behavior and it does make money, should you excuse it, play it anyway, or explore further? You have a strategy that is designed to do little, meaning having little going for it. But, by setting your controls at higher levels you can force it to produce more. Will you accept the higher risk and higher volatility? Would you not investigate further to know more before committing any resources to it?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58bd0d9a32b456000d306db5' id='58bd0d9a32b456000d306db5'>
<a href='#58bd0d9a32b456000d306db5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58882f9d42ed64223e8948d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/4a8d6c59d0a67e46fe2023c5c7d1ee22?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58882f9d42ed64223e8948d7'>Reo Inoue</a>
</div>
<a UTCms='1488784794000' class='quanto-date posted-at response-posted-at' href='#58bd0d9a32b456000d306db5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Dear all<br>
Thank you for me for showing your strategy. Everything is impressive. I try to backtest these strategy in my local environment,  I can not do it. I  download histrical finance data from yahoo finance (i.e. VXX <a href="https://www.google.co.jp/search?q=VXX&amp;oq=VXX&amp;aqs=chrome..69i57j69i60l3j69i59l2.4628j0j7&amp;sourceid=chrome&amp;ie=UTF-8">https://www.google.co.jp/search?q=VXX&amp;oq=VXX&amp;aqs=chrome..69i57j69i60l3j69i59l2.4628j0j7&amp;sourceid=chrome&amp;ie=UTF-8</a> ) , but there are differences between yahoofinance data and Quantopian data.  Could you tell me how to solve these problems?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58bd951aafb2eb54ecfb7bf4' id='58bd951aafb2eb54ecfb7bf4'>
<a href='#58bd951aafb2eb54ecfb7bf4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1488819482000' class='quanto-date posted-at response-posted-at' href='#58bd951aafb2eb54ecfb7bf4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is another series of tests done on this trading strategy using Kory&#39;s version.</p>

<p>We can change some of the strategy&#39;s underlying assumptions which will have an impact on performance. As you increase or decrease the pressure, it will change the strategy&#39;s behavior.</p>

<p>It was previously demonstrated this strategy was scalable. This can be seen in the first 3 lines of the table below where the initial stake rises while the CAGR remains stable; the same goes for its portfolio metrics.</p>

<p><a href="http://alphapowertrading.com/quantopian/Kory_SPY_WVF_other_tests.png">http://alphapowertrading.com/quantopian/Kory_SPY_WVF_other_tests.png</a></p>

<p>In previous tests, leverage up to 1.95 was used. Most of the present tests were performed using 1.50 while changing other parameters to see the general behavior and their impact on portfolio metrics, including estimated leveraging costs.</p>

<p>It was found that a 5% stop loss might be a reasonable compromise (between 3 and 6%) for this trading strategy. It reduced the number of whipsaws and generated higher CAGRs. These new tests were performed using the 5% stop loss.</p>

<p>The window length (moving average crossover) was changed from 10 : 30 to 7 : 34. Not a major change, a trivial one at best. But, it enabled the strategy to react a little bit earlier and stay in position a little longer. This increased performance: less whipsaws, catching more of the drift. These are the same kind of steps one might take in an optimization process. These particular changes can still be viewed as reasonable numbers. Nonetheless, they are arrived at after the fact. However, they are not that different from the originally used numbers.</p>

<p>What I found troubling is the strategy&#39;s trading behavior as you increase trading capital. The problem seems partially related to Quantopian&#39;s 2.5% of the available volume trading rule when there are cash reserves. </p>

<p>With parameter settings similar to line 3 of the above table produced these stats:</p>

<p><a href="http://alphapowertrading.com/quantopian/Kory_SPY_WVF_other_tests_L3.png">http://alphapowertrading.com/quantopian/Kory_SPY_WVF_other_tests_L3.png</a></p>

<p>When I looked closer, I could see a couple of big trades. And then the rest were for single digit trades, most often below 5 shares at a time (like one or two shares at a time). The chart below was not an aberration. It would do this all day, almost all trading days.</p>

<p><a href="http://alphapowertrading.com/quantopian/Kory_SPY_WVF_other_tests_L3_trades.png">http://alphapowertrading.com/quantopian/Kory_SPY_WVF_other_tests_L3_trades.png</a></p>

<p>It somehow renders the strategy impractical. And it raised questions. Was the 2.5% volume trading rule appropriate on high liquidity stocks when playing with higher stakes? Which is the first thing I suspected. A surprising thing is that if I changed the trading hour to 11h30 instead of the original 9h40, then it behaved as it should; a few trades each day it traded. But the hour was not to be the problem.</p>

<p>An easy way in Quantopian to reduce general market exposure is to reduce the leverage to below 1.0. Lowering leverage is just another tool to control a trading program. However, I really do not want the trading behavior displayed in the above chart. Reducing leverage to below 1.0 is a simple way to reduce not only volatility but also drawdowns.</p>

<p>The reason for the above behavior seems related to the use a leverage below 1.0. Doing so leaves cash reserves that the program will try to use when rebalancing on small amounts. Thereby generating the one and two share trades. The program should not behave that way, but it does. It appears as if trading on market noise. Or, maybe these trades are just due to parameter rounding. </p>

<p>Either way, I do not see this as acceptable since the program does tens of thousands of such trades (some tests showed &gt;100,000 such trades). It is worse if you go for a 1.5 leverage. Low digit trades can exceed 400,000!</p>

<p>For me, this is unsatisfactory. It questions the reliability of test results or the underlying methodology.  And with these doubts in place, it forces me to verify all the time if the trading behavior is correct or not, and this for each trade. That is too much. I should not have to question this. Is this what I want my program to do? Do I have a reasonable assessment of the situation? Presently, it is as if saying: not ready for prime time.</p>

<p>I understand the Quantopian program is still in beta, but this can be a serious problem.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58bdd267fb9eee65834ae3e5' id='58bdd267fb9eee65834ae3e5'>
<a href='#58bdd267fb9eee65834ae3e5'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5558ffea86d2d08cb20005ec'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/97358675e9a853b95c91e2ce8859d284?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5558ffea86d2d08cb20005ec'>Serge d&#39;Adesky</a>
</div>
<a UTCms='1488835175000' class='quanto-date posted-at response-posted-at' href='#58bdd267fb9eee65834ae3e5'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi guys, </p>

<p>Just wanted to give you all a heads up on another are of concern. Namely how reliable is the XIV data for the backtested period (to 2011)<br>
<a href="https://drive.google.com/open?id=0B9VIHGHiABM0VEFtUVJBX0ZCWlk">xiv_graph</a>
Look at some trades the program does in simulation mode. It is trading aournd $169.85 per share on 2011/05/03. On this same date XIV was actually trading  around $14. I verified the XIV figures on both Yahoo and Stockcharts.com</p>

<p>So what is going on? Some kind of reverse split at 12:1 ? This makes me uneasy about using the XIV/VXX data in the algorithm.</p>

<p>Can somebody offer a reassuring explanation?</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58bdd5758fb7d331e568add1' id='58bdd5758fb7d331e568add1'>
<a href='#58bdd5758fb7d331e568add1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1488835957000' class='quanto-date posted-at response-posted-at' href='#58bdd5758fb7d331e568add1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>An issue that i have with this strategy hence why i stopped trading it live, is that it relies heavily on bond for it&#39;s returns, which given a rising rate environment it will effect returns, also if you move to cash, the drawdowns seem to become highly correlated with the market which will increase DD significantly more. Either way it&#39;s still tradable just expect much lower returns, as TLT/TMF will be significant drags on performance. Unless somebody does a backtest on how the yields offset the price losses of bonds.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58bdd796fb9eee65834ae438' id='58bdd796fb9eee65834ae438'>
<a href='#58bdd796fb9eee65834ae438'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e852d15b7c76e2f10008a1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/21fd495851075c3bb8b18d4c1c09b640?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e852d15b7c76e2f10008a1'>Darth Xanther</a>
</div>
<a UTCms='1488836502000' class='quanto-date posted-at response-posted-at' href='#58bdd796fb9eee65834ae438'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello d&#39;Adesky,<br>
You are correct, you are looking at a split adjusted price.  Dividends on the other hand get put into your cash.  See here for more clarification: <a href="https://www.quantopian.com/posts/the-pipeline-api-dividends-and-splits-what-you-need-to-know">https://www.quantopian.com/posts/the-pipeline-api-dividends-and-splits-what-you-need-to-know</a><br>
Have a good day.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58ddb3a59a4f8431a60e7ed4' id='58ddb3a59a4f8431a60e7ed4'>
<a href='#58ddb3a59a4f8431a60e7ed4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/587bd81e069586000a72c38e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/a7c628245d31b5be625687c0280ce961?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/587bd81e069586000a72c38e'>Spencer Current</a>
</div>
<a UTCms='1490924453000' class='quanto-date posted-at response-posted-at' href='#58ddb3a59a4f8431a60e7ed4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello,</p>

<p>I put this together from some bits and pieces from a few different places. It suffers from a pretty big hit in 2015 and 2016 mainly because this is either all in XIV or between TLT and TMF. It&#39;s not very diverse but puts up some interesting numbers.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='58f81e9629f31c00108ed214' id='58f81e9629f31c00108ed214'>
<a href='#58f81e9629f31c00108ed214'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/586d9e665547ba630e0001b1'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/86fe251268d86bfe55595918fc435135?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/586d9e665547ba630e0001b1'>Vix Trader</a>
</div>
<a UTCms='1492655766000' class='quanto-date posted-at response-posted-at' href='#58f81e9629f31c00108ed214'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks to everyone who contributed to this algorithm. I made a change to one of the algorithms in this post to manage the downtrend of bonds. Basically added a SMA 200 condition (TMF price above SMA 200[TMF]) to place TMF trades. It did not bring down the returns too much, but it gives you protection when bonds crash. Basically I have added the below condition in place_order function. I am not sure whether it is the right way.  </p>

<pre><code>if stock == context.bearish_stock:  
    price_hist = data.history(context.bearish_stock, &#39;price&#39;, 200, &#39;1d&#39;)  
    context.ma_tmf=price_hist.mean()  
    context.cp_tmf=data.current(context.bearish_stock, &quot;price&quot;)  
    if context.cp_tmf&gt;context.ma_tmf:  
        order_target_percent(stock, percent)  
else:  
    order_target_percent(stock, percent)
</code></pre>

<p>I would like to receive feedback from the experts. Thanks for your help.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5900f781094cb714278fa6e1' id='5900f781094cb714278fa6e1'>
<a href='#5900f781094cb714278fa6e1'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58af5b8272e5fa000de2e4f7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/004adcdf884a3bdab0db62bef0a0e331?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58af5b8272e5fa000de2e4f7'>Walter Greaney</a>
</div>
<a UTCms='1493235585000' class='quanto-date posted-at response-posted-at' href='#5900f781094cb714278fa6e1'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>New to the community here, so sorry if this is a newbie question, but......is there a Robin Hood friendly version of this algo?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='590142a25021190010e67f1d' id='590142a25021190010e67f1d'>
<a href='#590142a25021190010e67f1d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1493254818000' class='quanto-date posted-at response-posted-at' href='#590142a25021190010e67f1d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>this should be RH friendly as I trade this on an  IB cash account. You might want to put some retry logic into it as RH seems to cancel orders without reason.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5901869726a03f000d7ee8c3' id='5901869726a03f000d7ee8c3'>
<a href='#5901869726a03f000d7ee8c3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1493272215000' class='quanto-date posted-at response-posted-at' href='#5901869726a03f000d7ee8c3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Ramesh</p>

<p>You algo seems interessting. But the backtesting takes much longer than the others. Maybe it&#39;s because there are lot of calculations in your algo.  And could you please explain a little bit about your algo idea?</p>

<p>Cheers</p>

<p>Thomas  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='590229616816d1000d30a77b' id='590229616816d1000d30a77b'>
<a href='#590229616816d1000d30a77b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57d8e59777a302dae50009b4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7f0b038bd2696dbb603b95035c697d9e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57d8e59777a302dae50009b4'>Takis Mercouris</a>
</div>
<a UTCms='1493313889000' class='quanto-date posted-at response-posted-at' href='#590229616816d1000d30a77b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>&quot;Peter Bakker  Yesterday: this should be RH friendly as I trade this on an IB cash account. You might want to put some retry logic into it as RH seems to cancel orders without reason.&quot;</p>

<p>Peter, is there an example of order retrying logic somewhere?  It would save me the time to code from scratch...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59022daeac8101001039eff4' id='59022daeac8101001039eff4'>
<a href='#59022daeac8101001039eff4'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58ece9fb3a61ae33411facfa'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/04885e671253a648f30e4ca4165673ed?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58ece9fb3a61ae33411facfa'>Chris Ricciuti</a>
</div>
<a UTCms='1493314990000' class='quanto-date posted-at response-posted-at' href='#59022daeac8101001039eff4'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@takis You may need to modify a bit to get it to fit with the algo in question, but here is some code I&#39;ve used in the past.</p>

<pre><code>def retry_cancelled_order(context, data):  
    for order_id in context.todays_orders[:]:  
        original_order = get_order(order_id)  
        if original_order and original_order.status == 2 :  
            retry_id = order(  
                original_order.sid,  
                original_order.amount,  
                style=LimitOrder(original_order.limit)  
                )  
            log.info(&#39;order for %i shares of %s cancelled - retrying&#39;  
                         % (original_order.amount, original_order.sid))  
            context.todays_orders.remove(original_order)  
            context.todays_orders.append(retry_id)  
</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5902395d568ab9000da04735' id='5902395d568ab9000da04735'>
<a href='#5902395d568ab9000da04735'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/57d8e59777a302dae50009b4'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/7f0b038bd2696dbb603b95035c697d9e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/57d8e59777a302dae50009b4'>Takis Mercouris</a>
</div>
<a UTCms='1493317981000' class='quanto-date posted-at response-posted-at' href='#5902395d568ab9000da04735'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>thank you Chris; this will save me a bunch of time.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5902ab58206c3b000d7d371b' id='5902ab58206c3b000d7d371b'>
<a href='#5902ab58206c3b000d7d371b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/576edefeb8dc98dc240008d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/639ce5d16049c91e04aa486f72158fa8?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/576edefeb8dc98dc240008d2'>Charles Witt</a>
</div>
<a UTCms='1493347160000' class='quanto-date posted-at response-posted-at' href='#5902ab58206c3b000d7d371b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Just wanted to point out that:<br>
context.todays_orders.remove(original_order)<br>
should probably be:<br>
context.todays_orders.remove(order_id)<br>
... Apparently some actual debugging, not by me, but by Peter Bakker in a different thread figured this out.
&quot;I debugged it as it failed and it confuses the object for the ID&quot;</p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5906c6263c0e2951735be181' id='5906c6263c0e2951735be181'>
<a href='#5906c6263c0e2951735be181'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/59023ce0ac8101000d39f148'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/ef090d553e69594a70747d339225edc3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/59023ce0ac8101000d39f148'>Samuel Mahal</a>
</div>
<a UTCms='1493616166000' class='quanto-date posted-at response-posted-at' href='#5906c6263c0e2951735be181'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>As some one who is learning quantopian high frequency trading im really excited to lookok at your algorithm thank you  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='590a38da05cb770010f4f07e' id='590a38da05cb770010f4f07e'>
<a href='#590a38da05cb770010f4f07e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/58e9e5fd152d2c000d01402c'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e5be9eef1c398d1bcba430525d60235f?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/58e9e5fd152d2c000d01402c'>Brandon Levan</a>
</div>
<a UTCms='1493842138000' class='quanto-date posted-at response-posted-at' href='#590a38da05cb770010f4f07e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hi All<br>
If I want to implement a delay of (5 seconds) between trades. What should I add to this algo?<br>
example<br>
buy 100 QQQ<br>
DELAY 5 SECONDS<br>
BUY 100 TMF....  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='591edc9153bfa30010cc6e94' id='591edc9153bfa30010cc6e94'>
<a href='#591edc9153bfa30010cc6e94'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56406b03491ea6ba6400026e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/feb4cbf34749af2eb518ca1110c1a4e3?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56406b03491ea6ba6400026e'>Thomas Chang</a>
</div>
<a UTCms='1495194769000' class='quanto-date posted-at response-posted-at' href='#591edc9153bfa30010cc6e94'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>This algo suffered a big drawdown on Wednsday. This means also, in case of 2008, this algo will run to hell. </p>

<p>The big drawdown on Wednsday is at the other side a good change to refine the alog.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='591f11ae1c27613a3ee6c899' id='591f11ae1c27613a3ee6c899'>
<a href='#591f11ae1c27613a3ee6c899'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55e602a002dd2432b00001d2'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/706508819421d25d2dfb273421dc6887?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55e602a002dd2432b00001d2'>Burrito Dan</a>
</div>
<a UTCms='1495208366000' class='quanto-date posted-at response-posted-at' href='#591f11ae1c27613a3ee6c899'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>It looks like Yahoo and CBOE Vix data has gone out of sync. Yahoo has got stuck at a historic value...</p>

<pre><code>Yahoo VIX vs CBOE Vix  
...... 10.4 10.4
...... 10.4 10.42
...... 10.4 10.65
18/May 10.4 15.59  
</code></pre>

<p>I&#39;ve been running the two systems parallel to check for discrepancies before moving over to CBOE before end June.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='591f1908059488000d81fdc3' id='591f1908059488000d81fdc3'>
<a href='#591f1908059488000d81fdc3'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1495210248000' class='quanto-date posted-at response-posted-at' href='#591f1908059488000d81fdc3'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>The Yahoo feed has been discontinued - I&#39;d use the CBOE Vix now.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5923922a9e939f000db73241' id='5923922a9e939f000db73241'>
<a href='#5923922a9e939f000db73241'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1495503402000' class='quanto-date posted-at response-posted-at' href='#5923922a9e939f000db73241'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Listening and learning from others I had improved this live trading algo; it does not have the smoothing mentioned in the posts above, I think it should. I have attached the algo that I traded till 2017-05-11 with 25K starting balance and with a return of 41.5% in 7 months. I stopped it as another volatility algo I developed in the meantime is a bit more stable. Anyway, I thought I share it as this algo made some substantial money but it indeed it did loose some cash last Wednesday.... part of the game! I&#39;m not trading this anymore but I do think it has some room for improvement; I might develop it further in the future and put it live again once I can combine futures and equities in the equity calendar. </p>

<p>NB1: the my_assigned_weights() function that calls the optimizer is redundant and only there for fun and games. It is superseded by a momentum based function that orders the side stocks</p>

<p>NB2: most of the time this algo has a leverage of around 0.5, hence the alpha could be a lot higher. However I use the cash component in this algo to limit the DD, and therefore limit the the return. As I trade real cash I tend to use my cash to define exposure, lever it up to the max and you get get more out of this algo but also a few ulcers and heart attacks...  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5929aadbb204e1000de7b882' id='5929aadbb204e1000de7b882'>
<a href='#5929aadbb204e1000de7b882'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5674b7bd1869e73f4a000334'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e411d64f7a123f5c2102614fafa48b58?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5674b7bd1869e73f4a000334'>Luke Izlar</a>
</div>
<a UTCms='1495902939000' class='quanto-date posted-at response-posted-at' href='#5929aadbb204e1000de7b882'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Peter, I&#39;m not sure if you&#39;re aware but your  algo is not executing the side stock ordering code because context.n always = 0 and returns because you are not running the my_assigned_weights() fucntion. The watch function doesn&#39;t seem to trigger at all either with just XIV trading, the threshold might be too high. It seemed odd to me, because I was able to remove 90% of the code in your algo and it still worked identically.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='592a5975d2d3bc110a72935c' id='592a5975d2d3bc110a72935c'>
<a href='#592a5975d2d3bc110a72935c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1495947637000' class='quanto-date posted-at response-posted-at' href='#592a5975d2d3bc110a72935c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I left this in as a lot of people want to order the side stocks with the optimizer. I keep my algo&#39;s as single minded as possible so I only order the VIX releated elements. The order_side_stocks() get triggered but as I dont run the my_assigned_weights() function it is void. Add the my_assigned_weights() in and you&#39;ll have the side stocks.  Watch should be triggered..... I&#39;ll check  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='592a5cf0b241410010c5159b' id='592a5cf0b241410010c5159b'>
<a href='#592a5cf0b241410010c5159b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1495948528000' class='quanto-date posted-at response-posted-at' href='#592a5cf0b241410010c5159b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>cleaner code  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='592b17c8b241410010c51e8a' id='592b17c8b241410010c51e8a'>
<a href='#592b17c8b241410010c51e8a'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/55391789a60365f29b000851'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5894ebb62a2e62c2dd0b28b0efe4a6d7?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/55391789a60365f29b000851'>David Heller</a>
</div>
<a UTCms='1495996360000' class='quanto-date posted-at response-posted-at' href='#592b17c8b241410010c51e8a'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>why is the first trade with 1 leverage?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='592b764745c79d000dc9b8a7' id='592b764745c79d000dc9b8a7'>
<a href='#592b764745c79d000dc9b8a7'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1496020551000' class='quanto-date posted-at response-posted-at' href='#592b764745c79d000dc9b8a7'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>no real reason, just wanted it to trade. Best to use the default indeed, context.maxBuy  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='592b84e98ad139001015e9fd' id='592b84e98ad139001015e9fd'>
<a href='#592b84e98ad139001015e9fd'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/592b82c3332dec000db3c03e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/c6302774b4fd6e8cb587289494fad37e?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/592b82c3332dec000db3c03e'>Blaine Winston</a>
</div>
<a UTCms='1496024297000' class='quanto-date posted-at response-posted-at' href='#592b84e98ad139001015e9fd'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Hello All......grateful to have found this community.</p>

<p>Question...be nice please. I can program about anything using Metastock, however, when it comes to the code you guys are using it becomes foreign to me.<br>
Regarding the source code here....has anyone translated it to Metastock already ?  If not, I would be happy to do so and share of course if someone would kindly tell me what the source code says/does in laymans terms. I suppose I could fumble around with it for weeks, but just thought I&#39;d ask first.</p>

<p>Regards  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59a06bd00fdd41100a8748a0' id='59a06bd00fdd41100a8748a0'>
<a href='#59a06bd00fdd41100a8748a0'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51dda99861406be3ed000001'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f8b2bd25cb49c26ebb20282e16df66eb?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51dda99861406be3ed000001'>Martin Clasen</a>
</div>
<a UTCms='1503685584000' class='quanto-date posted-at response-posted-at' href='#59a06bd00fdd41100a8748a0'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>After years of working with Quantopian, I decided to use this strategy to invest my own money, finally, private investments are going to be discontinued, so It seems like a good opportunity to share my best version.<br>
Now, nothing makes sense, if someone port it somewhere, let me know.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59a174c858e612000d870172' id='59a174c858e612000d870172'>
<a href='#59a174c858e612000d870172'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1503753416000' class='quanto-date posted-at response-posted-at' href='#59a174c858e612000d870172'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Thanks Martin, Attached a version that keeps the leverage in check and that has some basic trading guard rails  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59a3159dee8ad5000d8aabee' id='59a3159dee8ad5000d8aabee'>
<a href='#59a3159dee8ad5000d8aabee'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5985ab45c02015000debad47'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/df8d500834e21eadc92e8b51495f312d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5985ab45c02015000debad47'>Kamal Prasad</a>
</div>
<a UTCms='1503860125000' class='quanto-date posted-at response-posted-at' href='#59a3159dee8ad5000d8aabee'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>When I back tested the original also from 2012 to present, I got a beta of 1.06. So, the returns are great but with greater beta,</p>

<p>thanks<br>
-kaaml  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59a32a0538306b4c7f91ce79' id='59a32a0538306b4c7f91ce79'>
<a href='#59a32a0538306b4c7f91ce79'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51318528831378d42a0001ad'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/af8a2fdb6b6e1c83933d4f7b647b235d?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51318528831378d42a0001ad'>Guy Fleury</a>
</div>
<a UTCms='1503865349000' class='quanto-date posted-at response-posted-at' href='#59a32a0538306b4c7f91ce79'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>@Peter, you could push on that strategy a little bit more. For instance, by loosening its allocation constraints in the following code snippet:</p>

<pre><code>   for i, stock in enumerate(context.stocks):  
        p = allocation[i] * 0.6 * context.leverage  
        rebalance(context, data, stock, 0 if p &lt; 0.05 else p)

</code></pre>

<p>Here are my tests results just changing those two parameters:</p>

<p>Allocation factors:<br>
<img src="https://image-proxy.quantopian.com/d4eeef2716789d2f82df65b0a6ceba8a0cbbd65f/687474703a2f2f616c706861706f77657274726164696e672e636f6d2f7175616e746f7069616e2f5350595f5756465f416c6c6f636174696f6e2e706e67" /> </p>

<p>As the allocation increases and more trades are allowed, total return increases as well as max drawdown. Alpha increased, beta not so much. Sharpe and Sortino ratios remained practically the same. Volatility increased a little.</p>

<p>For the 5% added drawdown, you get $2M more. Is the exchange acceptable?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59ecf62b76679c0009393d07' id='59ecf62b76679c0009393d07'>
<a href='#59ecf62b76679c0009393d07'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/591acbea646748659ee5f8ce'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/f29776c7000ab9288a680f18c08dc8d1?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/591acbea646748659ee5f8ce'>TWI_proptrader</a>
</div>
<a UTCms='1508701739000' class='quanto-date posted-at response-posted-at' href='#59ecf62b76679c0009393d07'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Using different ETFs and optimising since inception.<br>
This delivers a Sharpe ratio of over 2.2 .<br>
Nice algorithm @Peter  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59eeabfa5b31e500093e302e' id='59eeabfa5b31e500093e302e'>
<a href='#59eeabfa5b31e500093e302e'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/571cecf6a5c5baa9f500002e'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/46041da1752043608f246f126bedb245?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/571cecf6a5c5baa9f500002e'>Elsid Aliaj</a>
</div>
<a UTCms='1508813818000' class='quanto-date posted-at response-posted-at' href='#59eeabfa5b31e500093e302e'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>All these strategies are useless with VIX basically at the lowest it&#39;s ever been in history since 2011, if you run backtests from Vix data going back to 2007 with simulated data, you will see they have like 60%+ drawdowns, if not blow out your whole account completely. Be weary with real money, at record low vol.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59ef2f3d857e0b000938feff' id='59ef2f3d857e0b000938feff'>
<a href='#59ef2f3d857e0b000938feff'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/56a003d3eb9a502cc40000d7'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/3d1e920b94af6976544310a8f9432e34?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/56a003d3eb9a502cc40000d7'>Tyler Wilson</a>
</div>
<a UTCms='1508847421000' class='quanto-date posted-at response-posted-at' href='#59ef2f3d857e0b000938feff'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Elsid, very good point - the market hasn&#39;t seen these types of VIX lows before.  A spike up to even 18-20 is going to cause a huge drawdown  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='59efff2b4645a741dcb3a32c' id='59efff2b4645a741dcb3a32c'>
<a href='#59efff2b4645a741dcb3a32c'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1508900651000' class='quanto-date posted-at response-posted-at' href='#59efff2b4645a741dcb3a32c'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>True, if you only would have this algo running as your only algo. The algo tries to profit from the movement up and down which will always be there as the curve changes al the time. Personally I have a maximum of 20-30% of my money in this type of algo&#39;s (and I have 3 versions ranging from very agressive to not so agressive). The hardest thing is an algo that reliable pickup long Vol when its time to do so. As the VXX and UVXY both have a natural slope to zero one has to get the timing right. This specific algo does not do this, others do but they are more complex and risky.</p>

<p>BTW, the orginal algo had a rather naive switching condition:</p>

<pre><code>
    if(WVF[-2] &lt; WFV_limit and WVF[-1] &gt;= WFV_limit):  
        order_target_percent(vxx, 0.00)  
        order_target_percent(xiv, 0.30)  
    #Sell position when WVF crosses under 14  
    elif(WVF[-2] &gt; WFV_limit and WVF[-1] &lt;= WFV_limit):  
        order_target_percent(xiv, 0.00)  
        order_target_percent(vxx, 0.10)

</code></pre>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e97348c8c332f003e59b322' id='5e97348c8c332f003e59b322'>
<a href='#5e97348c8c332f003e59b322'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5de868f1a1a7e063c1bf55bb'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/e952c5caf8bae8f830af14f4488b2d52?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5de868f1a1a7e063c1bf55bb'>Caramel xbj</a>
</div>
<a UTCms='1586967692000' class='quanto-date posted-at response-posted-at' href='#5e97348c8c332f003e59b322'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>So nobody talked about this strategy again after 2018.  I guess it&#39;s because of the XIV implosion/meltdown, right? Has someone used alternative ETF/ETN with this strategy lately?  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e9810fcb606781b833f4724' id='5e9810fcb606781b833f4724'>
<a href='#5e9810fcb606781b833f4724'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1587024124000' class='quanto-date posted-at response-posted-at' href='#5e9810fcb606781b833f4724'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Yes, I&#39;m trading a variant of this strategy live... I have added a few factors and guardrails but it is doing fine  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e98562ab6067840f53f4a5d' id='5e98562ab6067840f53f4a5d'>
<a href='#5e98562ab6067840f53f4a5d'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1587041834000' class='quanto-date posted-at response-posted-at' href='#5e98562ab6067840f53f4a5d'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Picking one or two examples from random, there are some pretty awful performances here. Always easy to see the errors after the event!  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e9864781ac0070042557edf' id='5e9864781ac0070042557edf'>
<a href='#5e9864781ac0070042557edf'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1587045496000' class='quanto-date posted-at response-posted-at' href='#5e9864781ac0070042557edf'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Here is one of the better examples but it has still been a disappointing and volatile few years since August 26th 2017 the date this particular version was published.  The algorithm is flat since that date with far higher draw downs than were seen in the original back test. Given some years of experience in this game, I can not say that I am entirely surprised.  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e986b081ac0070042557f23' id='5e986b081ac0070042557f23'>
<a href='#5e986b081ac0070042557f23'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/51d125a71144e60865000044'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/b7dd86784deedc047d5ad0fb30378bdd?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/51d125a71144e60865000044'>Peter Bakker</a>
</div>
<a UTCms='1587047176000' class='quanto-date posted-at response-posted-at' href='#5e986b081ac0070042557f23'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>Good to show @zenothestoic... Yes, this specific strategy has quite a few problems. If people want to use it for live trading: don&#39;t.<br>
The main issue is that it looks at VXX, as VXX is a derivative you should be looking at VX and the VX structure to make decisions. The second is that the values used are optimised, 14, 50 etc.... Now I wouldn&#39;t do that unless you have a clear bounded factor, but even then it should be dynamic in some way.<br>
Finally, when I wrote this algo, I took a few things from others and combined it creatively. I learned a lot from that, about principles and stuff, but I really didn&#39;t understand the microstructure of the VIX, the VX, VXX and how it behaves in time of stress. I trade this stuff now comfortably for a few years now and I still didn&#39;t have a drawdown beyond 16% with solid profit in most months.... but that just means I have been lucky ;)  </p>
</div>
</div>
</div>

<div class='post-container response-container' data-post-id='5e986df178176a004c03723b' id='5e986df178176a004c03723b'>
<a href='#5e986df178176a004c03723b'></a>
<div class='post-metadata'>
<div class='row'>
<div class='col-xs-14'>
<div class='inline-block'>
<div class='avatar-container'>
<a href='/users/5b1f9ef65ad768004ad5f513'><img class='avatar async-image' data-src='https://secure.gravatar.com/avatar/5435859afd955dddb6ccc1f0a31a482b?d=https%3A%2F%2Fs3.amazonaws.com%2Fquantopian-website-assets%2Fdefault-avatar.png' height='30' width='30'></a>
</div>
<a class='author-name' href='/users/5b1f9ef65ad768004ad5f513'>Zenothestoic</a>
</div>
<a UTCms='1587047921000' class='quanto-date posted-at response-posted-at' href='#5e986df178176a004c03723b'></a>
</div>
</div>
</div>

<div class='response-text'>
<div class='response-text-container post-body'><p>I am sure you have done your homework Peter and from my very detailed examination of all aspects of the VIX a few years back, there certainly ought to be profit to be had if you can time it or otherwise protect yourself. I had protected my position at the time of that short VIX ETF going bust with options. And I got out with a profit. I didn&#39;t re-visit this trade after that. I ought to have done. </p>

<p>I&#39;m not sure about luck. There is definitely a market structure here to be taken advantage of.  </p>
</div>
</div>
</div>

</div>
<div class='sign-in-please'>
Please <a href='/signin?return_to=/posts/the-spy-who-loved-wvf-or-just-another-volatility-spy-strategy'>sign in</a> or
<a href='/users/sign_up?redirect_to=/posts/the-spy-who-loved-wvf-or-just-another-volatility-spy-strategy'>join Quantopian</a> to
post a reply.
</div>
</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  window.fbAsyncInit = function() {
    FB.init({
      appId: "550580758292093",
      status: false,
      cookie: true,
      xfbml: true
    });
  };
  
  (function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
  }(document, /*debug*/ false));
  
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
    js.src="//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>
<script>
  $(document).ready(function () {
    quanto.instances.pm = new quanto.PostManager(false)
  });
</script>

<div class='login-footer'>
<div class='container'>
<div class='login-footer-text'>
Become an expert in quant finance through Quantopian's hands-on education.
</div>
<div class='login-footer-button'>
<button class='btn btn-v2 stroke join-modal-link mixpanel-button' data-event='anon join footer click posts' data-mixpanel='click'>
Join Now
</button>
</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='error-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'>Error</span>
</div>
<div class='modal-body body-content'>
<p>Sorry, something went wrong.  Try again or contact us by <a class='feedback-link'>sending feedback</a>.</p>
</div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' href='#'>Close</button>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='confirmation-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<div class='pull-right'>
<button class='btn btn-v2 border' data-dismiss='modal'>Cancel</button>
<button class='btn btn-v2 blue action-button' data-dismiss='modal'></button>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='message-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title modal-title'></span>
</div>
<div class='modal-body body-content'></div>
<div class='modal-footer'>
<button class='btn btn-v2 blue action-button' data-dismiss='modal' id='message-modal-close'>Close</button>
</div>

</div>
</div>
</div>

<div class='always-bootstrap3-modals'>
<div class='fade modal quanto-modal-v2' id='join-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header visible-small'>
<span class='title'>
Join Quantopian.  It's Free!
</span>
<div class='modal-x-out visible-xs'></div>
</div>
<div class='modal-body'>
<div class='flex-wrap'>
<div class='join-left-pane hidden-small'>
<div class='margin_30l'>
<div class='join-hero-text'>
Join Quantopian.  It's Free!
</div>
<div class='join-benefits'>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image code'></div>
</div>
<div class='join-text'>
Use our research platform, backtester, and dozens of clean data sets.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image learn'></div>
</div>
<div class='join-text'>
Learn with our hands-on education and community forums.
</div>
</div>
<div class='join-benefit'>
<div class='join-image-container'>
<div class='join-image win'></div>
</div>
<div class='join-text'>
Enter to win cash prizes in our contest.
</div>
</div>
</div>
<div class='hidden saved-reminder'>
Don't worry, all your work is already saved.
</div>
</div>
</div>
<div class='join-right-pane'>
<div class='hidden-small'>
<div class='button-pane'>
<a class="button btn-v2 user-form-btn" href="/signin">Already a Quantopian member?</a>
</div>
</div>
<div class='visible-small'>
<div class='already-member'>
<a href='/signin'>Already a Quantopian member?</a>
</div>
</div>
<form class="quanto-form-v2" id="new-user-modal-form" action="/users" accept-charset="UTF-8" data-remote="true" method="post"><input name="utf8" type="hidden" value="&#x2713;" /><div class='error-message hidden'>
<div class='message'></div>
</div>
<div class='name-group'>
<div class='form-group inline-block'>
<label for="user_firstname">First Name</label>
<input class="form-control firstname" pattern=".*" required="required" autocomplete="off" autofocus="autofocus" type="text" name="user[firstname]" id="user_firstname" />
</div>
<div class='form-group inline-block'>
<label for="user_lastname">Last Name</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="text" name="user[lastname]" id="user_lastname" />
</div>
</div>
<div class='form-group'>
<label for="user_email">Email</label>
<input class="form-control" value="" pattern=".*" required="required" autocomplete="off" type="email" name="user[email]" id="user_email" />
</div>
<div class='form-group'>
<label for="user_password">Password</label>
<input autocomplete="off" class="form-control" pattern=".*" required="required" type="password" name="user[password]" id="user_password" />
</div>
<div class='checkbox eula'>
<input id='eula-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='eula-checkbox' id='checkbox-label'>I accept the <a href='/policies/terms' target='_blank'>Terms Of Use</a> and <a href='/policies/privacy' target='_blank'>Privacy Policy</a>.</label>
</div>
<div class='checkbox mailchimp-box'>
<input name="user[allow_marketing_emails]" type="hidden" value="0" /><input type="checkbox" value="1" name="user[allow_marketing_emails]" id="user_allow_marketing_emails" />
<div class='quanto-checkbox'></div>
<label for='user_allow_marketing_emails'>
Send me email updates with the latest news from the Quantopian community. We send these emails about once a month.
</label>
</div>
<div class='button-row'>
<button class='btn-v2 blue full' data-redirect-to='/tutorials/getting-started' id='sign-up-button' type='Submit'>Join Quantopian</button>
</div>
</form></div>
</div>
</div>

</div>
</div>
</div>

<div class='fade modal quanto-modal-v2' id='feedback-modal' role='dialog' tabindex='-1'>
<div class='modal-dialog' role='document'>
<div class='modal-content'>
<div class='modal-header'>
<span class='title'>Contact Support</span>
</div>
<div class='modal-body'>
<form class='anon-user controls quanto-form-v2' id='feedback-form'>
<div class='feedback-inputs'>
<div class='form-group'>
<input autofocus class='form-control' id='feedback-email-box' name='email' placeholder='Email Address' type='email'>
</div>
<div class='form-group'>
<input class='form-control' id='feedback-name-box' placeholder='Name' type='name'>
</div>
<div class='form-group'>
<textarea class='form-control' id='feedback-box' name='feedback' placeholder='What may we help you with?' rows='10'></textarea>
</div>
</div>
</form>
<form class='hidden quanto-form-v2 select-resource-area'>
<div class='select-step select-type-step'>
<div class='form-group'>
<select class='form-control select-resource-dropdown' title='Select the item you need help with'>
<option value='algorithm'>Algorithm</option>
<option value='backtest'>Backtest</option>
<option value='notebook'>Notebook</option>
</select>
</div>
</div>
<div class='select-step loading-area hidden'>
<div class='loading-text'>
Loading...
</div>
</div>
<div class='select-step empty-list-area hidden'>
<div class='back-button'>Go Back</div>
<div class='empty-text'>
No <span class='empty-list-resource-text'>algorithms</span> found
</div>
</div>
<div class='select-algo-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-algo-table select-item-table'>
<thead>
<tr>
<th>
Algorithm
<span class='sort-icon'></span>
</th>
<th>
Last Modified
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-backtest-area select-step hidden'>
<div class='back-button'>Go Back</div>
<table class='select-backtest-table select-item-table'>
<thead>
<tr>
<th>
Backtest
<span class='sort-icon'></span>
</th>
<th>
Started At
<span class='sort-icon'></span>
</th>
<th>
Overall Return
<span class='sort-icon'></span>
</th>
<th>
Status
<span class='sort-icon'></span>
</th>
</tr>
</thead>
</table>
</div>
<div class='select-notebook-area select-step hidden'>
<div class='back-button'>Go Back</div>
<div class='subtitle select-cell-step'>
Choose a cell to use as the preview for this notebook:
</div>
<div class='iframe-wrapper'>
<iframe class='notebook-list-iframe slow-fade' src=''></iframe>
</div>
<div class='progress-area slow-fade in'>
<div class='progress-container'>
<div class='progress-title'>
<div class='quanto-loader gray'></div>
</div>
</div>
</div>
<div class='maintenance-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, research is currently undergoing maintenance.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please check back shortly. If the maintenance period lasts longer than expected,
you can find updates on <a href='https://status.quantopian.com/'>status.quantopian.com</a>.
</div>
</div>

</div>
</div>
<div class='error-area'>
<div class='error-container'>
<div class='row'>
<div class='col-md-14 msg-title h1'>
Sorry, something went wrong on our end.
</div>
</div>
<div class='row'>
<div class='col-md-14 msg-subtitle'>
Please try again or contact <a class='open-feedback-link'>Quantopian support</a>.
</div>
</div>

</div>
</div>

</div>
<div class='selected-item-area select-step hidden'>
<div class='selected-item-group form-group'>
<div class='selected-item-control'>
<input class='disabled form-control selected-item-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change change-primary-item-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
<div class='selected-backtest-control'>
<input class='disabled form-control selected-backtest-box' type='text'>
<span class='secure-icon icon'></span>
<button class='btn change-backtest-button change-selection-button new-btn transparent' type='button'>
<span class='refresh-icon icon'></span>
</button>
</div>
</div>
<div class='checkbox-group form-group'>
<div class='checkbox give-permission'>
<input class='give-permission-checkbox' id='feedback-give-permission-checkbox' type='checkbox'>
<div class='quanto-checkbox'></div>
<label for='feedback-give-permission-checkbox'>
I permit Quantopian to view <span class='item-type-text'>this algorithm,
backtest or notebook and their imported datasets</span> for the purpose of providing support.
</label>
</div>
</div>
</div>
</form>

<div class='loading-step hidden'>
<div class='loading-text'>
Submitting your support ticket...
</div>
</div>
<div class='success-step invisible'>
<h2 class='title center'>
You've successfully submitted a support ticket.
</h2>
<p>
Our support team will be in touch soon.
</p>
<div class='confirmation-image'></div>
</div>
</div>
<div class='modal-footer'>
<button class='btn-v2 blue' id='send-feedback-button'>Send</button>
<div class='error-message hidden'>
Error submitting support request.
</div>
</div>

</div>
</div>
</div>

</div>
</div>
<div class='footer' id='quanto-footer-container'>
<div class='container'>
<div class='row header-row'>
<div class='col-sm-fourth span3'>
<img class='async-image logotype-image' data-src='https://qf.quantopian.com/assets/logos/logo-q-full-b23bda5ac757691b9259d396d0dfef91567165868b8c955a836649686e6d2248.svg'>
</div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'></div>
<div class='col-sm-fourth span3'>
<div class='feedback-email'>
Need help?
<a href="/cdn-cgi/l/email-protection#e7818282838586848ca7969286899388978e8689c984888a">Contact support.</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-sm-fourth span3'>
<div class='header'>Company</div>
<div class='footer-row'>
<a href='/about'>About</a>
</div>
<div class='footer-row'>
<a href='/academia'>Academia</a>
</div>
<div class='footer-row'>
<a href='/jobs'>Careers</a>
</div>
<div class='footer-row'>
<a href='/posts'>Community</a>
</div>
<div class='footer-row'>
<a href='/events'>Events</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Learn &amp; Support</div>
<div class='footer-row'>
<a href='/faq'>FAQ</a>
</div>
<div class='footer-row'>
<a href='/tutorials/getting-started'>Getting Started</a>
</div>
<div class='footer-row'>
<a href='/docs'>Documentation</a>
</div>
<div class='footer-row'>
<a href='/tutorials'>Tutorials</a>
</div>
<div class='footer-row'>
<a href='/lectures'>Lectures</a>
</div>
<div class='footer-row'>
<a href='/opensource'>Open Source</a>
</div>
<div class='footer-row'>
<a href='https://status.quantopian.com/'>Site Status</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Notices</div>
<div class='footer-row'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='footer-row'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
<div class='footer-row'>
<a href='/security'>Security</a>
</div>
<div class='footer-row'>
<a href='/policies/code-of-conduct'>Code of Conduct</a>
</div>
</div>
<div class='col-sm-fourth span3'>
<div class='header'>Follow Us</div>
<div class='footer-row'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='footer-row'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='footer-row'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='footer-row'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
</div>
</div>
<div class='row'>
<div class='col-xs-14 span12'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>
</div>
</div>
<div class='mobile-footer'>
<div class='mobile-nav-category main-links'>
<div class='mobile-nav-row-footer'>
<a href='/about'>About Quantopian</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/jobs'>Careers</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/posts'>Community</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/events'>Events</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/docs'>Documentation</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/academia'>Academia</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/lectures'>Lectures</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://status.quantopian.com/'>Status</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.facebook.com/quantopian'>Facebook</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.twitter.com/quantopian'>Twitter</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.linkedin.com/company/quantopian'>LinkedIn</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='https://www.youtube.com/channel/UC606MUq45P3zFLa4VGKbxsg'>YouTube</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/terms'>Terms of Use</a>
</div>
<div class='mobile-nav-row-footer'>
<a href='/policies/privacy'>Privacy Policy</a>
</div>
</div>
<div class='mobile-nav-category'>
<div class='disclaimer'>
<p>
The material on this website is provided for informational purposes only and does not constitute an offer to sell, a solicitation to buy, or a recommendation or endorsement for any security or strategy, nor does it constitute an offer to provide investment advisory services by Quantopian.
</p>
<p>
In addition, the material offers no opinion with respect to the suitability of any security or specific investment. No information contained herein should be regarded as a suggestion to engage in or refrain from any investment-related course of action as none of Quantopian nor any of its affiliates is undertaking to provide investment advice, act as an adviser to any plan or entity subject to the Employee Retirement Income Security Act of 1974, as amended, individual retirement account or individual retirement annuity, or give advice in a fiduciary capacity with respect to the materials presented herein.  If you are an individual retirement or other investor, contact your financial advisor or other fiduciary unrelated to Quantopian about whether any given investment idea, strategy, product or service described herein may be appropriate for your circumstances.  All investments involve risk, including loss of principal.  Quantopian makes no guarantees as to the accuracy or completeness of the views expressed in the website. The views are subject to change, and may have become unreliable for various reasons, including changes in market conditions or economic circumstances.
</p>

</div>
</div>
</div>

</div>
<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', "UA-8519877-1", {
    cookieDomain: "quantopian.com"
  });
  ga('set', 'dimension1', 'session_5f9dc7425d387f00077e48e4');
  
  ga('send', 'pageview');
</script>

<input type="hidden" name="is_mac" id="is_mac" value="false" />
<input type="hidden" name="mp" id="mp" value="75873953cd404bcc1da88a55ff51e3b4" />
<script>
  (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("75873953cd404bcc1da88a55ff51e3b4");
</script>
<script>
  mixpanel.track("view page", {"page": window.location.pathname});
</script>
</html>
